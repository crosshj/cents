/**
 * Minified by jsDelivr using Terser v5.39.0.
 * Original file: /npm/@crosshj/html-next@0.0.29/dist/htmlNext.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
const t=(t,...e)=>{let n="";for(let r=0;r<t.length;r++)n+=t[r],r<e.length&&(n+=e[r]);return n},e={red:"#f44336",pink:"#e91e63",purple:"#9c27b0",deepPurple:"#673ab7",indigo:"#3f51b5",blue:"#2196f3",lightBlue:"#03a9f4",cyan:"#00bcd4",teal:"#009688",green:"#4caf50",lightGreen:"#8bc34a",lime:"#cddc39",yellow:"#ffeb3b",amber:"#ffc107",orange:"#ff9800",deepOrange:"#ff5722",brown:"#795548",grey:"#9e9e9e",blueGrey:"#607d8b"},n=t=>t&&"string"==typeof t?t.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&#10;/g,"\n").replace(/&#13;/g,"\r").replace(/&#9;/g,"\t"):"",s=t=>(t=>{const n=t.match(/^(\w+)(A\d+)$/);if(n){const[,t,r]=n,s=e[t];if(!s)return"#9e9e9e";const i={A100:20,A200:40,A400:60,A700:80}[r]||50;return`color-mix(in srgb, ${s} ${i}%, white ${100-i}%)`}const r=t.match(/^([a-zA-Z]+)(\d{2,3})$/);if(r){const[,t,n]=r,s=e[t];if(!s)return"#9e9e9e";const i=parseInt(n);if(500===i)return s;if(i<=400){const t={50:10,100:20,200:30,300:40,400:50}[i]||50;return`color-mix(in srgb, ${s} ${t}%, white ${100-t}%)`}if(i>=600){const t={600:80,700:70,800:60,900:50}[i]||50;return`color-mix(in srgb, ${s} ${t}%, black ${100-t}%)`}}return"#9e9e9e"})(t);function i(t,e){if("string"!=typeof t)return t;if(!e)return t;const n=t.startsWith("DEBUG "),i=n?t.substring(6):t,a=i.match(/^WHEN\s+(.+?)\s+IS\s+(.+?)\s+THEN\s+(.+?)\s+ELSE\s+(.+)$/);if(a){const[,t,r,s,i]=a,o=function(t,e,n,r=!1){if(!n)return!1;const s=t.trim().startsWith("global_")?n[t.trim().substring(7)]:t.trim();if(e.includes("{{")&&e.includes("}}"))return!1;const i=e.trim().startsWith("global_")?n[e.trim().substring(7)]:e.trim(),a=s===i;return r&&(JSON.stringify(s),JSON.stringify(i)),a}(t,r,e,n);return(o?s:i).replace(/^['"]|['"]$/g,"")}const o=i.match(/^WHEN\s+(.+?)\s+THEN\s+(.+?)\s+ELSE\s+(.+)$/);if(o){const[,t,s,i]=o,a=(r(t,e)?s:i).replace(/^['"]|['"]$/g,"");return n&&r(t,e),a}const l=s(i);return"#9e9e9e"!==l||"grey500"===i?l:t}function r(t,e){if(!e)return!1;const n=t.trim();return n.startsWith("global_")?!!e[n.substring(7)]:!!e[n]}function a(t){if(!t||"string"!=typeof t)return"";let e=t.replace(/<script[^>]*type="module"[^>]*>[\s\S]*?<\/script>/gi,"");if(e=e.replace(/<script[^>]*src="[^"]*vite[^"]*"[^>]*>[\s\S]*?<\/script>/gi,""),e=e.replace(/<script[^>]*src="[^"]*\/src\/[^"]*"[^>]*>[\s\S]*?<\/script>/gi,""),e=e.replace(/<link[^>]*rel="modulepreload"[^>]*>/gi,""),e=e.replace(/\n\s*\n\s*\n/g,"\n\n"),e.trim())try{e=function(t){if(!t||"string"!=typeof t)return"";const e="___CODE_BLOCK_PLACEHOLDER___",n=[];let r=t;r=r.replace(/```[\s\S]*?```/g,(t=>{const r=n.length;return n.push(t),`${e}${r}`}));let s=r;const i=/<x-markdown([^>]*)>/gi;let a;for(;null!==(a=i.exec(s));){const t=a[0],e=a[1],n=a.index;if(e.includes("content="))continue;const i=s.indexOf("</x-markdown>",n+t.length);if(-1===i)continue;let o=s.substring(n+t.length,i),l=o,c=0;for(;;){const t=l.slice(c).match(/<x-map([^>]*)>/);if(!t)break;const e=t[0],n=t[1],r=c+t.index,s=r+e.length;if(n.includes("content=")){c=s;continue}const i=l.slice(s).match(/<\/x-map>/);if(!i){c=s;continue}const a=s+i.index,o=a+i[0].length,u=l.slice(s,a);if(u.includes("<template>")){c=o;continue}const h=`<x-map${n}><template>${u}</template></x-map>`;l=l.slice(0,r)+h+l.slice(o),c=r+h.length}o=l;const u=o.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\n/g,"&#10;").replace(/\r/g,"&#13;").replace(/\t/g,"&#9;"),h=t+r.substring(n+t.length,i)+"</x-markdown>",p=`<x-markdown${e} content="${u}"></x-markdown>`;s=s.replace(h,p)}s=s.replace(new RegExp(`${e}(\\d+)`,"g"),((t,e)=>n[parseInt(e)].replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\n/g,"&#10;").replace(/\r/g,"&#13;").replace(/\t/g,"&#9;")));const o="___MARKDOWN_PLACEHOLDER___",l=[];let c=s;c=c.replace(/<x-markdown[^>]*content="[^"]*"[^>]*><\/x-markdown>/gi,(t=>{const e=l.length;return l.push(t),`${o}${e}`})),c=c.replace(/<x-table([^>]*)>([\s\S]*?)<\/x-table>/gi,((t,e,n)=>`<x-table${e} content="${n.replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\n/g,"&#10;").replace(/\r/g,"&#13;").replace(/\t/g,"&#9;")}"></x-table>`)),s=c.replace(new RegExp(`${o}(\\d+)`,"g"),((t,e)=>l[parseInt(e)]));const u="___SCHEMA_MARKDOWN_PLACEHOLDER___",h=[];let p=s;p=p.replace(/<x-markdown[^>]*content="[^"]*"[^>]*><\/x-markdown>/gi,(t=>{const e=h.length;return h.push(t),`${u}${e}`})),p=p.replace(/<x-schema([^>]*)>([\s\S]*?)<\/x-schema>/gi,((t,e,n)=>`<x-schema${e} content="${n.replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\n/g,"&#10;").replace(/\r/g,"&#13;").replace(/\t/g,"&#9;")}"></x-schema>`)),s=p.replace(new RegExp(`${u}(\\d+)`,"g"),((t,e)=>h[parseInt(e)]));const d="___FORM_MARKDOWN_PLACEHOLDER___",f=[];let g=s;g=g.replace(/<x-markdown[^>]*content="[^"]*"[^>]*><\/x-markdown>/gi,(t=>{const e=f.length;return f.push(t),`${d}${e}`})),g=g.replace(/<x-form([^>]*)>([\s\S]*?)<\/x-form>/gi,((t,e,n)=>`<x-form${e} content="${n.replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\n/g,"&#10;").replace(/\r/g,"&#13;").replace(/\t/g,"&#9;")}"></x-form>`)),s=g.replace(new RegExp(`${d}(\\d+)`,"g"),((t,e)=>f[parseInt(e)]));const m="___FLOW_MARKDOWN_PLACEHOLDER___",b=[];let x=s;x=x.replace(/<x-markdown[^>]*content="[^"]*"[^>]*><\/x-markdown>/gi,(t=>{const e=b.length;return b.push(t),`${m}${e}`})),x=x.replace(/<x-flow([^>]*)>([\s\S]*?)<\/x-flow>/gi,((t,e,n)=>`<x-flow${e} content="${n.replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\n/g,"&#10;").replace(/\r/g,"&#13;").replace(/\t/g,"&#9;")}"></x-flow>`)),s=x.replace(new RegExp(`${m}(\\d+)`,"g"),((t,e)=>b[parseInt(e)]));const y="___MAP_MARKDOWN_PLACEHOLDER___",k=[];let v=s;return v=v.replace(/<x-markdown[^>]*content="[^"]*"[^>]*><\/x-markdown>/gi,(t=>{const e=k.length;return k.push(t),`${y}${e}`})),v=v.replace(/<x-map([^>]*)>([\s\S]*?)<\/x-map>/gi,((t,e,n)=>e.includes("content=")||n.includes("<template>")?t:`<x-map${e}><template>${n}</template></x-map>`)),s=v.replace(new RegExp(`${y}(\\d+)`,"g"),((t,e)=>k[parseInt(e)])),s}(e)}catch(t){console.error("Error transforming content elements:",t)}return e}class o extends HTMLElement{constructor(){super(),this.stateSubscriptions=new Map,this.initialState=null,this.originalAttributes=new Map,this.setupStateSubscriptions()}connectedCallback(){this.initialState=this.getCurrentState(),this.storeOriginalAttributes(),this.applySxStyles(),this.applyConditionalAttributes()}disconnectedCallback(){this.stateSubscriptions.forEach((t=>t())),this.stateSubscriptions.clear()}getCurrentState(){return"undefined"!=typeof window&&window.state?{...window.state}:{}}storeOriginalAttributes(){Array.from(this.attributes).forEach((t=>{this.originalAttributes.set(t.name,t.value)}))}setupStateSubscriptions(){(function(t){const e=new Set;return Array.from(t).forEach((t=>{const n=t.value;n.startsWith("DEBUG ")&&(t.name,t.ownerElement);const r=n.match(/global_(\w+)/g);r&&r.forEach((t=>{const n=t.substring(7);e.add(n)}))})),Array.from(e)})(this.attributes).forEach((t=>{if("undefined"!=typeof window&&window.subscribeToState){const e=window.subscribeToState(t,(t=>{this.handleStateChange(t.state)}));this.stateSubscriptions.set(t,e)}}))}handleStateChange(t){this.initialState=t||this.getCurrentState(),this.applySxStyles(),this.applyConditionalAttributes(),this.onStateChange(t)}onStateChange(t){}applyConditionalAttributes(){this.originalAttributes.forEach(((t,e)=>{if(!e.startsWith("sx:")&&(t.includes("global_")||t.includes("WHEN ")||t.includes("DEBUG "))){t.startsWith("DEBUG ");const n=i(t,this.initialState);"className"!==e&&"class"!==e||(this.className=n),this.setAttribute(e,n)}}))}applySxStyles(){const t={};this.originalAttributes.forEach(((e,n)=>{if(n.startsWith("sx:")){const r=n.substring(3),s=i(e,this.initialState),a=this.expandShorthandProperty(r,s);Object.assign(t,a)}})),Object.entries(t).forEach((([t,e])=>{["opacity","zIndex","fontWeight","lineHeight"].includes(t)&&"string"==typeof e&&!isNaN(e)?this.style[t]=parseFloat(e):this.style.setProperty(t,e)})),Array.from(this.attributes).forEach((t=>{t.name.startsWith("sx:")&&this.removeAttribute(t.name)}))}expandShorthandProperty(t,e){const n={},r={m:"margin",mt:"margin-top",mr:"margin-right",mb:"margin-bottom",ml:"margin-left",mx:"margin-inline",my:"margin-block",p:"padding",pt:"padding-top",pr:"padding-right",pb:"padding-bottom",pl:"padding-left",px:"padding-inline",py:"padding-block",bgcolor:"background-color",bg:"background-color"}[t]||t,s=["gap","flex-gap","row-gap","column-gap","grid-row-gap","grid-column-gap","grid-gap","margin","padding","top","right","bottom","left","width","height","min-width","min-height","max-width","max-height"].some((t=>r.includes(t)));return n[r]=s?(t=>/^\d+(\.\d+)?$/.test(t)?8*parseFloat(t)+"px":t)(e):e,n}}class l extends o{constructor(){super(),this.isOpen=!1,this.resolvePromise=null,this.overlay=null,this.modal=null}connectedCallback(){super.connectedCallback(),this.render()}disconnectedCallback(){this.overlay&&this.overlay.removeEventListener("click",this.handleOverlayClick),this.modal&&this.modal.removeEventListener("keydown",this.handleKeydown),super.disconnectedCallback()}render(){const e=this.getAttribute("title")||"",n=this.getAttribute("message")||"",r=this.getAttribute("type")||"alert",s=this.getAttribute("confirmText")||"OK",i=this.getAttribute("cancelText")||"Cancel";this.innerHTML=t`
			<div class="modal-overlay" style="display: none;">
				<div class="modal-container">
					<div class="modal-content">
						${e?t`<div class="modal-header">
									<h3 class="modal-title">${e}</h3>
							  </div>`:""}
						<div class="modal-body">
							<p class="modal-message">${n}</p>
						</div>
						<div class="modal-footer">
							${"confirm"===r?t`
										<button
											class="modal-button modal-button-cancel"
											type="button"
										>
											${i}
										</button>
								  `:""}
							<button class="modal-button modal-button-confirm" type="button">
								${s}
							</button>
						</div>
					</div>
				</div>
			</div>
		`,this.overlay=this.querySelector(".modal-overlay"),this.modal=this.querySelector(".modal-container"),this.setupEventListeners()}setupEventListeners(){if(!this.overlay||!this.modal)return;this.handleOverlayClick&&this.overlay.removeEventListener("click",this.handleOverlayClick),this.handleKeydown&&document.body.removeEventListener("keydown",this.handleKeydown),this.handleOverlayClick=t=>{t.target===this.overlay&&"alert"===this.getAttribute("type")&&this.close(!1)},this.overlay.addEventListener("click",this.handleOverlayClick),this.handleKeydown=t=>{"Escape"===t.key&&"alert"===this.getAttribute("type")&&this.close(!1)},document.body.addEventListener("keydown",this.handleKeydown);const t=this.querySelector(".modal-button-confirm"),e=this.querySelector(".modal-button-cancel");if(t){const e=t.cloneNode(!0);t.parentNode.replaceChild(e,t),e.addEventListener("click",(()=>this.close(!0)))}if(e){const t=e.cloneNode(!0);e.parentNode.replaceChild(t,e),t.addEventListener("click",(()=>this.close(!1)))}}show(){this.isOpen=!0,this.overlay.style.display="flex",this.modal&&(this.modal.style.display="flex"),document.body.style.overflow="hidden",this.modal.focus(),this.modal.setAttribute("tabindex","-1")}hide(){this.isOpen=!1,this.overlay.style.display="none",document.body.style.overflow=""}close(t){this.handleKeydown&&document.body.removeEventListener("keydown",this.handleKeydown),this.handleOverlayClick&&this.overlay.removeEventListener("click",this.handleOverlayClick),this.resolvePromise&&(this.resolvePromise(t),this.resolvePromise=null)}hideContent(){this.isOpen=!1,this.modal&&(this.modal.style.display="none")}dispose(){this.hide(),setTimeout((()=>{this.parentNode&&this.parentNode.removeChild(this)}),100)}updateAndShow(t,e,n="alert",r){this.setAttribute("message",t),this.setAttribute("title",e),this.setAttribute("type",n),this.resolvePromise=r,this.updateContent(t,e,n),requestAnimationFrame((()=>{this.show()}))}updateContent(t,e,n){const r=this.querySelector("#modal-title");r&&(r.textContent=e);const s=this.querySelector(".modal-body p");s&&(s.textContent=t);const i=this.querySelector(".modal-button-cancel"),a="confirm"===n;i&&(i.style.display=a?"block":"none"),this.setupEventListeners()}static findExistingModal(){return document.querySelector("x-modal")}static async alert(t,e="Alert"){return new Promise((n=>{const r=document.createElement("x-modal");r.setAttribute("type","alert"),r.setAttribute("message",t),r.setAttribute("title",e),r.resolvePromise=n,document.body.appendChild(r);const s=()=>{r.overlay?r.show():requestAnimationFrame(s)};requestAnimationFrame(s)}))}static async confirm(t,e="Confirm"){return new Promise((n=>{const r=document.createElement("x-modal");r.setAttribute("type","confirm"),r.setAttribute("message",t),r.setAttribute("title",e),r.resolvePromise=n,document.body.appendChild(r);const s=()=>{r.overlay?r.show():requestAnimationFrame(s)};requestAnimationFrame(s)}))}}const c=new class{constructor(){this.state={},this.listeners=new Map,this.dataSources=new Map,this.subscriptions=new Map,this.flows=new Map,this.componentHooks=new Map,this.urlCache=new Map,this.initialized=!1}initialize(t=null){this.initialized||(this.initialized=!0,t&&(this.routerContext=t))}set(t,e){const n=this.state[t];JSON.stringify(n)!==JSON.stringify(e)&&(this.state[t]=e,"undefined"!=typeof window&&(window.state={...this.state}),this.notifyListeners(t,{property:t,oldValue:n,newValue:e,state:{...this.state}}))}get(t){return this.state[t]}async GetData(t){const e=this.dataSources.get(t);return e&&e.url?await this.fetchUrlData(t,e):this.get(t)}async fetchUrlData(t,e){const{url:n,lazy:r,defaultValue:s}=e;if(this.urlCache.has(n)){const t=this.urlCache.get(n);if(void 0!==t.data)return t.data;if(t.promise)return await t.promise}if(r&&!this.urlCache.has(n))return this.urlCache.set(n,{data:void 0,promise:null,loading:!1}),s;const i=this.performUrlFetch(n,t);this.urlCache.set(n,{data:void 0,promise:i,loading:!0});try{const e=await i;return this.urlCache.set(n,{data:e,promise:null,loading:!1}),this.set(t,e),e}catch(e){return console.error(`Error fetching data from ${n}:`,e),this.urlCache.set(n,{data:s,promise:null,loading:!1}),this.set(t,s),s}}async performUrlFetch(t,e){try{const n=await fetch(t);if(!n.ok)throw new Error(`HTTP ${n.status}: ${n.statusText}`);const r=await n.text();if(t.endsWith(".json")||this.looksLikeJson(r))try{return JSON.parse(r)}catch(e){return console.warn(`Failed to parse JSON from ${t}, using as text:`,e),r}return r}catch(e){throw new Error(`Failed to fetch ${t}: ${e.message}`)}}looksLikeJson(t){const e=t.trim();return e.startsWith("{")&&e.endsWith("}")||e.startsWith("[")&&e.endsWith("]")}getState(){return{...this.state}}subscribe(t,e){return this.listeners.has(t)||this.listeners.set(t,new Set),this.listeners.get(t).add(e),()=>{const n=this.listeners.get(t);n&&n.delete(e)}}notifyListeners(t,e){const n=this.listeners.get(t);n&&n.forEach((n=>{try{n(e)}catch(e){console.error(`Error in state listener for ${t}:`,e)}}))}initializeProperty(t,e){void 0===this.state[t]&&this.set(t,e)}has(t){return t in this.state}getProperties(){return Object.keys(this.state)}registerDataSource(t,e){const{name:n,defaultValue:r,defaultvalue:s,route:i,url:a,lazy:o}=t;if(!n)return;const l=void 0!==r?r:s,c="true"===o||!0===o;if(this.dataSources.set(n,{defaultValue:l,route:i,url:a,lazy:c}),"pathData"===n&&i)this.setupPathDataListener(i);else if(a){if(void 0!==l){let e=l;try{e=JSON.parse(l)}catch(t){}this.initializeProperty(n,e)}c||this.fetchUrlData(n,{url:a,lazy:c,defaultValue:l})}else if(void 0!==l){let e=l;try{e=JSON.parse(l)}catch(t){}this.initializeProperty(n,e)}}unregisterDataSource(t){this.dataSources.delete(t)}registerSubscription(t,e){const{path:n,handler:r}=t;if(!n||!r)return;this.subscriptions.set(n,{handler:r});const s=this.subscribe(n,(async t=>{await this.triggerFlow(r,t)})),i=this.get(n);return void 0!==i&&setTimeout((async()=>{await this.triggerFlow(r,{property:n,oldValue:void 0,newValue:i,state:{...this.state}})}),0),s}unregisterSubscription(t){this.subscriptions.delete(t)}registerFlow(t,e){const{key:n}=t;n&&e&&this.flows.set(n,e)}unregisterFlow(t){this.flows.delete(t)}async triggerFlow(t,e,n=null){let r=this.flows.get(t);r||(r=function(t){const e=document.querySelector(`script[type="application/flow"][data-key="${t}"]`);return e?e.textContent.trim():null}(t)),r?await this.executeFlow(r,e,n):console.warn(`Flow not found: ${t}`)}async executeFlow(t,e,n=null){if(window.lastFlowEvent=e,t&&t.trim())if("string"==typeof t)if(t.includes("undefined")&&t.includes("null")&&t.length<10)console.warn("Flow execution skipped: potentially malformed code");else try{const r=this,s=r.getState(),i=JSON.parse(JSON.stringify(s)),a={global:i,state:i,get event(){return window.lastFlowEvent||{}},SetState:(t,e)=>r.set(t,e),setState:(t,e)=>r.set(t,e),SetData:(t,e)=>r.SetData(t,e),setData:(t,e)=>r.SetData(t,e),GetData:t=>r.GetData(t),getData:t=>r.GetData(t),Query:t=>r.Query(t),query:t=>r.Query(t),Navigate:t=>r.Navigate(t),navigate:t=>r.Navigate(t),Alert:(t,e)=>r.Alert(t,e),alert:(t,e)=>r.Alert(t,e),Confirm:(t,e)=>r.Confirm(t,e),confirm:(t,e)=>r.Confirm(t,e),Trigger:(t,s)=>{const i=[...e.flowStack||[],n].filter(Boolean);return r.triggerFlow(t,{triggeredBy:"flow",flowStack:i,data:s||{}},t)},get routerBeforeEach(){return r.routerContext?.beforeEach},get routerAfterEach(){return r.routerContext?.afterEach},get router(){return r.routerContext}};let o;try{o=new Function(...Object.keys(a),`"use strict"; return (async () => { ${t} })();`)}catch(e){return console.error("Flow syntax error:",e),void console.error("Problematic code:",t)}await o.apply(a,Object.values(a))}catch(e){console.error("Flow execution error:",e),console.error("Problematic code:",t)}else console.warn("Flow execution skipped: code is not a string");else console.warn("Flow execution skipped: empty code")}setupPathDataListener(t){let e;try{const[n,r]=t.split("#/");if(!r)return;const s=`${window.location.protocol}//${window.location.host}${n}`;e=new URLPattern({baseURL:s,hash:`#/${r}`})}catch(t){return}const n=()=>{const t=window.location.href,n=e.exec(t);let r;if(n&&n.hash&&n.hash.groups)r=n.hash.groups;else{if(!window.location.hash)return void(window.location.hash="#/");r={}}this.set("pathData",r)};n(),window.addEventListener("hashchange",n),window.addEventListener("navigate",(()=>{setTimeout(n,0)}))}register({type:t,attributes:e,body:n}){switch(t){case"x-data":return this.registerDataSource(e,n);case"x-subscribe":return this.registerSubscription(e,n);case"x-flow":return this.registerFlow(e,n);default:return console.warn(`Unknown component type: ${t}`),()=>{}}}async Query(t){const{url:e}=t;if(!e)return"";const n=e.startsWith("/")?e:`/${e}`;try{const t=await fetch(n);return await t.text()}catch(t){return console.error("Error loading page content:",t),`<div style="padding: 20px; color: red;">Error loading content: ${t.message}</div>`}}Navigate(t,e={}){this.routerContext?this.triggerFlow("routerNavigate",{triggeredBy:e.triggeredBy||"Navigate",href:t,element:e.element}):window.location.hash=t}async Alert(t={}){const{message:e="",title:n="Alert",dispose:r=!0}=t,s=l.findExistingModal();if(s){const t=await new Promise((t=>{s.updateAndShow(e,n,"alert",t)}));return r?s.dispose():s.hideContent(),t}const i=await l.alert(e,n),a=l.findExistingModal();return a&&(r?a.dispose():a.hideContent()),i}async Confirm(t={}){const{message:e="",title:n="Confirm",dispose:r=!0}=t,s=l.findExistingModal();if(s){const t=await new Promise((t=>{s.updateAndShow(e,n,"confirm",t)}));return r?s.dispose():s.hideContent(),t}const i=await l.confirm(e,n),a=l.findExistingModal();return a&&(r?a.dispose():a.hideContent()),i}async SetData(t,e){const n=e instanceof Promise?await e:e;t.includes(".")?this.setNested(t,n):this.set(t,n)}setNested(t,e){const n=t.split("."),r=n[0];let s=this.state[r]?JSON.parse(JSON.stringify(this.state[r])):{},i=s;for(let t=1;t<n.length-1;t++)i[n[t]]&&"object"==typeof i[n[t]]||(i[n[t]]={}),i=i[n[t]];i[n[n.length-1]]=e,this.set(r,s)}registerComponentHook(t,e){return this.componentHooks.has(t)||this.componentHooks.set(t,new Set),this.componentHooks.get(t).add(e),()=>{const n=this.componentHooks.get(t);n&&n.delete(e)}}unregisterComponentHook(t,e){const n=this.componentHooks.get(t);n&&n.delete(e)}executeComponentHooks(t,e,...n){const r=this.componentHooks.get(t);r&&r.forEach((r=>{try{r(e,...n)}catch(e){console.error(`Error in ${t} hook:`,e)}}))}clear(){this.state={},this.listeners.clear(),this.dataSources.clear(),this.subscriptions.clear(),this.flows.clear(),this.componentHooks.clear()}getActiveSubscriptions(){const t={};for(const[e,n]of this.listeners.entries())t[e]={count:n.size,listeners:Array.from(n).map((t=>({name:t.name||"anonymous",toString:t.toString()})))};return t}logActiveSubscriptions(){return this.getActiveSubscriptions()}};function u(t,e){c.set(t,e)}const h=u;function d(t,e){return c.SetData(t,e)}function f(t){return c.GetData(t)}function p(t){return c.get(t)}function m(t,e){return c.subscribe(t,e)}function g(t,e){return c.registerComponentHook(t,e)}function b(t){t&&c.Navigate(t)}async function x(t){return await c.Query(t)}async function v(t={}){return await c.Alert(t)}async function $(t={}){return await c.Confirm(t)}async function w(t,e={},n={}){return await c.triggerFlow(t,{triggeredBy:n.triggeredBy||"manual",data:e,flowStack:n.flowStack||[],element:n.element})}"undefined"!=typeof window&&(window.state={...c.getState()},window.subscribeToState=(t,e)=>c.subscribe(t,e),window.getActiveSubscriptions=()=>c.getActiveSubscriptions(),window.logActiveSubscriptions=()=>c.logActiveSubscriptions());class y extends HTMLElement{constructor(){super();let t=this.getAttribute("content");t=t?t.replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&#10;/g,"\n").replace(/&#13;/g,"\r").replace(/&#9;/g,"\t"):this.textContent?this.textContent.trim():"",t&&"string"==typeof t||(t=""),t.includes("undefined")&&t.includes("null")&&t.length<10&&(console.warn("SystemElement: potentially malformed content detected, using empty string"),t=""),this.unregister=function({type:t,attributes:e,body:n}){return c.register({type:t,attributes:e,body:n})}({type:this.tagName.toLowerCase(),attributes:this.getAllAttributes(),body:t})}getAllAttributes(){const t={};for(let e=0;e<this.attributes.length;e++){const n=this.attributes[e];t[n.name]=n.value}return t}disconnectedCallback(){this.unregister&&this.unregister()}}class k extends y{constructor(){super(),this.removeAttribute("defaultValue")}}class S extends y{}class A extends y{}class F extends o{constructor(){super()}connectedCallback(){this.applySxStyles()}}class E extends o{constructor(){super(),this.unsubscribe=null,this.originalContent=this.innerHTML+""}connectedCallback(){super.connectedCallback();const t=this.getAttribute("titleSource")||"activePath";this.unsubscribe=m(t,(()=>{this.updateTitle()})),this.updateTitle()}disconnectedCallback(){this.unsubscribe&&this.unsubscribe()}updateTitle(){const e=this.getAttribute("titleSource")||"activePath",n=this.getAttribute("titleText"),r=p(e)||"";let s=n||"Navigation";if(!n&&r.startsWith("/")){let e=r.substring(1).replace(/\//g,t`<span class="breadcrumb-separator"> > </span>`);e=e.replace(/x-/g,""),s=e.trim().charAt(0).toUpperCase()+e.slice(1)}const i=this.getAttribute("menuButtonShow"),a=this.getAttribute("menuButtonTarget")||"sidebar",o="false"!==i?t`
					<button
						class="navbar-hamburger"
						onclick="document.getElementById('${a}')?.classList?.toggle('open')"
						aria-label="Toggle menu"
					>
						<span class="hamburger-line"></span>
						<span class="hamburger-line"></span>
						<span class="hamburger-line"></span>
					</button>
			  `:"",l=n?t`<div class="navbar-title">${s}</div>`:t`<x-breadcrumb pathSource="${e}"></x-breadcrumb>`;this.innerHTML=t`
			<div class="navbar-header">
				<div class="navbar-left">${o} ${l}</div>
				<div class="navbar-right">
					${this.originalContent?`<div class="navbar-actions">${this.originalContent}</div>`:""}
				</div>
			</div>
		`}}class _ extends o{constructor(){super()}connectedCallback(){super.connectedCallback()}}class C extends o{constructor(){super()}}class O extends o{constructor(){super(),this.unsubscribe=null}connectedCallback(){super.connectedCallback();const t=this.getAttribute("pathSource")||"activePath";this.unsubscribe=m(t,(()=>{this.render()})),this.render()}disconnectedCallback(){this.unsubscribe&&this.unsubscribe()}render(){const e=p(this.getAttribute("pathSource")||"activePath")||"";if(!e||!e.startsWith("/"))return void(this.innerHTML="");const n=e.split("/").filter((t=>t.length>0)),r=[];let s="";n.forEach(((t,e)=>{s+="/"+t;const i=e===n.length-1;let a=t.replace(/x-/g,"");a=a.charAt(0).toUpperCase()+a.slice(1),r.push({label:a,path:s,isActive:i})}));const i=[];r.forEach(((e,n)=>{e.isActive?i.push(t`
					<span class="breadcrumb-item breadcrumb-current">${e.label}</span>
				`):i.push(t`
					<x-link href="${e.path}" class="breadcrumb-item breadcrumb-link"
						>${e.label}</x-link
					>
				`),n<r.length-1&&i.push(t`
					<span class="breadcrumb-separator">></span>
				`)})),this.innerHTML=t`
			<nav
				class="breadcrumb-container"
				role="navigation"
				aria-label="Breadcrumb"
			>
				${i.join("")}
			</nav>
		`}}class P extends o{constructor(){super()}static get observedAttributes(){return["disabled"]}attributeChangedCallback(t,e,n){if("disabled"===t){const t=this.querySelector("button");t&&(t.disabled=null!==n)}}connectedCallback(){super.connectedCallback();const t=this.getAttribute("label"),e=this.getAttribute("href"),n=this.getAttribute("handler"),r=this.getAttribute("icon"),s=this.getAttribute("iconPosition")||"left",i=this.getAttribute("variant")||"primary",a=this.getAttribute("size")||"medium",o=this.hasAttribute("disabled"),l=this.hasAttribute("loading"),u=this.hasAttribute("fullWidth"),h=this.getTextContentExcludingIcons(),p=t||h;let d=null;if(r&&!l){d=document.createElement("span");const t=r.startsWith("fa-")?`fa ${r}`:`fa fa-${this.convertToFontAwesome(r)}`;d.className=`${t} button-icon`}let f,g=null;l&&(g=document.createElement("span"),g.className="fa fa-refresh fa-spin button-icon"),f=document.createElement("button"),f.className=`x-button x-button-${i} x-button-${a}`,u&&f.classList.add("x-button-fullwidth"),r&&!p&&f.classList.add("x-button-icon-only"),(o||l)&&(f.disabled=!0),!e||o||l||f.addEventListener("click",(async t=>{t.preventDefault(),b(e)})),!n||o||l||f.addEventListener("click",(async t=>{t.preventDefault(),await c.triggerFlow(n,{triggeredBy:"button",element:this},n)})),l?(f.appendChild(g),f.appendChild(document.createTextNode("Loading..."))):r&&"left"===s?(f.appendChild(d),p&&f.appendChild(document.createTextNode(p))):r&&"right"===s?(p&&f.appendChild(document.createTextNode(p)),f.appendChild(d)):r&&!p?f.appendChild(d):f.textContent=p,this.innerHTML="",this.appendChild(f),this.copyAttributesToInnerButton()}copyAttributesToInnerButton(){const t=this.querySelector("button, x-link");if(!t)return;const e=this.getAttribute("href");e&&t.setAttribute("href",e);for(let e=0;e<this.style.length;e++){const n=this.style[e],r=this.style.getPropertyValue(n);t.style.setProperty(n,r)}}getTextContentExcludingIcons(){const t=this.cloneNode(!0);return t.querySelectorAll("x-icon").forEach((t=>t.remove())),t.textContent.trim()}convertToFontAwesome(t){return t?{Home:"home",ListAlt:"list-alt",MenuBook:"book",DriveFolderUpload:"upload",AccountTree:"cog",Save:"save",Add:"plus",ArrowForward:"arrow-right",ArrowBack:"arrow-left",Edit:"edit",Delete:"trash-o",Close:"times",Search:"search",Filter:"filter",MoreVert:"ellipsis-v",MoreHoriz:"ellipsis-h",Info:"info-circle",Warning:"exclamation-triangle",Error:"exclamation-circle",Success:"check-circle",Loading:"refresh",People:"users",Person:"user",LineChart:"line-chart",History:"history"}[t]||t.replace(/([A-Z])/g,"_$1").toLowerCase().replace(/^_/,""):"help"}}class z extends o{constructor(){super()}connectedCallback(){super.connectedCallback();const t=this.getAttribute("sx:contents");t&&(this.textContent=t);const e=this.getAttribute("display");if(e)this.style.display=e;else{const t=this.getAttribute("variant");this.style.display="strong"===t?"inline":"block"}}}class T extends HTMLElement{constructor(){super()}connectedCallback(){const t=this.getAttribute("href"),e=this.getAttribute("underline"),n=document.createElement("a");if(t){const e=t.startsWith("#")?t:`#${t}`;n.href=window.location.pathname+window.location.search+e}else n.href="#";n.innerHTML=this.innerHTML,"none"===e&&(n.style.textDecoration="none"),n.addEventListener("click",(async e=>{e.preventDefault(),b(t)})),this.innerHTML="",this.appendChild(n)}}class D extends o{constructor(){super(),D.instanceCount||(D.instanceCount=0),D.instanceCount++,this.instanceId=D.instanceCount}connectedCallback(){const t=this.getAttribute("items");this.hasAttribute("data-processed")||(this.setAttribute("data-processed","true"),this.template=this.getTemplate(),this.innerHTML="",super.connectedCallback(),this.processData(t))}disconnectedCallback(){this.selectionMode&&this.removeEventListener("click",this.handleSelectionClick),super.disconnectedCallback()}getTemplate(){const t=this.getAttribute("content");if(t)return t;const e=this.querySelector("template");return e?e.innerHTML:""}handleStateChange(t){if(super.handleStateChange(t),!this.template){const t=this.getTemplate();t&&(this.template=t)}if(this.selectedPath&&this.selectionMode){const e=t[this.selectedPath.startsWith("global_")?this.selectedPath.substring(7):this.selectedPath];this.querySelectorAll("div[data-index]").forEach((t=>{const n=parseInt(t.dataset.index,10);e===n?t.classList.add("is-selected"):t.classList.remove("is-selected")}))}const e=this.getAttribute("items");e&&this.processData(e)}processData(t){if(!t)return void console.warn(`x-map #${this.instanceId}: no items attribute provided`);let e=t;t.startsWith("global_")&&(e=t.substring(7));const n=p(e);if(!n)return void console.warn(`x-map #${this.instanceId}: data not found for path: ${t} (tried: ${e})`);if(!Array.isArray(n))return void console.warn(`x-map #${this.instanceId}: data is not an array: ${t}`);this.innerHTML="";const r=this.getAttribute("selectMode"),s=this.getAttribute("selected"),i=this.getAttribute("onSelect");this.selectionMode=r,this.selectedPath=s,this.onSelectHandler=i,r&&this.addEventListener("click",this.handleSelectionClick),n.forEach(((t,e)=>{const n=this.processTemplate(this.template,t,e),i=document.createElement("div");if(i.innerHTML=n,r){const n=document.createElement("div");for(n.dataset.index=e,s?p(s.startsWith("global_")?s.substring(7):s)===e&&n.classList.add("is-selected"):t.isSelected&&n.classList.add("is-selected");i.firstChild;)n.appendChild(i.firstChild);this.appendChild(n)}else for(;i.firstChild;)this.appendChild(i.firstChild)})),this.style.removeProperty("display")}processTemplate(t,e,r){let s=t.includes("&lt;")||t.includes("&gt;")||t.includes("&quot;")?n(t):t;return s=s.replace(/\{\{\s*item_([^}]+)\s*\}\}/g,((t,n)=>{const r=n.trim();return e[r]||""})),s=s.replace(/\{\{\s*item\s*\}\}/g,(()=>null==e?"":"object"==typeof e?JSON.stringify(e).replace(/"/g,"&quot;"):String(e))),s=s.replace(/\{\{index\}\}/g,r+1),s=s.replace(/\{\{#if\s+([^}]+)\}\}([\s\S]*?)\{\{\/if\}\}/g,((t,n,r)=>this.evaluateCondition(n.trim(),e)?r:"")),s=s.replace(/\{\{#each\s+([^}]+)\}\}([\s\S]*?)\{\{\/each\}\}/g,((t,n,r)=>{const s=n.trim();let i;if(s.startsWith("item_")){const t=s.substring(5);i=e[t]}else i=e[s];return Array.isArray(i)?i.map(((t,e)=>{let n=r.replace(/\{\{\s*this\s*\}\}/g,t);return this.processTemplate(n,t,e)})).join(""):""})),s=s.replace(/class="WHEN\s+(.+?)\s+IS\s+(.+?)\s+THEN\s+(.+?)\s+ELSE\s+(.+?)"/g,((t,e,n,r,s)=>{const i=this.initialState||{},a=(e.trim().startsWith("global_")?i[e.trim().substring(7)]:e.trim())===n.trim(),o=r.replace(/^['"]|['"]$/g,""),l=s.replace(/^['"]|['"]$/g,"");return`class="${a?o:l}"`})),s}evaluateCondition(t,e){if(t.startsWith("item_")){const n=e[t.substring(5)];return Array.isArray(n)?n.length>0:!!n}const n=e[t];return Array.isArray(n)?n.length>0:!!n}handleSelectionClick=t=>{const e=t.target.closest("div[data-index]");if(!e)return;const n=parseInt(e.dataset.index,10);"single"===this.selectionMode?(this.querySelectorAll("div[data-index]").forEach((t=>{t.classList.remove("is-selected")})),e.classList.add("is-selected")):e.classList.toggle("is-selected"),this.onSelectHandler&&w(this.onSelectHandler,{index:n},{triggeredBy:"x-map",element:e})}}class M extends o{constructor(){super()}connectedCallback(){super.connectedCallback();const t=this.getAttribute("icon")||this.getAttribute("name"),e=this.getAttribute("color")||this.getAttribute("sx:color"),n=this.getAttribute("size")||"medium";if(this.closest("x-button"))this.style.display="none";else{const r=document.createElement("span"),s=t.startsWith("fa-")?`fa ${t}`:`fa fa-${this.convertToFontAwesome(t)}`,i=this.getFontAwesomeSizeClass(n);r.className=`${s} ${i}`,r.style.display="inline-block",r.style.verticalAlign="middle",e&&(r.style.color=e),this.innerHTML="",this.appendChild(r)}}getFontAwesomeSizeClass(t){return{"2x":"fa-2x","3x":"fa-3x","4x":"fa-4x","5x":"fa-5x"}[t]||""}convertToFontAwesome(t){return t?{Home:"home",ListAlt:"list-alt",MenuBook:"book",DriveFolderUpload:"upload",AccountTree:"cog",Save:"save",Add:"plus",ArrowForward:"arrow-right",ArrowBack:"arrow-left",Edit:"edit",Delete:"trash-o",Close:"times",Search:"search",Filter:"filter",MoreVert:"ellipsis-v",MoreHoriz:"ellipsis-h",Info:"info-circle",Warning:"exclamation-triangle",Error:"exclamation-circle",Success:"check-circle",CheckCircle:"check-circle",Loading:"refresh",People:"users",Person:"user",LineChart:"line-chart",History:"history",Construction:"wrench",Settings:"cog",Menu:"bars",Cancel:"times"}[t]||t.replace(/([A-Z])/g,"_$1").toLowerCase().replace(/^_/,""):"help"}}class j extends o{constructor(){super(),this.unsubscribe=null}connectedCallback(){super.connectedCallback();const t=this.getAttribute("contents"),e="false"!==this.getAttribute("showLoading");if(!t)return void console.warn("x-fragment: no contents attribute provided");const n=t.startsWith("global_")?t.substring(7):t;this.unsubscribe=m(n,(t=>{this.updateContent(t.newValue,e)}));const r=p(n);this.updateContent(r,e)}updateContent(e,n){const r=this.className;if(null!=e&&""!==e)if("string"==typeof e)try{const t=a(e);this.innerHTML=`<div class="${r}">${t}</div>`}catch(t){console.error("Error processing fragment content:",t),this.innerHTML=`<div class="${r}" style="padding: 20px; color: red;">Error processing content</div>`}else try{this.innerHTML=t`<pre class="${r}">
${JSON.stringify(e,null,2)}</pre
				>`}catch(t){console.error("Error stringifying fragment content:",t),this.innerHTML=`<div class="${r}" style="padding: 20px; color: red;">Error displaying content</div>`}else this.innerHTML=n?t`
					<div
						class="fragment-loading-spinner ${r}"
						style="display: flex; align-items: center; justify-content: center; height: 100%;"
					>
						<div
							style="width: 40px; height: 40px; border: 3px solid #f3f3f3; border-top: 3px solid #3498db; border-radius: 50%; animation: spin 1s linear infinite;"
						></div>
					</div>
				`:`<div class="fragment-no-loading-spinner ${r}"></div>`}disconnectedCallback(){this.unsubscribe&&this.unsubscribe()}}class N extends o{constructor(){super(),N.instanceCount||(N.instanceCount=0),N.instanceCount++,this.instanceId=N.instanceCount}resolvePath(t,e){return t.startsWith("http://")||t.startsWith("https://")||t.startsWith("/")?t:e.substring(0,e.lastIndexOf("/")+1)+t}getCurrentPagePath(){const t=p("currentPath");if(t)return t;const e=new URL(window.location.href).pathname;return e.endsWith(".html"),e.includes("fragments/")?e.substring(e.indexOf("fragments/")):"fragments/"}async connectedCallback(){const e=this.getAttribute("href");if(e)try{const t=this.getCurrentPagePath(),n=this.resolvePath(e,t),r=await fetch(n);if(!r.ok)throw new Error(`Failed to load include: ${r.status} ${r.statusText}`);const s=a(await r.text());this.innerHTML=s,this.applySxStyles()}catch(e){console.error("Error loading include:",e),this.innerHTML=t`<div style="padding: 20px; color: red;">
				Error loading include: ${e.message}
			</div>`}else console.warn("x-include: no href attribute provided")}}class q extends o{constructor(){super()}connectedCallback(){super.connectedCallback();const t=this.getAttribute("data");if(!t)return void console.warn("x-viz-bar: no data attribute provided");const e=p(t.startsWith("global_")?t.substring(7):t);this.updateChart(e)}onStateChange(t){const e=this.getAttribute("data");if(e){const t=p(e.startsWith("global_")?e.substring(7):e);this.updateChart(t)}}updateChart(t){if(!t||!Array.isArray(t))return void(this.innerHTML='<div class="viz-error">No data available</div>');const e=this.style.color||"var(--palettePrimaryMain)";this.style.setProperty("--bar-base-color",e);const n=Math.max(...t.map((t=>t.value||0)));let r="";t.forEach(((t,e)=>{const s=t.value/n*100;r+=`\n\t\t\t\t<div class="viz-bar-container">\n\t\t\t\t\t<div \n\t\t\t\t\t\tclass="viz-bar ${e%2==0?"viz-bar-even":"viz-bar-odd"}" \n\t\t\t\t\t\tstyle="height: ${s}%;"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class="viz-value">\n\t\t\t\t\t\t\t<x-typography variant="caption">${t.value}</x-typography>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="viz-label">\n\t\t\t\t\t\t<x-typography variant="caption">${t.label||""}</x-typography>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`})),this.innerHTML=`\n\t\t\t<div class="viz-wrapper">\n\t\t\t\t<div class="viz-chart">\n\t\t\t\t\t${r}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`}}class R extends o{constructor(){super()}connectedCallback(){super.connectedCallback();const t=this.getAttribute("data");if(!t)return void console.warn("x-viz-pie: no data attribute provided");const e=p(t.startsWith("global_")?t.substring(7):t);this.updateChart(e)}onStateChange(t){const e=this.getAttribute("data");if(e){const t=p(e.startsWith("global_")?e.substring(7):e);this.updateChart(t)}}updateChart(t){if(!t||!Array.isArray(t))return void(this.innerHTML='<div class="viz-error">No data available</div>');const e=t.reduce(((t,e)=>t+(e.value||0)),0);if(0===e)return void(this.innerHTML='<div class="viz-error">No data to display</div>');const n=this.style.color||"var(--palettePrimaryMain)";this.style.setProperty("--pie-base-color",n);const r="donut"===this.getAttribute("variant"),s=r?60:0,i=100,a=100;let o=0,l="",c="";t.forEach(((t,n)=>{const u=t.value/e*100,h=t.value/e*360,p=o+h,d=i+98*Math.cos((o-90)*Math.PI/180),f=a+98*Math.sin((o-90)*Math.PI/180),g=i+98*Math.cos((p-90)*Math.PI/180),m=a+98*Math.sin((p-90)*Math.PI/180),b=h>180?1:0;let x;if(r){const t=i+s*Math.cos((o-90)*Math.PI/180),e=a+s*Math.sin((o-90)*Math.PI/180);x=[`M ${d} ${f}`,`A 98 98 0 ${b} 1 ${g} ${m}`,`L ${i+s*Math.cos((p-90)*Math.PI/180)} ${a+s*Math.sin((p-90)*Math.PI/180)}`,`A ${s} ${s} 0 ${b} 0 ${t} ${e}`,"Z"].join(" ")}else x=["M 100 100",`L ${d} ${f}`,`A 98 98 0 ${b} 1 ${g} ${m}`,"Z"].join(" ");l+=`\n\t\t\t\t<path \n\t\t\t\t\td="${x}" \n\t\t\t\t\tclass="viz-slice"\n\t\t\t\t\tdata-index="${n}"\n\t\t\t\t/>\n\t\t\t`,c+=`\n\t\t\t\t<div class="viz-legend-item">\n\t\t\t\t\t<span class="viz-legend-color" data-index="${n}"></span>\n\t\t\t\t\t<span class="viz-legend-label">${t.label||""}</span>\n\t\t\t\t\t<span class="viz-legend-value">${u.toFixed(1)}%</span>\n\t\t\t\t</div>\n\t\t\t`,o=p})),this.innerHTML=`\n\t\t\t<div class="viz-pie-container">\n\t\t\t\t<svg viewBox="0 0 200 200" class="viz-svg">\n\t\t\t\t\t${l}\n\t\t\t\t</svg>\n\t\t\t\t<div class="viz-legend">\n\t\t\t\t\t${c}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`}}class L extends o{constructor(){super(),this.original=Array.from(this.attributes).reduce(((t,e)=>(t[e.name]=e.value,t)),{})}connectedCallback(){super.connectedCallback();const t=this.getAttribute("data");if(!t)return void console.warn("x-viz-line: no data attribute provided");const e=p(t.startsWith("global_")?t.substring(7):t);this.updateChart(e)}onStateChange(t){const e=this.getAttribute("data");if(e){const t=p(e.startsWith("global_")?e.substring(7):e);this.updateChart(t)}}updateChart(e){if(!e||!Array.isArray(e))return void(this.innerHTML='<div class="viz-error">No data available</div>');const n=this.style.color||"var(--palettePrimaryMain)";this.style.setProperty("--line-base-color",n);const r=Math.max(...e.map((t=>t.value||0))),s=Math.min(...e.map((t=>t.value||0))),i=r-s,a=r+.02*i,o=s-.02*i,l=(a-o)/4,c=Math.pow(10,Math.floor(Math.log10(l))),u=l/c;let h;h=u<=1?1:u<=2?2:u<=5?5:10;const p=h*c,d=o,f=a,g=f-d;let m="";const b=Math.ceil(d/p)*p,x=Math.floor(f/p)*p;for(let t=b;t<=x;t+=p){const e=170-(t-d)/g*150;m+=`\n\t\t\t\t<text \n\t\t\t\t\tx="45" \n\t\t\t\t\ty="${e+4}" \n\t\t\t\t\tclass="viz-y-axis-text"\n\t\t\t\t\ttext-anchor="end"\n\t\t\t\t>\n\t\t\t\t\t${Math.round(t)}\n\t\t\t\t</text>\n\t\t\t\t<line \n\t\t\t\t\tx1="50" \n\t\t\t\t\ty1="${e}" \n\t\t\t\t\tx2="55" \n\t\t\t\t\ty2="${e}" \n\t\t\t\t\tclass="viz-y-axis-tick"\n\t\t\t\t/>\n\t\t\t`}const y=e.map(((t,n)=>({x:65+n/(e.length-1)*315,y:170-(t.value-d)/g*150,value:t.value,label:t.label}))),k="smooth"===this.getAttribute("variant"),v=this.hasAttribute("fill");let w;w=k?this.createSmoothPath(y):y.map(((t,e)=>`${0===e?"M":"L"} ${t.x} ${t.y}`)).join(" ");let $="";v&&($=`<path d="${w+` L ${y[y.length-1].x} 170 L ${y[0].x} 170 Z`}" class="viz-area" />`);let S="",A="";y.forEach(((t,e)=>{S+=`\n\t\t\t\t<g class="viz-point-group" data-index="${e}">\n\t\t\t\t\t<circle \n\t\t\t\t\t\tcx="${t.x}" \n\t\t\t\t\t\tcy="${t.y}" \n\t\t\t\t\t\tr="4" \n\t\t\t\t\t\tclass="viz-point"\n\t\t\t\t\t/>\n\t\t\t\t\t<text \n\t\t\t\t\t\tx="${t.x}" \n\t\t\t\t\t\ty="${t.y-10}" \n\t\t\t\t\t\tclass="viz-value-text"\n\t\t\t\t\t\ttext-anchor="middle"\n\t\t\t\t\t>\n\t\t\t\t\t\t${t.value}\n\t\t\t\t\t</text>\n\t\t\t\t</g>\n\t\t\t`,A+=`\n\t\t\t\t<text \n\t\t\t\t\tx="${t.x}" \n\t\t\t\t\ty="190" \n\t\t\t\t\tclass="viz-label-text"\n\t\t\t\t\ttext-anchor="middle"\n\t\t\t\t>\n\t\t\t\t\t${t.label}\n\t\t\t\t</text>\n\t\t\t`})),this.innerHTML=t`
			<div class="viz-line-container">
				<svg viewBox="0 0 ${400} ${200}" class="viz-svg">
					<!-- Grid lines (optional) -->
					<defs>
						<pattern
							id="grid"
							width="40"
							height="20"
							patternUnits="userSpaceOnUse"
						>
							<path
								d="M 40 0 L 0 0 0 20"
								fill="none"
								stroke="var(--paletteDivider, #e0e0e0)"
								stroke-width="0.5"
								opacity="0.3"
							/>
						</pattern>
					</defs>
					<rect width="100%" height="100%" fill="url(#grid)" />

					<!-- Y-axis -->
					${m}

					<!-- Area fill (if enabled) -->
					${$}

					<!-- Line path -->
					<path
						d="${w}"
						class="viz-line"
						fill="none"
						stroke="var(--line-base-color)"
						stroke-width="2"
						stroke-linecap="round"
						stroke-linejoin="round"
					/>

					<!-- Bottom labels -->
					${A}

					<!-- Data points with hover values -->
					${S}
				</svg>
			</div>
		`}createSmoothPath(t){if(0===t.length)return"";if(1===t.length)return`M ${t[0].x} ${t[0].y}`;if(2===t.length)return`M ${t[0].x} ${t[0].y} L ${t[1].x} ${t[1].y}`;let e=`M ${t[0].x} ${t[0].y}`;const n=[{x:t[0].x-(t[1].x-t[0].x),y:t[0].y-(t[1].y-t[0].y)},...t,{x:t[t.length-1].x+(t[t.length-1].x-t[t.length-2].x),y:t[t.length-1].y+(t[t.length-1].y-t[t.length-2].y)}];for(let r=1;r<t.length;r++){const t=n[r-1],s=n[r],i=n[r+1],a=n[r+2];e+=` C ${s.x+(i.x-t.x)/6} ${s.y+(i.y-t.y)/6}, ${i.x-(a.x-s.x)/6} ${i.y-(a.y-s.y)/6}, ${i.x} ${i.y}`}return e}}function Z(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var B={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function I(t){B=t}var H={exec:()=>null};function V(t,e=""){let n="string"==typeof t?t:t.source,r={replace:(t,e)=>{let s="string"==typeof e?e:e.source;return s=s.replace(U.caret,"$1"),n=n.replace(t,s),r},getRegex:()=>new RegExp(n,e)};return r}var U={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[\t ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},J=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,W=/(?:[*+-]|\d{1,9}[.)])/,G=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,K=V(G).replace(/bull/g,W).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Q=V(G).replace(/bull/g,W).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),X=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Y=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,tt=V(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Y).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),et=V(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,W).getRegex(),nt="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",st=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,it=V("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$))","i").replace("comment",st).replace("tag",nt).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),rt=V(X).replace("hr",J).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",nt).getRegex(),at={blockquote:V(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",rt).getRegex(),code:/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,def:tt,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:J,html:it,lheading:K,list:et,newline:/^(?:[ \t]*(?:\n|$))+/,paragraph:rt,table:H,text:/^[^\n]+/},ot=V("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",J).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}\t)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",nt).getRegex(),lt={...at,lheading:Q,table:ot,paragraph:V(X).replace("hr",J).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",ot).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",nt).getRegex()},ct={...at,html:V("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",st).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:H,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:V(X).replace("hr",J).replace("heading"," *#{1,6} *[^\n]").replace("lheading",K).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},ut=/^( {2,}|\\)\n(?!\s*$)/,ht=/[\p{P}\p{S}]/u,dt=/[\s\p{P}\p{S}]/u,ft=/[^\s\p{P}\p{S}]/u,pt=V(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,dt).getRegex(),mt=/(?!~)[\p{P}\p{S}]/u,gt=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,bt=V(gt,"u").replace(/punct/g,ht).getRegex(),xt=V(gt,"u").replace(/punct/g,mt).getRegex(),vt="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",$t=V(vt,"gu").replace(/notPunctSpace/g,ft).replace(/punctSpace/g,dt).replace(/punct/g,ht).getRegex(),wt=V(vt,"gu").replace(/notPunctSpace/g,/(?:[^\s\p{P}\p{S}]|~)/u).replace(/punctSpace/g,/(?!~)[\s\p{P}\p{S}]/u).replace(/punct/g,mt).getRegex(),yt=V("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,ft).replace(/punctSpace/g,dt).replace(/punct/g,ht).getRegex(),kt=V(/\\(punct)/,"gu").replace(/punct/g,ht).getRegex(),St=V(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),At=V(st).replace("(?:--\x3e|$)","--\x3e").getRegex(),Ft=V("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",At).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Et=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`[^`]*`|[^\[\]\\`])*?/,_t=V(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Et).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Ct=V(/^!?\[(label)\]\[(ref)\]/).replace("label",Et).replace("ref",Y).getRegex(),Ot=V(/^!?\[(ref)\](?:\[\])?/).replace("ref",Y).getRegex(),Pt={t:H,anyPunctuation:kt,autolink:St,blockSkip:/\[[^\[\]]*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)|`[^`]*?`|<(?! )[^<>]*?>/g,br:ut,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:H,emStrongLDelim:bt,emStrongRDelimAst:$t,emStrongRDelimUnd:yt,escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,link:_t,nolink:Ot,punctuation:pt,reflink:Ct,reflinkSearch:V("reflink|nolink(?!\\()","g").replace("reflink",Ct).replace("nolink",Ot).getRegex(),tag:Ft,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:H},zt={...Pt,link:V(/^!?\[(label)\]\((.*?)\)/).replace("label",Et).getRegex(),reflink:V(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Et).getRegex()},Tt={...Pt,emStrongRDelimAst:wt,emStrongLDelim:xt,url:V(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),t:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Dt={...Tt,br:V(ut).replace("{2,}","*").getRegex(),text:V(Tt.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Mt={normal:at,gfm:lt,pedantic:ct},jt={normal:Pt,gfm:Tt,breaks:Dt,pedantic:zt},Nt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},qt=t=>Nt[t];function Rt(t,e){if(e){if(U.escapeTest.test(t))return t.replace(U.escapeReplace,qt)}else if(U.escapeTestNoEncode.test(t))return t.replace(U.escapeReplaceNoEncode,qt);return t}function Lt(t){try{t=encodeURI(t).replace(U.percentDecode,"%")}catch{return null}return t}function Zt(t,e){let n=t.replace(U.findPipe,((t,e,n)=>{let r=!1,s=e;for(;--s>=0&&"\\"===n[s];)r=!r;return r?"|":" |"})).split(U.splitPipe),r=0;if(n[0].trim()||n.shift(),n.length>0&&!n.at(-1)?.trim()&&n.pop(),e)if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(U.slashPipe,"|");return n}function Bt(t,e,n){let r=t.length;if(0===r)return"";let s=0;for(;s<r&&t.charAt(r-s-1)===e;)s++;return t.slice(0,r-s)}function It(t,e,n,r,s){let i=e.href,a=e.title||null,o=t[1].replace(s.other.outputLinkReplace,"$1");r.state.inLink=!0;let l={type:"!"===t[0].charAt(0)?"image":"link",raw:n,href:i,title:a,text:o,tokens:r.inlineTokens(o)};return r.state.inLink=!1,l}var Ht=class{options;rules;lexer;constructor(t){this.options=t||B}space(t){let e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){let e=this.rules.block.code.exec(t);if(e){let t=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:Bt(t,"\n")}}}fences(t){let e=this.rules.block.fences.exec(t);if(e){let t=e[0],n=function(t,e,n){let r=t.match(n.other.indentCodeCompensation);if(null===r)return e;let s=r[1];return e.split("\n").map((t=>{let e=t.match(n.other.beginningSpace);if(null===e)return t;let[r]=e;return r.length>=s.length?t.slice(s.length):t})).join("\n")}(t,e[3]||"",this.rules);return{type:"code",raw:t,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:n}}}heading(t){let e=this.rules.block.heading.exec(t);if(e){let t=e[2].trim();if(this.rules.other.endingHash.test(t)){let e=Bt(t,"#");(this.options.pedantic||!e||this.rules.other.endingSpaceChar.test(e))&&(t=e.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(t){let e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:Bt(e[0],"\n")}}blockquote(t){let e=this.rules.block.blockquote.exec(t);if(e){let t=Bt(e[0],"\n").split("\n"),n="",r="",s=[];for(;t.length>0;){let e,i=!1,a=[];for(e=0;e<t.length;e++)if(this.rules.other.blockquoteStart.test(t[e]))a.push(t[e]),i=!0;else{if(i)break;a.push(t[e])}t=t.slice(e);let o=a.join("\n"),l=o.replace(this.rules.other.blockquoteSetextReplace,"\n    $1").replace(this.rules.other.blockquoteSetextReplace2,"");n=n?`${n}\n${o}`:o,r=r?`${r}\n${l}`:l;let c=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(l,s,!0),this.lexer.state.top=c,0===t.length)break;let u=s.at(-1);if("code"===u?.type)break;if("blockquote"===u?.type){let e=u,i=e.raw+"\n"+t.join("\n"),a=this.blockquote(i);s[s.length-1]=a,n=n.substring(0,n.length-e.raw.length)+a.raw,r=r.substring(0,r.length-e.text.length)+a.text;break}if("list"!==u?.type);else{let e=u,i=e.raw+"\n"+t.join("\n"),a=this.list(i);s[s.length-1]=a,n=n.substring(0,n.length-u.raw.length)+a.raw,r=r.substring(0,r.length-e.raw.length)+a.raw,t=i.substring(s.at(-1).raw.length).split("\n")}}return{type:"blockquote",raw:n,tokens:s,text:r}}}list(t){let e=this.rules.block.list.exec(t);if(e){let n=e[1].trim(),r=n.length>1,s={type:"list",raw:"",ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]};n=r?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=r?n:"[*+-]");let i=this.rules.other.listItemRegex(n),a=!1;for(;t;){let n=!1,r="",o="";if(!(e=i.exec(t))||this.rules.block.hr.test(t))break;r=e[0],t=t.substring(r.length);let l=e[2].split("\n",1)[0].replace(this.rules.other.listReplaceTabs,(t=>" ".repeat(3*t.length))),c=t.split("\n",1)[0],u=!l.trim(),h=0;if(this.options.pedantic?(h=2,o=l.trimStart()):u?h=e[1].length+1:(h=e[2].search(this.rules.other.nonSpaceChar),h=h>4?1:h,o=l.slice(h),h+=e[1].length),u&&this.rules.other.blankLine.test(c)&&(r+=c+"\n",t=t.substring(c.length+1),n=!0),!n){let e=this.rules.other.nextBulletRegex(h),n=this.rules.other.hrRegex(h),s=this.rules.other.fencesBeginRegex(h),i=this.rules.other.headingBeginRegex(h),a=this.rules.other.htmlBeginRegex(h);for(;t;){let p,d=t.split("\n",1)[0];if(c=d,this.options.pedantic?(c=c.replace(this.rules.other.listReplaceNesting,"  "),p=c):p=c.replace(this.rules.other.tabCharGlobal,"    "),s.test(c)||i.test(c)||a.test(c)||e.test(c)||n.test(c))break;if(p.search(this.rules.other.nonSpaceChar)>=h||!c.trim())o+="\n"+p.slice(h);else{if(u||l.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||s.test(l)||i.test(l)||n.test(l))break;o+="\n"+c}!u&&!c.trim()&&(u=!0),r+=d+"\n",t=t.substring(d.length+1),l=p.slice(h)}}s.loose||(a?s.loose=!0:this.rules.other.doubleBlankLine.test(r)&&(a=!0));let p,d=null;this.options.gfm&&(d=this.rules.other.listIsTask.exec(o),d&&(p="[ ] "!==d[0],o=o.replace(this.rules.other.listReplaceTask,""))),s.items.push({type:"list_item",raw:r,task:!!d,checked:p,loose:!1,text:o,tokens:[]}),s.raw+=r}let o=s.items.at(-1);if(!o)return;o.raw=o.raw.trimEnd(),o.text=o.text.trimEnd(),s.raw=s.raw.trimEnd();for(let t=0;t<s.items.length;t++)if(this.lexer.state.top=!1,s.items[t].tokens=this.lexer.blockTokens(s.items[t].text,[]),!s.loose){let e=s.items[t].tokens.filter((t=>"space"===t.type)),n=e.length>0&&e.some((t=>this.rules.other.anyLine.test(t.raw)));s.loose=n}if(s.loose)for(let t=0;t<s.items.length;t++)s.items[t].loose=!0;return s}}html(t){let e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:"pre"===e[1]||"script"===e[1]||"style"===e[1],text:e[0]}}def(t){let e=this.rules.block.def.exec(t);if(e){let t=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),n=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:t,raw:e[0],href:n,title:r}}}table(t){let e=this.rules.block.table.exec(t);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let n=Zt(e[1]),r=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),s=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split("\n"):[],i={type:"table",raw:e[0],header:[],align:[],rows:[]};if(n.length===r.length){for(let t of r)this.rules.other.tableAlignRight.test(t)?i.align.push("right"):this.rules.other.tableAlignCenter.test(t)?i.align.push("center"):this.rules.other.tableAlignLeft.test(t)?i.align.push("left"):i.align.push(null);for(let t=0;t<n.length;t++)i.header.push({text:n[t],tokens:this.lexer.inline(n[t]),header:!0,align:i.align[t]});for(let t of s)i.rows.push(Zt(t,i.header.length).map(((t,e)=>({text:t,tokens:this.lexer.inline(t),header:!1,align:i.align[e]}))));return i}}lheading(t){let e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:"="===e[2].charAt(0)?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){let e=this.rules.block.paragraph.exec(t);if(e){let t="\n"===e[1].charAt(e[1].length-1)?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:t,tokens:this.lexer.inline(t)}}}text(t){let e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){let e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(t){let e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){let e=this.rules.inline.link.exec(t);if(e){let t=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(t)){if(!this.rules.other.endAngleBracket.test(t))return;let e=Bt(t.slice(0,-1),"\\");if((t.length-e.length)%2==0)return}else{let t=function(t,e){if(-1===t.indexOf(e[1]))return-1;let n=0;for(let r=0;r<t.length;r++)if("\\"===t[r])r++;else if(t[r]===e[0])n++;else if(t[r]===e[1]&&(n--,n<0))return r;return n>0?-2:-1}(e[2],"()");if(-2===t)return;if(t>-1){let n=(0===e[0].indexOf("!")?5:4)+e[1].length+t;e[2]=e[2].substring(0,t),e[0]=e[0].substring(0,n).trim(),e[3]=""}}let n=e[2],r="";if(this.options.pedantic){let t=this.rules.other.pedanticHrefTitle.exec(n);t&&(n=t[1],r=t[3])}else r=e[3]?e[3].slice(1,-1):"";return n=n.trim(),this.rules.other.startAngleBracket.test(n)&&(n=this.options.pedantic&&!this.rules.other.endAngleBracket.test(t)?n.slice(1):n.slice(1,-1)),It(e,{href:n&&n.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(t,e){let n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){let t=e[(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," ").toLowerCase()];if(!t){let t=n[0].charAt(0);return{type:"text",raw:t,text:t}}return It(n,t,n[0],this.lexer,this.rules)}}emStrong(t,e,n=""){let r=this.rules.inline.emStrongLDelim.exec(t);if(!(!r||r[3]&&n.match(this.rules.other.unicodeAlphaNumeric))&&(!r[1]&&!r[2]||!n||this.rules.inline.punctuation.exec(n))){let n,s,i=[...r[0]].length-1,a=i,o=0,l="*"===r[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(l.lastIndex=0,e=e.slice(-1*t.length+i);null!=(r=l.exec(e));){if(n=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!n)continue;if(s=[...n].length,r[3]||r[4]){a+=s;continue}if((r[5]||r[6])&&i%3&&!((i+s)%3)){o+=s;continue}if(a-=s,a>0)continue;s=Math.min(s,s+a+o);let e=[...r[0]][0].length,l=t.slice(0,i+r.index+e+s);if(Math.min(i,s)%2){let t=l.slice(1,-1);return{type:"em",raw:l,text:t,tokens:this.lexer.inlineTokens(t)}}let c=l.slice(2,-2);return{type:"strong",raw:l,text:c,tokens:this.lexer.inlineTokens(c)}}}}codespan(t){let e=this.rules.inline.code.exec(t);if(e){let t=e[2].replace(this.rules.other.newLineCharGlobal," "),n=this.rules.other.nonSpaceChar.test(t),r=this.rules.other.startingSpaceChar.test(t)&&this.rules.other.endingSpaceChar.test(t);return n&&r&&(t=t.substring(1,t.length-1)),{type:"codespan",raw:e[0],text:t}}}br(t){let e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){let e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){let e=this.rules.inline.autolink.exec(t);if(e){let t,n;return"@"===e[2]?(t=e[1],n="mailto:"+t):(t=e[1],n=t),{type:"link",raw:e[0],text:t,href:n,tokens:[{type:"text",raw:t,text:t}]}}}url(t){let e;if(e=this.rules.inline.url.exec(t)){let t,n;if("@"===e[2])t=e[0],n="mailto:"+t;else{let r;do{r=e[0],e[0]=this.rules.inline.t.exec(e[0])?.[0]??""}while(r!==e[0]);t=e[0],n="www."===e[1]?"http://"+e[0]:e[0]}return{type:"link",raw:e[0],text:t,href:n,tokens:[{type:"text",raw:t,text:t}]}}}inlineText(t){let e=this.rules.inline.text.exec(t);if(e){let t=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:t}}}},Vt=class t{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||B,this.options.tokenizer=this.options.tokenizer||new Ht,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let e={other:U,block:Mt.normal,inline:jt.normal};this.options.pedantic?(e.block=Mt.pedantic,e.inline=jt.pedantic):this.options.gfm&&(e.block=Mt.gfm,this.options.breaks?e.inline=jt.breaks:e.inline=jt.gfm),this.tokenizer.rules=e}static get rules(){return{block:Mt,inline:jt}}static lex(e,n){return new t(n).lex(e)}static lexInline(e,n){return new t(n).inlineTokens(e)}lex(t){t=t.replace(U.carriageReturn,"\n"),this.blockTokens(t,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let e=this.inlineQueue[t];this.inlineTokens(e.src,e.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,e=[],n=!1){for(this.options.pedantic&&(t=t.replace(U.tabCharGlobal,"    ").replace(U.spaceLine,""));t;){let r;if(this.options.extensions?.block?.some((n=>!!(r=n.call({lexer:this},t,e))&&(t=t.substring(r.raw.length),e.push(r),!0))))continue;if(r=this.tokenizer.space(t)){t=t.substring(r.raw.length);let n=e.at(-1);1===r.raw.length&&void 0!==n?n.raw+="\n":e.push(r);continue}if(r=this.tokenizer.code(t)){t=t.substring(r.raw.length);let n=e.at(-1);"paragraph"===n?.type||"text"===n?.type?(n.raw+=(n.raw.endsWith("\n")?"":"\n")+r.raw,n.text+="\n"+r.text,this.inlineQueue.at(-1).src=n.text):e.push(r);continue}if(r=this.tokenizer.fences(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.heading(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.hr(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.blockquote(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.list(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.html(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.def(t)){t=t.substring(r.raw.length);let n=e.at(-1);"paragraph"===n?.type||"text"===n?.type?(n.raw+=(n.raw.endsWith("\n")?"":"\n")+r.raw,n.text+="\n"+r.raw,this.inlineQueue.at(-1).src=n.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title},e.push(r));continue}if(r=this.tokenizer.table(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.lheading(t)){t=t.substring(r.raw.length),e.push(r);continue}let s=t;if(this.options.extensions?.startBlock){let e,n=1/0,r=t.slice(1);this.options.extensions.startBlock.forEach((t=>{e=t.call({lexer:this},r),"number"==typeof e&&e>=0&&(n=Math.min(n,e))})),n<1/0&&n>=0&&(s=t.substring(0,n+1))}if(this.state.top&&(r=this.tokenizer.paragraph(s))){let i=e.at(-1);n&&"paragraph"===i?.type?(i.raw+=(i.raw.endsWith("\n")?"":"\n")+r.raw,i.text+="\n"+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=i.text):e.push(r),n=s.length!==t.length,t=t.substring(r.raw.length)}else if(r=this.tokenizer.text(t)){t=t.substring(r.raw.length);let n=e.at(-1);"text"===n?.type?(n.raw+=(n.raw.endsWith("\n")?"":"\n")+r.raw,n.text+="\n"+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=n.text):e.push(r)}else if(t){let e="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(e);break}throw new Error(e)}}return this.state.top=!0,e}inline(t,e=[]){return this.inlineQueue.push({src:t,tokens:e}),e}inlineTokens(t,e=[]){let n=t,r=null;if(this.tokens.links){let t=Object.keys(this.tokens.links);if(t.length>0)for(;null!=(r=this.tokenizer.rules.inline.reflinkSearch.exec(n));)t.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(n=n.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(r=this.tokenizer.rules.inline.anyPunctuation.exec(n));)n=n.slice(0,r.index)+"++"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;null!=(r=this.tokenizer.rules.inline.blockSkip.exec(n));)n=n.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);n=this.options.hooks?.emStrongMask?.call({lexer:this},n)??n;let s=!1,i="";for(;t;){let r;if(s||(i=""),s=!1,this.options.extensions?.inline?.some((n=>!!(r=n.call({lexer:this},t,e))&&(t=t.substring(r.raw.length),e.push(r),!0))))continue;if(r=this.tokenizer.escape(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.tag(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.link(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(r.raw.length);let n=e.at(-1);"text"===r.type&&"text"===n?.type?(n.raw+=r.raw,n.text+=r.text):e.push(r);continue}if(r=this.tokenizer.emStrong(t,n,i)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.codespan(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.br(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.del(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.autolink(t)){t=t.substring(r.raw.length),e.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(t))){t=t.substring(r.raw.length),e.push(r);continue}let a=t;if(this.options.extensions?.startInline){let e,n=1/0,r=t.slice(1);this.options.extensions.startInline.forEach((t=>{e=t.call({lexer:this},r),"number"==typeof e&&e>=0&&(n=Math.min(n,e))})),n<1/0&&n>=0&&(a=t.substring(0,n+1))}if(r=this.tokenizer.inlineText(a)){t=t.substring(r.raw.length),"_"!==r.raw.slice(-1)&&(i=r.raw.slice(-1)),s=!0;let n=e.at(-1);"text"===n?.type?(n.raw+=r.raw,n.text+=r.text):e.push(r)}else if(t){let e="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(e);break}throw new Error(e)}}return e}},Ut=class{options;parser;constructor(t){this.options=t||B}space(t){return""}code({text:t,lang:e,escaped:n}){let r=(e||"").match(U.notSpaceStart)?.[0],s=t.replace(U.endingNewline,"")+"\n";return r?'<pre><code class="language-'+Rt(r)+'">'+(n?s:Rt(s,!0))+"</code></pre>\n":"<pre><code>"+(n?s:Rt(s,!0))+"</code></pre>\n"}blockquote({tokens:t}){return`<blockquote>\n${this.parser.parse(t)}</blockquote>\n`}html({text:t}){return t}def(t){return""}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>\n`}hr(t){return"<hr>\n"}list(t){let e=t.ordered,n=t.start,r="";for(let e=0;e<t.items.length;e++){let n=t.items[e];r+=this.listitem(n)}let s=e?"ol":"ul";return"<"+s+(e&&1!==n?' start="'+n+'"':"")+">\n"+r+"</"+s+">\n"}listitem(t){let e="";if(t.task){let n=this.checkbox({checked:!!t.checked});t.loose?"paragraph"===t.tokens[0]?.type?(t.tokens[0].text=n+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&"text"===t.tokens[0].tokens[0].type&&(t.tokens[0].tokens[0].text=n+" "+Rt(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:n+" ",text:n+" ",escaped:!0}):e+=n+" "}return e+=this.parser.parse(t.tokens,!!t.loose),`<li>${e}</li>\n`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>\n`}table(t){let e="",n="";for(let e=0;e<t.header.length;e++)n+=this.tablecell(t.header[e]);e+=this.tablerow({text:n});let r="";for(let e=0;e<t.rows.length;e++){let s=t.rows[e];n="";for(let t=0;t<s.length;t++)n+=this.tablecell(s[t]);r+=this.tablerow({text:n})}return r&&(r=`<tbody>${r}</tbody>`),"<table>\n<thead>\n"+e+"</thead>\n"+r+"</table>\n"}tablerow({text:t}){return`<tr>\n${t}</tr>\n`}tablecell(t){let e=this.parser.parseInline(t.tokens),n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>\n`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${Rt(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:n}){let r=this.parser.parseInline(n),s=Lt(t);if(null===s)return r;let i='<a href="'+(t=s)+'"';return e&&(i+=' title="'+Rt(e)+'"'),i+=">"+r+"</a>",i}image({href:t,title:e,text:n,tokens:r}){r&&(n=this.parser.parseInline(r,this.parser.textRenderer));let s=Lt(t);if(null===s)return Rt(n);let i=`<img src="${t=s}" alt="${n}"`;return e&&(i+=` title="${Rt(e)}"`),i+=">",i}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:Rt(t.text)}},Jt=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}},Wt=class t{options;renderer;textRenderer;constructor(t){this.options=t||B,this.options.renderer=this.options.renderer||new Ut,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Jt}static parse(e,n){return new t(n).parse(e)}static parseInline(e,n){return new t(n).parseInline(e)}parse(t,e=!0){let n="";for(let r=0;r<t.length;r++){let s=t[r];if(this.options.extensions?.renderers?.[s.type]){let t=s,e=this.options.extensions.renderers[t.type].call({parser:this},t);if(!1!==e||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(t.type)){n+=e||"";continue}}let i=s;switch(i.type){case"space":n+=this.renderer.space(i);continue;case"hr":n+=this.renderer.hr(i);continue;case"heading":n+=this.renderer.heading(i);continue;case"code":n+=this.renderer.code(i);continue;case"table":n+=this.renderer.table(i);continue;case"blockquote":n+=this.renderer.blockquote(i);continue;case"list":n+=this.renderer.list(i);continue;case"html":n+=this.renderer.html(i);continue;case"def":n+=this.renderer.def(i);continue;case"paragraph":n+=this.renderer.paragraph(i);continue;case"text":{let s=i,a=this.renderer.text(s);for(;r+1<t.length&&"text"===t[r+1].type;)s=t[++r],a+="\n"+this.renderer.text(s);n+=e?this.renderer.paragraph({type:"paragraph",raw:a,text:a,tokens:[{type:"text",raw:a,text:a,escaped:!0}]}):a;continue}default:{let t='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(t),"";throw new Error(t)}}}return n}parseInline(t,e=this.renderer){let n="";for(let r=0;r<t.length;r++){let s=t[r];if(this.options.extensions?.renderers?.[s.type]){let t=this.options.extensions.renderers[s.type].call({parser:this},s);if(!1!==t||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){n+=t||"";continue}}let i=s;switch(i.type){case"escape":case"text":n+=e.text(i);break;case"html":n+=e.html(i);break;case"link":n+=e.link(i);break;case"image":n+=e.image(i);break;case"strong":n+=e.strong(i);break;case"em":n+=e.em(i);break;case"codespan":n+=e.codespan(i);break;case"br":n+=e.br(i);break;case"del":n+=e.del(i);break;default:{let t='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(t),"";throw new Error(t)}}}return n}},Gt=class{options;block;constructor(t){this.options=t||B}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}emStrongMask(t){return t}provideLexer(){return this.block?Vt.lex:Vt.lexInline}provideParser(){return this.block?Wt.parse:Wt.parseInline}},Kt=new class{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=Wt;Renderer=Ut;TextRenderer=Jt;Lexer=Vt;Tokenizer=Ht;Hooks=Gt;constructor(...t){this.use(...t)}walkTokens(t,e){let n=[];for(let r of t)switch(n=n.concat(e.call(this,r)),r.type){case"table":{let t=r;for(let r of t.header)n=n.concat(this.walkTokens(r.tokens,e));for(let r of t.rows)for(let t of r)n=n.concat(this.walkTokens(t.tokens,e));break}case"list":{let t=r;n=n.concat(this.walkTokens(t.items,e));break}default:{let t=r;this.defaults.extensions?.childTokens?.[t.type]?this.defaults.extensions.childTokens[t.type].forEach((r=>{let s=t[r].flat(1/0);n=n.concat(this.walkTokens(s,e))})):t.tokens&&(n=n.concat(this.walkTokens(t.tokens,e)))}}return n}use(...t){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach((t=>{let n={...t};if(n.async=this.defaults.async||n.async||!1,t.extensions&&(t.extensions.forEach((t=>{if(!t.name)throw new Error("extension name required");if("renderer"in t){let n=e.renderers[t.name];e.renderers[t.name]=n?function(...e){let r=t.renderer.apply(this,e);return!1===r&&(r=n.apply(this,e)),r}:t.renderer}if("tokenizer"in t){if(!t.level||"block"!==t.level&&"inline"!==t.level)throw new Error("extension level must be 'block' or 'inline'");let n=e[t.level];n?n.unshift(t.tokenizer):e[t.level]=[t.tokenizer],t.start&&("block"===t.level?e.startBlock?e.startBlock.push(t.start):e.startBlock=[t.start]:"inline"===t.level&&(e.startInline?e.startInline.push(t.start):e.startInline=[t.start]))}"childTokens"in t&&t.childTokens&&(e.childTokens[t.name]=t.childTokens)})),n.extensions=e),t.renderer){let e=this.defaults.renderer||new Ut(this.defaults);for(let n in t.renderer){if(!(n in e))throw new Error(`renderer '${n}' does not exist`);if(["options","parser"].includes(n))continue;let r=n,s=t.renderer[r],i=e[r];e[r]=(...t)=>{let n=s.apply(e,t);return!1===n&&(n=i.apply(e,t)),n||""}}n.renderer=e}if(t.tokenizer){let e=this.defaults.tokenizer||new Ht(this.defaults);for(let n in t.tokenizer){if(!(n in e))throw new Error(`tokenizer '${n}' does not exist`);if(["options","rules","lexer"].includes(n))continue;let r=n,s=t.tokenizer[r],i=e[r];e[r]=(...t)=>{let n=s.apply(e,t);return!1===n&&(n=i.apply(e,t)),n}}n.tokenizer=e}if(t.hooks){let e=this.defaults.hooks||new Gt;for(let n in t.hooks){if(!(n in e))throw new Error(`hook '${n}' does not exist`);if(["options","block"].includes(n))continue;let r=n,s=t.hooks[r],i=e[r];Gt.passThroughHooks.has(n)?e[r]=t=>{if(this.defaults.async&&Gt.passThroughHooksRespectAsync.has(n))return Promise.resolve(s.call(e,t)).then((t=>i.call(e,t)));let r=s.call(e,t);return i.call(e,r)}:e[r]=(...t)=>{let n=s.apply(e,t);return!1===n&&(n=i.apply(e,t)),n}}n.hooks=e}if(t.walkTokens){let e=this.defaults.walkTokens,r=t.walkTokens;n.walkTokens=function(t){let n=[];return n.push(r.call(this,t)),e&&(n=n.concat(e.call(this,t))),n}}this.defaults={...this.defaults,...n}})),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return Vt.lex(t,e??this.defaults)}parser(t,e){return Wt.parse(t,e??this.defaults)}parseMarkdown(t){return(e,n)=>{let r={...n},s={...this.defaults,...r},i=this.onError(!!s.silent,!!s.async);if(!0===this.defaults.async&&!1===r.async)return i(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||null===e)return i(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof e)return i(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));s.hooks&&(s.hooks.options=s,s.hooks.block=t);let a=s.hooks?s.hooks.provideLexer():t?Vt.lex:Vt.lexInline,o=s.hooks?s.hooks.provideParser():t?Wt.parse:Wt.parseInline;if(s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(e):e).then((t=>a(t,s))).then((t=>s.hooks?s.hooks.processAllTokens(t):t)).then((t=>s.walkTokens?Promise.all(this.walkTokens(t,s.walkTokens)).then((()=>t)):t)).then((t=>o(t,s))).then((t=>s.hooks?s.hooks.postprocess(t):t)).catch(i);try{s.hooks&&(e=s.hooks.preprocess(e));let t=a(e,s);s.hooks&&(t=s.hooks.processAllTokens(t)),s.walkTokens&&this.walkTokens(t,s.walkTokens);let n=o(t,s);return s.hooks&&(n=s.hooks.postprocess(n)),n}catch(t){return i(t)}}}onError(t,e){return n=>{if(n.message+="\nPlease report this to https://github.com/markedjs/marked.",t){let t="<p>An error occurred:</p><pre>"+Rt(n.message+"",!0)+"</pre>";return e?Promise.resolve(t):t}if(e)return Promise.reject(n);throw n}}};function Qt(t,e){return Kt.parse(t,e)}Qt.options=Qt.setOptions=function(t){return Kt.setOptions(t),Qt.defaults=Kt.defaults,I(Qt.defaults),Qt},Qt.getDefaults=Z,Qt.defaults=B,Qt.use=function(...t){return Kt.use(...t),Qt.defaults=Kt.defaults,I(Qt.defaults),Qt},Qt.walkTokens=function(t,e){return Kt.walkTokens(t,e)},Qt.parseInline=Kt.parseInline,Qt.Parser=Wt,Qt.parser=Wt.parse,Qt.Renderer=Ut,Qt.TextRenderer=Jt,Qt.Lexer=Vt,Qt.lexer=Vt.lex,Qt.Tokenizer=Ht,Qt.Hooks=Gt,Qt.parse=Qt,Qt.options,Qt.setOptions,Qt.use,Qt.walkTokens,Qt.parseInline,Wt.parse,Vt.lex;class Xt extends o{constructor(){super()}connectedCallback(){super.connectedCallback(),this.renderMarkdown()}renderMarkdown(){let t=this.getAttribute("content")||this.innerHTML;this.getAttribute("content")&&(t=n(t));const e=t;if(t.trim())try{const t=Yt(e),n=te(t),r=ee(n);this.innerHTML=r,function(t,e,...n){c.executeComponentHooks(t,e,...n)}("x-markdown",this,"rendered"),this.getAttribute("content")&&this.removeAttribute("content")}catch(e){console.error("Failed to parse markdown:",e),this.innerHTML=t}else this.innerHTML=""}sanitizeHTML(t){const e=document.createElement("div");return e.innerHTML=t,e.querySelectorAll("script").forEach((t=>{"application/flow"!==t.getAttribute("type")&&t.remove()})),e.querySelectorAll("*").forEach((t=>{["onclick","onload","onerror","onmouseover","onmouseout"].forEach((e=>{t.removeAttribute(e)}))})),e.innerHTML}}const Yt=t=>{const e=t.split("\n");if(0===e.length)return t;let n="";for(const t of e){if(""===t.trim())continue;const e=t.match(/^(\s*)/);n=e[1];break}return""===n?t:e.map((t=>""===t.trim()?t:t.startsWith(n)?t.substring(n.length):t)).join("\n")},te=t=>{const e={"&gt;":">","&lt;":"<","&amp;":"&","&quot;":'"',"&#39;":"'","&nbsp;":" "};let n=t;for(const[t,r]of Object.entries(e))n=n.replace(new RegExp(t,"g"),r);return n=n.replace(/&#(\d+);/g,((t,e)=>String.fromCharCode(parseInt(e,10)))),n},ee=t=>{const e={heading({tokens:t,depth:e}){return`<x-typography variant="h${e}" sx:mt="5" sx:mb="1" sx:display="inline-block">${this.parser.parseInline(t)}</x-typography>`},blockquote({tokens:t}){return`<x-typography variant="blockquote" sx:my="2" sx:mx="0">${this.parser.parse(t).replace(/<p>/g,"").replace(/<\/p>/g,"")}</x-typography>`},strong({tokens:t}){return`<x-typography variant="strong">${this.parser.parseInline(t)}</x-typography>`},link({href:t,title:e,tokens:n}){return`<x-link href="${t}" ${e?` title="${e}"`:""}>${this.parser.parseInline(n)}</x-link>`},paragraph({tokens:t}){const e=this.parser.parseInline(t);return e.match(/^<x-[\w-]+[^>]*>[\s\S]*<\/x-[\w-]+>$/)||e.match(/^<x-[\w-]+[^>]*content="[^"]*">[\s\S]*<\/x-[\w-]+>$/)||e.match(/^<x-[\w-]+[^>]*>[\s\S]*?<\/x-[\w-]+>$/s)?e:`<p>${e}</p>`},tablecell({tokens:t,align:e}){let n=this.parser.parseInline(t);return n=n.replace(/`?icon:([^;]+);([^`\s]+)`?/g,((t,e,n)=>`<x-icon\n\t\t\t\t\t\ticon="${e}"\n\t\t\t\t\t\tsx:color="${s(n.trim())}"\n\t\t\t\t\t\tsize="large"\n\t\t\t\t\t></x-icon>`)),`<td${e?` style="text-align: ${e}"`:""}>${n}</td>`},list({items:t,ordered:e,start:n}){const r=e?"ol":"ul",s=e&&1!==n?` start="${n}"`:"",i=t.some((t=>!0===t.task));return`<${r}${s} style="padding-left: 0;">\n\t\t\t\t${t.map(((t,r)=>{let s,a,o;return e?`<li style="display: flex; align-items: flex-start; margin: 0.25rem 0; padding-left: 0;">\n\t\t\t\t\t\t\t\t<span style="color: var(--palettePrimaryMain); font-weight: 600; margin-right: 0.75rem; flex-shrink: 0; min-width: 1.5rem; text-align: right; font-family: 'Courier New', 'Monaco', 'Menlo', monospace; position: relative;">\n\t\t\t\t\t\t\t\t\t${n?n+r:r+1}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span>${this.parser.parseInline(t.tokens)}</span>\n\t\t\t\t\t\t\t</li>`:(!0===t.task||i&&!1===t.task?(s=t.checked?"fa-check-square-o":"fa-square-o",a="1em",o=`opacity: ${t.checked?"0.7":"1"}; color: ${t.checked?"var(--paletteTextSecondary)":"var(--paletteTextPrimary)"};`):(s="fa-circle",a="8px",o="color: var(--paletteTextPrimary);"),`<li style="display: flex; align-items: center; margin: 0.25rem 0; padding-left: 0;">\n\t\t\t\t\t\t\t<div style="min-width: 1.5rem; margin-right: 0.75rem; flex-shrink: 0; text-align: right; display: flex; align-items: center; justify-content: flex-end;">\n\t\t\t\t\t\t\t\t<i class="fa ${s}" style="color: var(--palettePrimaryMain); font-size: ${a}; ${"fa-check-square-o"===s?"margin-right: -0.1em;":""}"></i>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<span style="${o}">\n\t\t\t\t\t\t\t\t${this.parser.parseInline(t.tokens)}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</li>`)})).join("")}\n\t\t\t</${r}>`}};return Qt.setOptions({gfm:!0,breaks:!1,pedantic:!1}),Qt.use({renderer:{...e,html:t=>t.raw}}),Qt.parse(t)};class ne extends o{constructor(){super(),this.unsubscribe=null}connectedCallback(){const t=this.getAttribute("data");t?this.renderHybridTable(t):this.renderInlineTable(),this.applySxStyles()}disconnectedCallback(){this.unsubscribe&&this.unsubscribe()}renderInlineTable(){let t=this.getAttribute("content")||this.innerHTML;if(this.getAttribute("content")&&(t=t.replace(/&quot;/g,'"').replace(/'/g,"&#39;").replace(/&#10;/g,"\n").replace(/&#13;/g,"\r").replace(/&#9;/g,"\t")),!t.trim())return void(this.innerHTML="");const e=document.createElement("table");e.innerHTML=t,this.appendChild(e),this.getAttribute("content")&&this.removeAttribute("content")}renderHybridTable(t){let e=this.getAttribute("content")||this.innerHTML;if(this.getAttribute("content")&&(e=e.replace(/&quot;/g,'"').replace(/'/g,"&#39;").replace(/&#10;/g,"\n").replace(/&#13;/g,"\r").replace(/&#9;/g,"\t")),!e.trim())return void(this.innerHTML="");this.template=e;const n=document.createElement("table");n.innerHTML=e,this.appendChild(n),this.getAttribute("content")&&this.removeAttribute("content"),setTimeout((()=>{this.updateTableBody(t)}),10),this.unsubscribe=m(t,(()=>{this.updateTableBody(t)}))}updateTableBody(t){if(!t)return void console.warn("x-table: no data attribute provided");let e=null,n=t;if(t.startsWith("global_")&&(n=t.substring(7)),e=p(n),!e&&window.state&&window.state[n]?e=window.state[n]:!e&&window[n]&&(e=window[n]),!e)return void console.warn(`x-table: data not found for path: ${t}`);if(!Array.isArray(e))return void console.warn(`x-table: data is not an array: ${t}`);const r=this.querySelector("table");if(!r)return void console.warn("x-table: no table element found");let s=r.querySelector("tbody");s||(s=document.createElement("tbody"),r.appendChild(s));const i=this.generateTableRows(e);s.innerHTML=i}generateTableRows(t){const e=this.querySelector("table").querySelector("thead");if(!e)return console.warn("x-table: no thead found for property mapping"),"";const n=e.querySelectorAll("th[property]"),r=Array.from(n).map((t=>t.getAttribute("property")));return 0===r.length?(console.warn("x-table: no property attributes found in thead"),""):t.map(((t,e)=>`<tr>${r.map((e=>`<td>${t[e]||""}</td>`)).join("")}</tr>`)).join("")}processTemplate(t,e){let n=t;const r=n.match(/<thead>([\s\S]*?)<\/thead>/),s=n.match(/<tbody>([\s\S]*?)<\/tbody>/);if(!r||!s)return console.warn("x-table: template must contain both <thead> and <tbody> sections"),n;const i=r[1],a=s[1],o=i.matchAll(/<th[^>]*property="([^"]*)"[^>]*>([^<]*)<\/th>/g),l=[];for(const t of o)l.push(t[1]);const c=e.map(((t,e)=>{let n=a;return n=n.replace(/\{\{\s*item_([^}]+)\s*\}\}/g,((e,n)=>t[n]||"")),n=n.replace(/\{\{index\}\}/g,e+1),n.includes("{{")||n.includes("<td>")||(n=`<tr>${l.map((e=>`<td>${t[e]||""}</td>`)).join("")}</tr>`),n})).join("");return n=n.replace(/<tbody>[\s\S]*?<\/tbody>/,`<tbody>${c}</tbody>`),n}}function se(t){return t&&t.i&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ie,re,ae,oe,le,ce=function(){if(re)return ie;function t(t){this.o=t,this.clear()}re=1,t.prototype.clear=function(){this.l=0,this.u=Object.create(null)},t.prototype.get=function(t){return this.u[t]},t.prototype.set=function(t,e){return this.l>=this.o&&this.clear(),t in this.u||this.l++,this.u[t]=e};var e=/[^.^\]^[]+|(?=\[\]|\.\.)/g,n=/^\d+$/,r=/^\d/,s=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,i=/^\s*(['"]?)(.*?)(\1)\s*$/,a=new t(512),o=new t(512),l=new t(512);function c(t){return a.get(t)||a.set(t,u(t).map((function(t){return t.replace(i,"$2")})))}function u(t){return t.match(e)||[""]}function h(t){return"string"==typeof t&&t&&-1!==["'",'"'].indexOf(t.charAt(0))}function p(t){return!h(t)&&(function(t){return t.match(r)&&!t.match(n)}(t)||function(t){return s.test(t)}(t))}return ie={Cache:t,split:u,normalizePath:c,setter:function(t){var e=c(t);return o.get(t)||o.set(t,(function(t,n){for(var r=0,s=e.length,i=t;r<s-1;){var a=e[r];if("__proto__"===a||"constructor"===a||"prototype"===a)return t;i=i[e[r++]]}i[e[r]]=n}))},getter:function(t,e){var n=c(t);return l.get(t)||l.set(t,(function(t){for(var r=0,s=n.length;r<s;){if(null==t&&e)return;t=t[n[r++]]}return t}))},join:function(t){return t.reduce((function(t,e){return t+(h(e)||n.test(e)?"["+e+"]":(t?".":"")+e)}),"")},forEach:function(t,e,n){!function(t,e,n){var r,s,i,a,o=t.length;for(s=0;s<o;s++)(r=t[s])&&(p(r)&&(r='"'+r+'"'),i=!(a=h(r))&&/^\d+$/.test(r),e.call(n,r,a,i,s,t))}(Array.isArray(t)?t:u(t),e,n)}}}(),ue=function(){if(oe)return ae;oe=1;const t=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['’](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['’](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,e=e=>e.match(t)||[],n=t=>t[0].toUpperCase()+t.slice(1),r=(t,n)=>e(t).join(n).toLowerCase(),s=t=>e(t).reduce(((t,e)=>`${t}${t?e[0].toUpperCase()+e.slice(1).toLowerCase():e.toLowerCase()}`),"");return ae={words:e,upperFirst:n,camelCase:s,pascalCase:t=>n(s(t)),snakeCase:t=>r(t,"_"),kebabCase:t=>r(t,"-"),sentenceCase:t=>n(r(t," ")),titleCase:t=>e(t).map(n).join(" ")}}(),he={exports:{}};const de=se(function(){if(le)return he.exports;function t(t,e){var n=t.length,r=new Array(n),s={},i=n,a=function(t){for(var e=new Map,n=0,r=t.length;n<r;n++){var s=t[n];e.has(s[0])||e.set(s[0],new Set),e.has(s[1])||e.set(s[1],new Set),e.get(s[0]).add(s[1])}return e}(e),o=function(t){for(var e=new Map,n=0,r=t.length;n<r;n++)e.set(t[n],n);return e}(t);for(e.forEach((function(t){if(!o.has(t[0])||!o.has(t[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")}));i--;)s[i]||l(t[i],i,new Set);return r;function l(t,e,i){if(i.has(t)){var c;try{c=", node was:"+JSON.stringify(t)}catch(t){c=""}throw new Error("Cyclic dependency"+c)}if(!o.has(t))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(t));if(!s[e]){s[e]=!0;var u=a.get(t)||new Set;if(e=(u=Array.from(u)).length){i.add(t);do{var h=u[--e];l(h,o.get(h),i)}while(e);i.delete(t)}r[--n]=t}}}return le=1,he.exports=function(e){return t(function(t){for(var e=new Set,n=0,r=t.length;n<r;n++){var s=t[n];e.add(s[0]),e.add(s[1])}return Array.from(e)}(e),e)},he.exports.array=t,he.exports}()),fe=Object.prototype.toString,pe=Error.prototype.toString,me=RegExp.prototype.toString,ge="undefined"!=typeof Symbol?Symbol.prototype.toString:()=>"",be=/^Symbol\((.*)\)(.*)$/;function xe(t,e=!1){if(null==t||!0===t||!1===t)return""+t;const n=typeof t;if("number"===n)return function(t){return t!=+t?"NaN":0===t&&1/t<0?"-0":""+t}(t);if("string"===n)return e?`"${t}"`:t;if("function"===n)return"[Function "+(t.name||"anonymous")+"]";if("symbol"===n)return ge.call(t).replace(be,"Symbol($1)");const r=fe.call(t).slice(8,-1);return"Date"===r?isNaN(t.getTime())?""+t:t.toISOString(t):"Error"===r||t instanceof Error?"["+pe.call(t)+"]":"RegExp"===r?me.call(t):null}function ve(t,e){let n=xe(t,e);return null!==n?n:JSON.stringify(t,(function(t,n){let r=xe(this[t],e);return null!==r?r:n}),2)}function $e(t){return null==t?[]:[].concat(t)}let we,ye,ke,Se=/\$\{\s*(\w+)\s*\}/g;we=Symbol.toStringTag;class Ae{constructor(t,e,n,r){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[we]="Error",this.name="ValidationError",this.value=e,this.path=n,this.type=r,this.errors=[],this.inner=[],$e(t).forEach((t=>{if(Fe.isError(t)){this.errors.push(...t.errors);const e=t.inner.length?t.inner:[t];this.inner.push(...e)}else this.errors.push(t)})),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0]}}ye=Symbol.hasInstance,ke=Symbol.toStringTag;class Fe extends Error{static formatError(t,e){const n=e.label||e.path||"this";return e=Object.assign({},e,{path:n,originalPath:e.path}),"string"==typeof t?t.replace(Se,((t,n)=>ve(e[n]))):"function"==typeof t?t(e):t}static isError(t){return t&&"ValidationError"===t.name}constructor(t,e,n,r,s){const i=new Ae(t,e,n,r);if(s)return i;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[ke]="Error",this.name=i.name,this.message=i.message,this.type=i.type,this.value=i.value,this.path=i.path,this.errors=i.errors,this.inner=i.inner,Error.captureStackTrace&&Error.captureStackTrace(this,Fe)}static[ye](t){return Ae[Symbol.hasInstance](t)||super[Symbol.hasInstance](t)}}let Ee={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:t,type:e,value:n,originalValue:r})=>{const s=null!=r&&r!==n?` (cast from the value \`${ve(r,!0)}\`).`:".";return"mixed"!==e?`${t} must be a \`${e}\` type, but the final value was: \`${ve(n,!0)}\``+s:`${t} must match the configured type. The validated value was: \`${ve(n,!0)}\``+s}},_e={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},Ce={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},Oe={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},Pe={isValue:"${path} field must be ${value}"},ze={noUnknown:"${path} field has unspecified keys: ${unknown}",exact:"${path} object contains unknown properties: ${properties}"},Te={notType:t=>{const{path:e,value:n,spec:r}=t,s=r.types.length;if(Array.isArray(n)){if(n.length<s)return`${e} tuple value has too few items, expected a length of ${s} but got ${n.length} for value: \`${ve(n,!0)}\``;if(n.length>s)return`${e} tuple value has too many items, expected a length of ${s} but got ${n.length} for value: \`${ve(n,!0)}\``}return Fe.formatError(Ee.notType,t)}};Object.assign(Object.create(null),{mixed:Ee,string:_e,number:Ce,date:Oe,object:ze,array:{min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},boolean:Pe,tuple:Te});const De=t=>t&&t.h;class Me{static fromOptions(t,e){if(!e.then&&!e.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:n,then:r,otherwise:s}=e,i="function"==typeof n?n:(...t)=>t.every((t=>t===n));return new Me(t,((t,e)=>{var n;let a=i(...t)?r:s;return null!=(n=null==a?void 0:a(e))?n:e}))}constructor(t,e){this.fn=void 0,this.refs=t,this.refs=t,this.fn=e}resolve(t,e){let n=this.refs.map((t=>t.getValue(null==e?void 0:e.value,null==e?void 0:e.parent,null==e?void 0:e.context))),r=this.fn(n,t,e);if(void 0===r||r===t)return t;if(!De(r))throw new TypeError("conditions must return a schema object");return r.resolve(e)}}const je="$",Ne=".";class qe{constructor(t,e={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,"string"!=typeof t)throw new TypeError("ref must be a string, got: "+t);if(this.key=t.trim(),""===t)throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===je,this.isValue=this.key[0]===Ne,this.isSibling=!this.isContext&&!this.isValue;let n=this.isContext?je:this.isValue?Ne:"";this.path=this.key.slice(n.length),this.getter=this.path&&ce.getter(this.path,!0),this.map=e.map}getValue(t,e,n){let r=this.isContext?n:this.isValue?t:e;return this.getter&&(r=this.getter(r||{})),this.map&&(r=this.map(r)),r}cast(t,e){return this.getValue(t,null==e?void 0:e.parent,null==e?void 0:e.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(t){return t&&t.v}}qe.prototype.v=!0;const Re=t=>null==t;function Le(t){function e({value:e,path:n="",options:r,originalValue:s,schema:i},a,o){const{name:l,test:c,params:u,message:h,skipAbsent:p}=t;let{parent:d,context:f,abortEarly:g=i.spec.abortEarly,disableStackTrace:m=i.spec.disableStackTrace}=r;const b={value:e,parent:d,context:f};function x(t={}){const r=Ze(Object.assign({value:e,originalValue:s,label:i.spec.label,path:t.path||n,spec:i.spec,disableStackTrace:t.disableStackTrace||m},u,t.params),b),a=new Fe(Fe.formatError(t.message||h,r),e,r.path,t.type||l,r.disableStackTrace);return a.params=r,a}const y=g?a:o;let k={path:n,parent:d,type:l,from:r.from,createError:x,resolve:t=>Be(t,b),options:r,originalValue:s,schema:i};const v=t=>{Fe.isError(t)?y(t):t?o(null):y(x())},w=t=>{Fe.isError(t)?y(t):a(t)};if(p&&Re(e))return v(!0);let $;try{var S;if($=c.call(k,e,k),"function"==typeof(null==(S=$)?void 0:S.then)){if(r.sync)throw new Error(`Validation test of type: "${k.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve($).then(v,w)}}catch(t){return void w(t)}v($)}return e.OPTIONS=t,e}function Ze(t,e){if(!t)return t;for(const n of Object.keys(t))t[n]=Be(t[n],e);return t}function Be(t,e){return qe.isRef(t)?t.getValue(e.value,e.parent,e.context):t}function Ie(t,e,n,r=n){let s,i,a;return e?(ce.forEach(e,((o,l,c)=>{let u=l?o.slice(1,o.length-1):o,h="tuple"===(t=t.resolve({context:r,parent:s,value:n})).type,p=c?parseInt(u,10):0;if(t.innerType||h){if(h&&!c)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${a}" must contain an index to the tuple element, e.g. "${a}[0]"`);if(n&&p>=n.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${o}, in the path: ${e}. because there is no value at that index. `);s=n,n=n&&n[p],t=h?t.spec.types[p]:t.innerType}if(!c){if(!t.fields||!t.fields[u])throw new Error(`The schema does not contain the path: ${e}. (failed at: ${a} which is a type: "${t.type}")`);s=n,n=n&&n[u],t=t.fields[u]}i=u,a=l?"["+o+"]":"."+o})),{schema:t,parent:s,parentPath:i}):{parent:s,parentPath:e,schema:t}}class He extends Set{describe(){const t=[];for(const e of this.values())t.push(qe.isRef(e)?e.describe():e);return t}resolveAll(t){let e=[];for(const n of this.values())e.push(t(n));return e}clone(){return new He(this.values())}merge(t,e){const n=this.clone();return t.forEach((t=>n.add(t))),e.forEach((t=>n.delete(t))),n}}function Ve(t,e=new Map){if(De(t)||!t||"object"!=typeof t)return t;if(e.has(t))return e.get(t);let n;if(t instanceof Date)n=new Date(t.getTime()),e.set(t,n);else if(t instanceof RegExp)n=new RegExp(t),e.set(t,n);else if(Array.isArray(t)){n=new Array(t.length),e.set(t,n);for(let r=0;r<t.length;r++)n[r]=Ve(t[r],e)}else if(t instanceof Map){n=new Map,e.set(t,n);for(const[r,s]of t.entries())n.set(r,Ve(s,e))}else if(t instanceof Set){n=new Set,e.set(t,n);for(const r of t)n.add(Ve(r,e))}else{if(!(t instanceof Object))throw Error(`Unable to clone ${t}`);n={},e.set(t,n);for(const[r,s]of Object.entries(t))n[r]=Ve(s,e)}return n}function Ue(t){if(null==t||!t.length)return;const e=[];let n="",r=!1,s=!1;for(let i=0;i<t.length;i++){const a=t[i];"["!==a||s?"]"!==a||s?'"'!==a?"."!==a||r||s?n+=a:n&&(e.push(n),n=""):s=!s:(n&&(/^\d+$/.test(n)?e.push(n):e.push(n.replace(/^"|"$/g,"")),n=""),r=!1):(n&&(e.push(...n.split(".").filter(Boolean)),n=""),r=!0)}return n&&e.push(...n.split(".").filter(Boolean)),e}function Je(t,e){var n;if((null==(n=t.inner)||!n.length)&&t.errors.length)return function(t,e){const n=e?`${e}.${t.path}`:t.path;return t.errors.map((t=>({message:t,path:Ue(n)})))}(t,e);const r=e?`${e}.${t.path}`:t.path;return t.inner.flatMap((t=>Je(t,r)))}class We{constructor(t){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this.$=void 0,this.internalTests={},this.k=new He,this.S=new He,this.exclusiveTests=Object.create(null),this.A=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation((()=>{this.typeError(Ee.notType)})),this.type=t.type,this.A=t.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},null==t?void 0:t.spec),this.withMutation((t=>{t.nonNullable()}))}get F(){return this.type}clone(t){if(this.$)return t&&Object.assign(this.spec,t),this;const e=Object.create(Object.getPrototypeOf(this));return e.type=this.type,e.A=this.A,e.k=this.k.clone(),e.S=this.S.clone(),e.internalTests=Object.assign({},this.internalTests),e.exclusiveTests=Object.assign({},this.exclusiveTests),e.deps=[...this.deps],e.conditions=[...this.conditions],e.tests=[...this.tests],e.transforms=[...this.transforms],e.spec=Ve(Object.assign({},this.spec,t)),e}label(t){let e=this.clone();return e.spec.label=t,e}meta(...t){if(0===t.length)return this.spec.meta;let e=this.clone();return e.spec.meta=Object.assign(e.spec.meta||{},t[0]),e}withMutation(t){let e=this.$;this.$=!0;let n=t(this);return this.$=e,n}concat(t){if(!t||t===this)return this;if(t.type!==this.type&&"mixed"!==this.type)throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${t.type}`);let e=this,n=t.clone();const r=Object.assign({},e.spec,n.spec);return n.spec=r,n.internalTests=Object.assign({},e.internalTests,n.internalTests),n.k=e.k.merge(t.k,t.S),n.S=e.S.merge(t.S,t.k),n.tests=e.tests,n.exclusiveTests=e.exclusiveTests,n.withMutation((e=>{t.tests.forEach((t=>{e.test(t.OPTIONS)}))})),n.transforms=[...e.transforms,...n.transforms],n}isType(t){return null==t?!(!this.spec.nullable||null!==t)||!(!this.spec.optional||void 0!==t):this.A(t)}resolve(t){let e=this;if(e.conditions.length){let n=e.conditions;e=e.clone(),e.conditions=[],e=n.reduce(((e,n)=>n.resolve(e,t)),e),e=e.resolve(t)}return e}resolveOptions(t){var e,n,r,s;return Object.assign({},t,{from:t.from||[],strict:null!=(e=t.strict)?e:this.spec.strict,abortEarly:null!=(n=t.abortEarly)?n:this.spec.abortEarly,recursive:null!=(r=t.recursive)?r:this.spec.recursive,disableStackTrace:null!=(s=t.disableStackTrace)?s:this.spec.disableStackTrace})}cast(t,e={}){let n=this.resolve(Object.assign({},e,{value:t})),r="ignore-optionality"===e.assert,s=n._(t,e);if(!1!==e.assert&&!n.isType(s)){if(r&&Re(s))return s;let i=ve(t),a=ve(s);throw new TypeError(`The value of ${e.path||"field"} could not be cast to a value that satisfies the schema type: "${n.type}". \n\nattempted value: ${i} \n`+(a!==i?`result of cast: ${a}`:""))}return s}_(t,e){let n=void 0===t?t:this.transforms.reduce(((n,r)=>r.call(this,n,t,this,e)),t);return void 0===n&&(n=this.getDefault(e)),n}C(t,e={},n,r){let{path:s,originalValue:i=t,strict:a=this.spec.strict}=e,o=t;a||(o=this._(o,Object.assign({assert:!1},e)));let l=[];for(let t of Object.values(this.internalTests))t&&l.push(t);this.runTests({path:s,value:o,originalValue:i,options:e,tests:l},n,(t=>{if(t.length)return r(t,o);this.runTests({path:s,value:o,originalValue:i,options:e,tests:this.tests},n,r)}))}runTests(t,e,n){let r=!1,{tests:s,value:i,originalValue:a,path:o,options:l}=t,c=t=>{r||(r=!0,e(t,i))},u=t=>{r||(r=!0,n(t,i))},h=s.length,p=[];if(!h)return u([]);let d={value:i,originalValue:a,path:o,options:l,schema:this};for(let t=0;t<s.length;t++)(0,s[t])(d,c,(function(t){t&&(Array.isArray(t)?p.push(...t):p.push(t)),--h<=0&&u(p)}))}asNestedTest({key:t,index:e,parent:n,parentPath:r,originalParent:s,options:i}){const a=null!=t?t:e;if(null==a)throw TypeError("Must include `key` or `index` for nested validations");const o="number"==typeof a;let l=n[a];const c=Object.assign({},i,{strict:!0,parent:n,value:l,originalValue:s[a],key:void 0,[o?"index":"key"]:a,path:o||a.includes(".")?`${r||""}[${o?a:`"${a}"`}]`:(r?`${r}.`:"")+t});return(t,e,n)=>this.resolve(c).C(l,c,e,n)}validate(t,e){var n;let r=this.resolve(Object.assign({},e,{value:t})),s=null!=(n=null==e?void 0:e.disableStackTrace)?n:r.spec.disableStackTrace;return new Promise(((n,i)=>r.C(t,e,((t,e)=>{Fe.isError(t)&&(t.value=e),i(t)}),((t,e)=>{t.length?i(new Fe(t,e,void 0,void 0,s)):n(e)}))))}validateSync(t,e){var n;let r,s=this.resolve(Object.assign({},e,{value:t})),i=null!=(n=null==e?void 0:e.disableStackTrace)?n:s.spec.disableStackTrace;return s.C(t,Object.assign({},e,{sync:!0}),((t,e)=>{throw Fe.isError(t)&&(t.value=e),t}),((e,n)=>{if(e.length)throw new Fe(e,t,void 0,void 0,i);r=n})),r}isValid(t,e){return this.validate(t,e).then((()=>!0),(t=>{if(Fe.isError(t))return!1;throw t}))}isValidSync(t,e){try{return this.validateSync(t,e),!0}catch(t){if(Fe.isError(t))return!1;throw t}}O(t){let e=this.spec.default;return null==e?e:"function"==typeof e?e.call(this,t):Ve(e)}getDefault(t){return this.resolve(t||{}).O(t)}default(t){return 0===arguments.length?this.O():this.clone({default:t})}strict(t=!0){return this.clone({strict:t})}nullability(t,e){const n=this.clone({nullable:t});return n.internalTests.nullable=Le({message:e,name:"nullable",test(t){return null!==t||this.schema.spec.nullable}}),n}optionality(t,e){const n=this.clone({optional:t});return n.internalTests.optionality=Le({message:e,name:"optionality",test(t){return void 0!==t||this.schema.spec.optional}}),n}optional(){return this.optionality(!0)}defined(t=Ee.defined){return this.optionality(!1,t)}nullable(){return this.nullability(!0)}nonNullable(t=Ee.notNull){return this.nullability(!1,t)}required(t=Ee.required){return this.clone().withMutation((e=>e.nonNullable(t).defined(t)))}notRequired(){return this.clone().withMutation((t=>t.nullable().optional()))}transform(t){let e=this.clone();return e.transforms.push(t),e}test(...t){let e;if(e=1===t.length?"function"==typeof t[0]?{test:t[0]}:t[0]:2===t.length?{name:t[0],test:t[1]}:{name:t[0],message:t[1],test:t[2]},void 0===e.message&&(e.message=Ee.default),"function"!=typeof e.test)throw new TypeError("`test` is a required parameters");let n=this.clone(),r=Le(e),s=e.exclusive||e.name&&!0===n.exclusiveTests[e.name];if(e.exclusive&&!e.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return e.name&&(n.exclusiveTests[e.name]=!!e.exclusive),n.tests=n.tests.filter((t=>{if(t.OPTIONS.name===e.name){if(s)return!1;if(t.OPTIONS.test===r.OPTIONS.test)return!1}return!0})),n.tests.push(r),n}when(t,e){Array.isArray(t)||"string"==typeof t||(e=t,t=".");let n=this.clone(),r=$e(t).map((t=>new qe(t)));return r.forEach((t=>{t.isSibling&&n.deps.push(t.key)})),n.conditions.push("function"==typeof e?new Me(r,e):Me.fromOptions(r,e)),n}typeError(t){let e=this.clone();return e.internalTests.typeError=Le({message:t,name:"typeError",skipAbsent:!0,test(t){return!!this.schema.A(t)||this.createError({params:{type:this.schema.type}})}}),e}oneOf(t,e=Ee.oneOf){let n=this.clone();return t.forEach((t=>{n.k.add(t),n.S.delete(t)})),n.internalTests.whiteList=Le({message:e,name:"oneOf",skipAbsent:!0,test(t){let e=this.schema.k,n=e.resolveAll(this.resolve);return!!n.includes(t)||this.createError({params:{values:Array.from(e).join(", "),resolved:n}})}}),n}notOneOf(t,e=Ee.notOneOf){let n=this.clone();return t.forEach((t=>{n.S.add(t),n.k.delete(t)})),n.internalTests.blacklist=Le({message:e,name:"notOneOf",test(t){let e=this.schema.S,n=e.resolveAll(this.resolve);return!n.includes(t)||this.createError({params:{values:Array.from(e).join(", "),resolved:n}})}}),n}strip(t=!0){let e=this.clone();return e.spec.strip=t,e}describe(t){const e=(t?this.resolve(t):this).clone(),{label:n,meta:r,optional:s,nullable:i}=e.spec;return{meta:r,label:n,optional:s,nullable:i,default:e.getDefault(t),type:e.type,oneOf:e.k.describe(),notOneOf:e.S.describe(),tests:e.tests.filter(((t,e,n)=>n.findIndex((e=>e.OPTIONS.name===t.OPTIONS.name))===e)).map((e=>{const n=e.OPTIONS.params&&t?Ze(Object.assign({},e.OPTIONS.params),t):e.OPTIONS.params;return{name:e.OPTIONS.name,params:n}}))}}get"~standard"(){const t=this;return{version:1,vendor:"yup",async validate(e){try{return{value:await t.validate(e,{abortEarly:!1})}}catch(t){if(t instanceof Fe)return{issues:Je(t)};throw t}}}}}We.prototype.h=!0;for(const t of["validate","validateSync"])We.prototype[`${t}At`]=function(e,n,r={}){const{parent:s,parentPath:i,schema:a}=Ie(this,e,n,r.context);return a[t](s&&s[i],Object.assign({},r,{parent:s,path:e}))};for(const t of["equals","is"])We.prototype[t]=We.prototype.oneOf;for(const t of["not","nope"])We.prototype[t]=We.prototype.notOneOf;function Ge(){return new Ke}class Ke extends We{constructor(){super({type:"boolean",check:t=>(t instanceof Boolean&&(t=t.valueOf()),"boolean"==typeof t)}),this.withMutation((()=>{this.transform(((t,e)=>{if(this.spec.coerce&&!this.isType(t)){if(/^(true|1)$/i.test(String(t)))return!0;if(/^(false|0)$/i.test(String(t)))return!1}return t}))}))}isTrue(t=Pe.isValue){return this.test({message:t,name:"is-value",exclusive:!0,params:{value:"true"},test:t=>Re(t)||!0===t})}isFalse(t=Pe.isValue){return this.test({message:t,name:"is-value",exclusive:!0,params:{value:"false"},test:t=>Re(t)||!1===t})}default(t){return super.default(t)}defined(t){return super.defined(t)}optional(){return super.optional()}required(t){return super.required(t)}notRequired(){return super.notRequired()}nullable(){return super.nullable()}nonNullable(t){return super.nonNullable(t)}strip(t){return super.strip(t)}}Ge.prototype=Ke.prototype;const Qe=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function Xe(t){var e,n;const r=Qe.exec(t);return r?{year:Ye(r[1]),month:Ye(r[2],1)-1,day:Ye(r[3],1),hour:Ye(r[4]),minute:Ye(r[5]),second:Ye(r[6]),millisecond:r[7]?Ye(r[7].substring(0,3)):0,precision:null!=(e=null==(n=r[7])?void 0:n.length)?e:void 0,z:r[8]||void 0,plusMinus:r[9]||void 0,hourOffset:Ye(r[10]),minuteOffset:Ye(r[11])}:null}function Ye(t,e=0){return Number(t)||e}let tn=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,en=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,nn=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,sn=new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"),rn=t=>Re(t)||t===t.trim(),an={}.toString();function on(){return new ln}class ln extends We{constructor(){super({type:"string",check:t=>(t instanceof String&&(t=t.valueOf()),"string"==typeof t)}),this.withMutation((()=>{this.transform(((t,e)=>{if(!this.spec.coerce||this.isType(t))return t;if(Array.isArray(t))return t;const n=null!=t&&t.toString?t.toString():t;return n===an?t:n}))}))}required(t){return super.required(t).withMutation((e=>e.test({message:t||Ee.required,name:"required",skipAbsent:!0,test:t=>!!t.length})))}notRequired(){return super.notRequired().withMutation((t=>(t.tests=t.tests.filter((t=>"required"!==t.OPTIONS.name)),t)))}length(t,e=_e.length){return this.test({message:e,name:"length",exclusive:!0,params:{length:t},skipAbsent:!0,test(e){return e.length===this.resolve(t)}})}min(t,e=_e.min){return this.test({message:e,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(e){return e.length>=this.resolve(t)}})}max(t,e=_e.max){return this.test({name:"max",exclusive:!0,message:e,params:{max:t},skipAbsent:!0,test(e){return e.length<=this.resolve(t)}})}matches(t,e){let n,r,s=!1;return e&&("object"==typeof e?({excludeEmptyString:s=!1,message:n,name:r}=e):n=e),this.test({name:r||"matches",message:n||_e.matches,params:{regex:t},skipAbsent:!0,test:e=>""===e&&s||-1!==e.search(t)})}email(t=_e.email){return this.matches(tn,{name:"email",message:t,excludeEmptyString:!0})}url(t=_e.url){return this.matches(en,{name:"url",message:t,excludeEmptyString:!0})}uuid(t=_e.uuid){return this.matches(nn,{name:"uuid",message:t,excludeEmptyString:!1})}datetime(t){let e,n,r="";return t&&("object"==typeof t?({message:r="",allowOffset:e=!1,precision:n}=t):r=t),this.matches(sn,{name:"datetime",message:r||_e.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:r||_e.datetime_offset,params:{allowOffset:e},skipAbsent:!0,test:t=>{if(!t||e)return!0;const n=Xe(t);return!!n&&!!n.z}}).test({name:"datetime_precision",message:r||_e.datetime_precision,params:{precision:n},skipAbsent:!0,test:t=>{if(!t||null==n)return!0;const e=Xe(t);return!!e&&e.precision===n}})}ensure(){return this.default("").transform((t=>null===t?"":t))}trim(t=_e.trim){return this.transform((t=>null!=t?t.trim():t)).test({message:t,name:"trim",test:rn})}lowercase(t=_e.lowercase){return this.transform((t=>Re(t)?t:t.toLowerCase())).test({message:t,name:"string_case",exclusive:!0,skipAbsent:!0,test:t=>Re(t)||t===t.toLowerCase()})}uppercase(t=_e.uppercase){return this.transform((t=>Re(t)?t:t.toUpperCase())).test({message:t,name:"string_case",exclusive:!0,skipAbsent:!0,test:t=>Re(t)||t===t.toUpperCase()})}}function cn(){return new un}on.prototype=ln.prototype;class un extends We{constructor(){super({type:"number",check:t=>(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&!(t=>t!=+t)(t))}),this.withMutation((()=>{this.transform(((t,e)=>{if(!this.spec.coerce)return t;let n=t;if("string"==typeof n){if(n=n.replace(/\s/g,""),""===n)return NaN;n=+n}return this.isType(n)||null===n?n:parseFloat(n)}))}))}min(t,e=Ce.min){return this.test({message:e,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(e){return e>=this.resolve(t)}})}max(t,e=Ce.max){return this.test({message:e,name:"max",exclusive:!0,params:{max:t},skipAbsent:!0,test(e){return e<=this.resolve(t)}})}lessThan(t,e=Ce.lessThan){return this.test({message:e,name:"max",exclusive:!0,params:{less:t},skipAbsent:!0,test(e){return e<this.resolve(t)}})}moreThan(t,e=Ce.moreThan){return this.test({message:e,name:"min",exclusive:!0,params:{more:t},skipAbsent:!0,test(e){return e>this.resolve(t)}})}positive(t=Ce.positive){return this.moreThan(0,t)}negative(t=Ce.negative){return this.lessThan(0,t)}integer(t=Ce.integer){return this.test({name:"integer",message:t,skipAbsent:!0,test:t=>Number.isInteger(t)})}truncate(){return this.transform((t=>Re(t)?t:0|t))}round(t){var e;let n=["ceil","floor","round","trunc"];if("trunc"===(t=(null==(e=t)?void 0:e.toLowerCase())||"round"))return this.truncate();if(-1===n.indexOf(t.toLowerCase()))throw new TypeError("Only valid options for round() are: "+n.join(", "));return this.transform((e=>Re(e)?e:Math[t](e)))}}cn.prototype=un.prototype;let hn=new Date("");class dn extends We{constructor(){super({type:"date",check(t){return e=t,"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(t.getTime());var e}}),this.withMutation((()=>{this.transform(((t,e)=>!this.spec.coerce||this.isType(t)||null===t?t:(t=function(t){const e=Xe(t);if(!e)return Date.parse?Date.parse(t):Number.NaN;if(void 0===e.z&&void 0===e.plusMinus)return new Date(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond).valueOf();let n=0;return"Z"!==e.z&&void 0!==e.plusMinus&&(n=60*e.hourOffset+e.minuteOffset,"+"===e.plusMinus&&(n=0-n)),Date.UTC(e.year,e.month,e.day,e.hour,e.minute+n,e.second,e.millisecond)}(t),isNaN(t)?dn.INVALID_DATE:new Date(t))))}))}prepareParam(t,e){let n;if(qe.isRef(t))n=t;else{let r=this.cast(t);if(!this.A(r))throw new TypeError(`\`${e}\` must be a Date or a value that can be \`cast()\` to a Date`);n=r}return n}min(t,e=Oe.min){let n=this.prepareParam(t,"min");return this.test({message:e,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(t){return t>=this.resolve(n)}})}max(t,e=Oe.max){let n=this.prepareParam(t,"max");return this.test({message:e,name:"max",exclusive:!0,params:{max:t},skipAbsent:!0,test(t){return t<=this.resolve(n)}})}}function fn(t,e){let n=1/0;return t.some(((t,r)=>{var s;if(null!=(s=e.path)&&s.includes(t))return n=r,!0})),n}function pn(t){return(e,n)=>fn(t,e)-fn(t,n)}dn.INVALID_DATE=hn;const mn=(t,e,n)=>{if("string"!=typeof t)return t;let r=t;try{r=JSON.parse(t)}catch(t){}return n.isType(r)?r:t};function gn(t){if("fields"in t){const e={};for(const[n,r]of Object.entries(t.fields))e[n]=gn(r);return t.setFields(e)}if("array"===t.type){const e=t.optional();return e.innerType&&(e.innerType=gn(e.innerType)),e}return"tuple"===t.type?t.optional().clone({types:t.spec.types.map(gn)}):"optional"in t?t.optional():t}let bn=t=>"[object Object]"===Object.prototype.toString.call(t);function xn(t,e){let n=Object.keys(t.fields);return Object.keys(e).filter((t=>-1===n.indexOf(t)))}const vn=pn([]);function $n(t){return new wn(t)}class wn extends We{constructor(t){super({type:"object",check:t=>bn(t)||"function"==typeof t}),this.fields=Object.create(null),this.P=vn,this.T=[],this.D=[],this.withMutation((()=>{t&&this.shape(t)}))}_(t,e={}){var n;let r=super._(t,e);if(void 0===r)return this.getDefault(e);if(!this.A(r))return r;let s=this.fields,i=null!=(n=e.stripUnknown)?n:this.spec.noUnknown,a=[].concat(this.T,Object.keys(r).filter((t=>!this.T.includes(t)))),o={},l=Object.assign({},e,{parent:o,M:e.M||!1}),c=!1;for(const t of a){let n=s[t],a=t in r,u=r[t];if(n){let s;l.path=(e.path?`${e.path}.`:"")+t,n=n.resolve({value:u,context:e.context,parent:o});let i=n instanceof We?n.spec:void 0,a=null==i?void 0:i.strict;if(null!=i&&i.strip){c=c||t in r;continue}s=e.M&&a?u:n.cast(u,l),void 0!==s&&(o[t]=s)}else a&&!i&&(o[t]=u);a===t in o&&o[t]===u||(c=!0)}return c?o:r}C(t,e={},n,r){let{from:s=[],originalValue:i=t,recursive:a=this.spec.recursive}=e;e.from=[{schema:this,value:i},...s],e.M=!0,e.originalValue=i,super.C(t,e,n,((t,s)=>{if(!a||!bn(s))return void r(t,s);i=i||s;let o=[];for(let t of this.T){let n=this.fields[t];n&&!qe.isRef(n)&&o.push(n.asNestedTest({options:e,key:t,parent:s,parentPath:e.path,originalParent:i}))}this.runTests({tests:o,value:s,originalValue:i,options:e},n,(e=>{r(e.sort(this.P).concat(t),s)}))}))}clone(t){const e=super.clone(t);return e.fields=Object.assign({},this.fields),e.T=this.T,e.D=this.D,e.P=this.P,e}concat(t){let e=super.concat(t),n=e.fields;for(let[t,e]of Object.entries(this.fields)){const r=n[t];n[t]=void 0===r?e:r}return e.withMutation((e=>e.setFields(n,[...this.D,...t.D])))}O(t){if("default"in this.spec)return super.O(t);if(!this.T.length)return;let e={};return this.T.forEach((n=>{var r;const s=this.fields[n];let i=t;null!=(r=i)&&r.value&&(i=Object.assign({},i,{parent:i.value,value:i.value[n]})),e[n]=s&&"getDefault"in s?s.getDefault(i):void 0})),e}setFields(t,e){let n=this.clone();return n.fields=t,n.T=function(t,e=[]){let n=[],r=new Set,s=new Set(e.map((([t,e])=>`${t}-${e}`)));function i(t,e){let i=ce.split(t)[0];r.add(i),s.has(`${e}-${i}`)||n.push([e,i])}for(const e of Object.keys(t)){let n=t[e];r.add(e),qe.isRef(n)&&n.isSibling?i(n.path,e):De(n)&&"deps"in n&&n.deps.forEach((t=>i(t,e)))}return de.array(Array.from(r),n).reverse()}(t,e),n.P=pn(Object.keys(t)),e&&(n.D=e),n}shape(t,e=[]){return this.clone().withMutation((n=>{let r=n.D;return e.length&&(Array.isArray(e[0])||(e=[e]),r=[...n.D,...e]),n.setFields(Object.assign(n.fields,t),r)}))}partial(){const t={};for(const[e,n]of Object.entries(this.fields))t[e]="optional"in n&&n.optional instanceof Function?n.optional():n;return this.setFields(t)}deepPartial(){return gn(this)}pick(t){const e={};for(const n of t)this.fields[n]&&(e[n]=this.fields[n]);return this.setFields(e,this.D.filter((([e,n])=>t.includes(e)&&t.includes(n))))}omit(t){const e=[];for(const n of Object.keys(this.fields))t.includes(n)||e.push(n);return this.pick(e)}from(t,e,n){let r=ce.getter(t,!0);return this.transform((s=>{if(!s)return s;let i=s;return((t,e)=>{const n=[...ce.normalizePath(e)];if(1===n.length)return n[0]in t;let r=n.pop(),s=ce.getter(ce.join(n),!0)(t);return!(!s||!(r in s))})(s,t)&&(i=Object.assign({},s),n||delete i[t],i[e]=r(s)),i}))}json(){return this.transform(mn)}exact(t){return this.test({name:"exact",exclusive:!0,message:t||ze.exact,test(t){if(null==t)return!0;const e=xn(this.schema,t);return 0===e.length||this.createError({params:{properties:e.join(", ")}})}})}stripUnknown(){return this.clone({noUnknown:!0})}noUnknown(t=!0,e=ze.noUnknown){"boolean"!=typeof t&&(e=t,t=!0);let n=this.test({name:"noUnknown",exclusive:!0,message:e,test(e){if(null==e)return!0;const n=xn(this.schema,e);return!t||0===n.length||this.createError({params:{unknown:n.join(", ")}})}});return n.spec.noUnknown=t,n}unknown(t=!0,e=ze.noUnknown){return this.noUnknown(!t,e)}transformKeys(t){return this.transform((e=>{if(!e)return e;const n={};for(const r of Object.keys(e))n[t(r)]=e[r];return n}))}camelCase(){return this.transformKeys(ue.camelCase)}snakeCase(){return this.transformKeys(ue.snakeCase)}constantCase(){return this.transformKeys((t=>ue.snakeCase(t).toUpperCase()))}describe(t){const e=(t?this.resolve(t):this).clone(),n=super.describe(t);n.fields={};for(const[s,i]of Object.entries(e.fields)){var r;let e=t;null!=(r=e)&&r.value&&(e=Object.assign({},e,{parent:e.value,value:e.value[s]})),n.fields[s]=i.describe(e)}return n}}function yn(t,e){if(!e||!t)return{};try{const n=function(t){const e={};for(const[n,r]of Object.entries(t)){let t=on();"number"===r.type?t=cn():"email"===r.type?t=on().email():"boolean"===r.type&&(t=Ge()),r.required&&(t=t.required(`${n} is required`)),void 0!==r.min&&(t="number"===r.type?t.min(r.min,`${n} must be at least ${r.min}`):t.min(r.min,`${n} must be at least ${r.min} characters`)),void 0!==r.max&&(t="number"===r.type?t.max(r.max,`${n} must be at most ${r.max}`):t.max(r.max,`${n} must be at most ${r.max} characters`)),e[n]=t}return $n().shape(e)}(e);return n.validateSync(t,{abortEarly:!1}),{}}catch(t){const e={};return t.inner?t.inner.forEach((t=>{e[t.path]=t.message})):t.path&&(e[t.path]=t.message),e}}$n.prototype=wn.prototype;class kn extends o{constructor(){super(),this.currentFormData={},this.dirty=!1,this.submitted=!1,this.schema=null,this.isValid=!0,this.errors={}}connectedCallback(){super.connectedCallback(),this.dataPath=this.getAttribute("data"),this.formName=this.getAttribute("name")||"defaultForm",this.onStateChange(this.getCurrentState())}onStateChange(t){const e=this.dataPath.replace("global_","");this.currentFormData=t[e]||{};const n=this.getAttribute("schema");n&&(this.schema=t.schemas?.[n]),this.schema&&this.dirty?(this.errors=yn(this.currentFormData,this.schema),this.isValid=0===Object.keys(this.errors).length):this.dirty||(this.errors={},this.isValid=!0),d(`forms.${this.formName}`,this.currentFormData),this.getAttribute("content")&&!this.querySelector("input")&&this.renderForm(t),this.updateFormInputs(t),this.updateButtonStates()}renderForm(t){let e=this.getAttribute("content");if(e=e.replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&#10;/g,"\n").replace(/&#13;/g,"\r").replace(/&#9;/g,"\t"),!e.trim())return void(this.innerHTML="");const n=function(t){const e=document.createElement("div");e.innerHTML=t;const n=e.querySelectorAll("input, select, textarea");for(const t of n){const e=t.getAttribute("label"),n=t.getAttribute("name"),r=t.getAttribute("type")||t.tagName.toLowerCase(),s=t.getAttribute("id")||n;if(!e||!n)continue;const i=document.createElement("div");if(i.className="form-group","toggle"===r)i.innerHTML=`\n\t\t\t\t<div class="toggle-group">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype="checkbox"\n\t\t\t\t\t\tname="${n}"\n\t\t\t\t\t\tid="${s}"\n\t\t\t\t\t\tclass="toggle-input"\n\t\t\t\t\t/>\n\t\t\t\t\t<label for="${s}" class="toggle-label">\n\t\t\t\t\t\t<span class="toggle-text">${e}</span>\n\t\t\t\t\t\t<span class="toggle-switch">\n\t\t\t\t\t\t\t<span class="toggle-thumb"></span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t`;else if("select"===r){const r=t.outerHTML;i.innerHTML=`\n\t\t\t\t<label for="${s}">${e}</label>\n\t\t\t\t<div class="select-wrap">\n\t\t\t\t\t${r}\n\t\t\t\t</div>\n\t\t\t\t<span class="error-message" data-field="${n}"></span>\n\t\t\t`}else if("textarea"===r){const r=t.outerHTML;i.innerHTML=`\n\t\t\t\t<label for="${s}">${e}</label>\n\t\t\t\t<div class="textarea-wrap">\n\t\t\t\t\t${r}\n\t\t\t\t</div>\n\t\t\t\t<span class="error-message" data-field="${n}"></span>\n\t\t\t`}else{const r=t.outerHTML;i.innerHTML=`\n\t\t\t\t<label for="${s}">${e}</label>\n\t\t\t\t${r}\n\t\t\t\t<span class="error-message" data-field="${n}"></span>\n\t\t\t`}t.parentNode.replaceChild(i,t)}const r=e.querySelectorAll("x-button");if(r.length>0){const t=document.createElement("div");t.className="form-actions";for(const e of r)t.appendChild(e);e.appendChild(t)}return e.innerHTML}(e);this.innerHTML=n;const r=this.querySelectorAll("input, select, textarea");for(const t of r){const e=t.getAttribute("name");if(!e)continue;const n="checkbox"===t.type||"radio"===t.type?"change":"input";t.addEventListener(n,(n=>{const r="checkbox"===t.type?t.checked:t.value;this.dirty=!0,t.setAttribute("data-touched","true");const s={...this.currentFormData,[e]:r};this.currentFormData=s,this.schema&&(this.errors=yn(s,this.schema),this.isValid=0===Object.keys(this.errors).length,this.updateFormInputs(this.getCurrentState()),this.updateButtonStates()),d(this.dataPath.replace("global_",""),s)}))}this.removeAttribute("content")}updateFormInputs(t){const e=this.querySelectorAll("input, select, textarea");for(const n of e){const e=n.getAttribute("name");if(!e)continue;const r=t[this.dataPath.replace("global_","")]?.[e];if(void 0!==r&&("checkbox"===n.type?n.checked=r:n.value=r),"checkbox"!==n.type&&"radio"!==n.type){const t=this.errors[e],r=n.hasAttribute("data-touched"),s=t&&(r||this.submitted),i=this.querySelector(`.error-message[data-field="${e}"]`);i&&(s?(i.textContent=t,i.style.display="block"):(i.textContent="",i.style.display="none")),s?(n.classList.add("error"),n.setAttribute("data-error",t)):(n.classList.remove("error"),n.removeAttribute("data-error"))}}}updateButtonStates(){const t=this.querySelectorAll("x-button");for(const e of t){const t=this.areAllTouchedFieldsValid();this.dirty&&t?e.removeAttribute("disabled"):e.setAttribute("disabled","")}}areAllTouchedFieldsValid(){if(!this.schema||!this.dirty)return!0;const t=this.querySelectorAll("input, select, textarea");for(const e of t){const t=e.getAttribute("name");if(t&&"checkbox"!==e.type&&"radio"!==e.type&&e.hasAttribute("data-touched")&&this.errors[t])return!1}return!0}markAsSubmitted(){this.submitted=!0;const t=this.querySelectorAll("input, select, textarea");for(const e of t)e.setAttribute("data-touched","true");this.schema&&(this.errors=yn(this.currentFormData,this.schema),this.isValid=0===Object.keys(this.errors).length,this.updateFormInputs(this.getCurrentState()),this.updateButtonStates())}reset(){this.dirty=!1,this.submitted=!1,this.isValid=!0,this.errors={},this.currentFormData={};const t=this.querySelectorAll("input, select, textarea");for(const e of t)e.removeAttribute("data-touched");this.renderForm(this.getCurrentState()),this.updateButtonStates()}}const Sn=(t,e)=>{if("required"===t)return void(e.required=!0);const n=t.indexOf(":");if(-1===n)return void(e.type=t);const r=t.substring(0,n).trim(),s=t.substring(n+1).trim();let i=s;("min"!==r&&"max"!==r||(i=parseInt(s),!isNaN(i)))&&(e[r]=i)};class An extends o{connectedCallback(){super.connectedCallback(),this.processSchema()}processSchema(){const t=this.getAttribute("content"),e=this.getAttribute("name");if(!e)return void console.error("x-schema: name attribute is required");if(this.removeAttribute("content"),!t||!t.trim())return;const n=(t=>t.replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&#10;/g,"\n").replace(/&#13;/g,"\r").replace(/&#9;/g,"\t"))(t),r=(t=>{const e={};for(const n of t.split("\n")){const t=n.trim();if(!t)continue;const r=t.indexOf(":");if(-1===r)continue;const s=t.substring(0,r).trim(),i=t.substring(r+1).trim();if(!s||!i)continue;const a=i.split(",").map((t=>t.trim())),o={type:"string"};a.forEach((t=>Sn(t,o))),e[s]=o}return e})(n.trim());d(`schemas.${e}`,r)}}class Fn extends o{constructor(){super()}connectedCallback(){super.connectedCallback(),this.initializeTemplate(),this.renderContent()}onStateChange(t){this.renderContent()}initializeTemplate(){const t=this.getAttribute("template");if(!t)return void console.warn("x-fill: no template attribute provided");const e=document.getElementById(t);e?this.template=e.innerHTML:console.warn(`x-fill: template element with id "${t}" not found`)}getItemPath(){const t=this.getAttribute("item");return t?t.trim().startsWith("{")||t.trim().startsWith("[")?null:t.startsWith("global_")?t.substring(7):t:(console.warn("x-fill: no item attribute provided"),null)}getItemFromState(){const t=this.getItemPath();return t?p(t):null}renderContent(){const t=this.getItemPath();let e;if(null===t){const n=this.getAttribute("item");try{const t=n.replace(/&quot;/g,'"');e=JSON.parse(t)}catch(t){return void console.error("x-fill: failed to parse item JSON:",t)}}else e=p(t);if(!e)return console.warn("x-fill: item is null or undefined"),void(this.innerHTML="");if(!this.template)return;const n=this.processTemplate(this.template,e),r=document.createElement("div");for(r.innerHTML=n,this.innerHTML="";r.firstChild;)this.appendChild(r.firstChild)}processTemplate(t,e){let n=t.replace(/\{\{\s*item_([^}]+)\s*\}\}/g,((t,n)=>{const r=n.trim();return e[r]||""}));return n=n.replace(/\{\{\s*item\s*\}\}/g,(()=>null!=e?String(e):"")),n}}async function En(t={}){const e=t.router||t,n=t.state||{},r=t.hooks||{};!function(t=null){c.initialize(t)}(e),e&&"function"==typeof e.registerWithFramework&&await e.registerWithFramework(c),Object.entries(r).forEach((([t,e])=>{g(t,e)})),Object.keys(n).length>0&&Object.entries(n).forEach((([t,e])=>{c.set(t,e)})),function(){const t=[{name:"x-flow",class:A},{name:"x-page",class:F},{name:"x-navbar",class:E},{name:"x-content",class:_},{name:"x-box",class:C},{name:"x-breadcrumb",class:O},{name:"x-button",class:P},{name:"x-typography",class:z},{name:"x-include",class:N},{name:"x-link",class:T},{name:"x-map",class:D},{name:"x-icon",class:M},{name:"x-data",class:k},{name:"x-subscribe",class:S},{name:"x-fragment",class:j},{name:"x-viz-bar",class:q},{name:"x-viz-pie",class:R},{name:"x-viz-line",class:L},{name:"x-markdown",class:Xt},{name:"x-table",class:ne},{name:"x-form",class:kn},{name:"x-schema",class:An},{name:"x-modal",class:l},{name:"x-fill",class:Fn}];for(const{name:e,class:n}of t)customElements.get(e)||customElements.define(e,n)}(),e&&"function"==typeof e.triggerInitialNavigation&&await e.triggerInitialNavigation()}function _n(t={}){const{beforeEach:e,afterEach:n,basePath:r="",initialPath:s,activePathKey:i="activePath"}=t;return{beforeEach:e,afterEach:n,basePath:r,initialPath:s,activePathKey:i,async registerWithFramework(t){t.unregisterFlow("routerNavigate"),t.registerFlow({key:"routerNavigate"},"\n\t\t\t\t// Extract href from event context\n\t\t\t\tlet href = null;\n\t\t\t\t\n\t\t\t\t// Try to get href from different sources\n\t\t\t\tif (event.element && event.element.getAttribute) {\n\t\t\t\t\thref = event.element.getAttribute('href');\n\t\t\t\t}\n\t\t\t\tif (!href && event.data && event.data.href) {\n\t\t\t\t\thref = event.data.href;\n\t\t\t\t}\n\t\t\t\tif (!href && event.href) {\n\t\t\t\t\thref = event.href;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (!href) {\n\t\t\t\t\tconsole.warn('routerNavigate: No href found in event context');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Build route context\n\t\t\t\tconst currentPath = state.router?.currentPath || window.location.hash || '#/';\n\t\t\t\tconst toPath = href.startsWith('#') ? href : '#' + href;\n\t\t\t\t\n\t\t\t\tconst routeContext = {\n\t\t\t\t\tto: { path: toPath, href: href },\n\t\t\t\t\tfrom: { path: currentPath },\n\t\t\t\t\tcancel: () => { throw new Error('Navigation cancelled'); }\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t// Call beforeEach hook if provided (wrapped in requestAnimationFrame)\n\t\t\t\tif (typeof routerBeforeEach === 'function') {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tawait new Promise((resolve) => {\n\t\t\t\t\t\t\trequestAnimationFrame(async () => {\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tawait routerBeforeEach(routeContext);\n\t\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\t\t\tif (error.message === 'Navigation cancelled') {\n\t\t\t\t\t\t\t\t\t\tconsole.log('Navigation cancelled by beforeEach hook');\n\t\t\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tthrow error;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tif (error.message === 'Navigation cancelled') {\n\t\t\t\t\t\t\tconsole.log('Navigation cancelled by beforeEach hook');\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthrow error;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Update router state\n\t\t\t\tSetData('router.previousPath', currentPath);\n\t\t\t\tSetData('router.currentPath', toPath);\n\t\t\t\t\n\t\t\t\t// Call afterEach hook if provided (wrapped in requestAnimationFrame)\n\t\t\t\tif (typeof routerAfterEach === 'function') {\n\t\t\t\t\tawait new Promise((resolve) => {\n\t\t\t\t\t\trequestAnimationFrame(async () => {\n\t\t\t\t\t\t\tawait routerAfterEach(routeContext);\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t// Update activePath\n\t\t\t\tconst cleanPath = toPath.startsWith('#') ? toPath.substring(1) : toPath;\n\t\t\t\tSetData('activePath', cleanPath);\n\t\t\t\t");const e=this.initialPath||window.location.hash||"#/dashboard",n=e.startsWith("#")?e.substring(1):e;t.SetData("router.currentPath",e),t.SetData("router.previousPath",""),t.SetData(this.activePathKey,n),this.j=e},async triggerInitialNavigation(){if(this.j){const t={to:{path:this.j,href:this.j},from:{path:""},cancel:()=>{throw new Error("Navigation cancelled")}};if("function"==typeof this.beforeEach)try{await new Promise((e=>{requestAnimationFrame((async()=>{try{await this.beforeEach(t),e()}catch(t){if("Navigation cancelled"!==t.message)throw t;e()}}))}))}catch(t){if("Navigation cancelled"===t.message)return;throw t}"function"==typeof this.afterEach&&await new Promise((e=>{requestAnimationFrame((async()=>{await this.afterEach(t),e()}))}))}},updateActivePath(t){frameworkCore&&frameworkCore.SetData(this.activePathKey,t)},getCurrentPath:()=>frameworkCore?.get("router.currentPath"),getPreviousPath:()=>frameworkCore?.get("router.previousPath")}}export{v as Alert,o as BaseUIComponent,$ as Confirm,f as GetData,b as Navigate,x as Query,_n as Router,d as SetData,h as SetState,w as Trigger,p as getState,t as html,En as initializeFramework,g as registerComponentHook,u as setState,m as subscribeToState};
//# sourceMappingURL=./htmlNext.min.map