/**
 * Minified by jsDelivr using Terser v5.39.0.
 * Original file: /npm/@crosshj/html-next@0.0.24/dist/htmlNext.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
const t=(t,...e)=>{let n="";for(let s=0;s<t.length;s++)n+=t[s],s<e.length&&(n+=e[s]);return n},e={red:"#f44336",pink:"#e91e63",purple:"#9c27b0",deepPurple:"#673ab7",indigo:"#3f51b5",blue:"#2196f3",lightBlue:"#03a9f4",cyan:"#00bcd4",teal:"#009688",green:"#4caf50",lightGreen:"#8bc34a",lime:"#cddc39",yellow:"#ffeb3b",amber:"#ffc107",orange:"#ff9800",deepOrange:"#ff5722",brown:"#795548",grey:"#9e9e9e",blueGrey:"#607d8b"},n=t=>t&&"string"==typeof t?t.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&#10;/g,"\n").replace(/&#13;/g,"\r").replace(/&#9;/g,"\t"):"",s=t=>{const n=t.match(/^(\w+)(A\d+)$/);if(n){const[,t,s]=n,r=e[t];if(!r)return"#9e9e9e";const i={A100:20,A200:40,A400:60,A700:80}[s]||50;return`color-mix(in srgb, ${r} ${i}%, white ${100-i}%)`}const s=t.match(/^([a-zA-Z]+)(\d{2,3})$/);if(s){const[,t,n]=s,r=e[t];if(!r)return"#9e9e9e";const i=parseInt(n);if(500===i)return r;if(i<=400){const t={50:10,100:20,200:30,300:40,400:50}[i]||50;return`color-mix(in srgb, ${r} ${t}%, white ${100-t}%)`}if(i>=600){const t={600:80,700:70,800:60,900:50}[i]||50;return`color-mix(in srgb, ${r} ${t}%, black ${100-t}%)`}}return"#9e9e9e"},i=t=>s(t);function r(t,e){if("string"!=typeof t)return t;if(!e)return t;const n=t.startsWith("DEBUG "),s=n?t.substring(6):t;n&&console.log("ðŸ› DEBUG parseConditionalValue:",{originalValue:t,cleanValue:s,currentState:e});const r=s.match(/^WHEN\s+(.+?)\s+IS\s+(.+?)\s+THEN\s+(.+?)\s+ELSE\s+(.+)$/);if(r){const[,t,s,i,a]=r,l=o(t,s,e,n),c=l?i:a,u=c.replace(/^['"]|['"]$/g,"");return n&&console.log("ðŸ› DEBUG comparison evaluation:",{leftSide:t,rightSide:s,thenValue:i,elseValue:a,comparisonResult:l,rawResult:c,result:u,resolvedValue:u}),u}const l=s.match(/^WHEN\s+(.+?)\s+THEN\s+(.+?)\s+ELSE\s+(.+)$/);if(l){const[,t,s,r]=l,i=a(t,e)?s:r,o=i.replace(/^['"]|['"]$/g,"");return n&&console.log("ðŸ› DEBUG conditional evaluation:",{condition:t,thenValue:s,elseValue:r,rawResult:i,result:o,conditionResult:a(t,e),resolvedValue:o}),o}const c=i(s);return"#9e9e9e"!==c||"grey500"===s?(n&&console.log("ðŸ› DEBUG color token resolved:",{originalValue:t,cleanValue:s,resolvedColor:c}),c):(n&&console.log("ðŸ› DEBUG no conditional pattern matched, returning original value"),t)}function a(t,e){if(!e)return!1;const n=t.trim();return n.startsWith("global_")?!!e[n.substring(7)]:!!e[n]}function o(t,e,n,s=!1){if(!n)return!1;const r=t.trim().startsWith("global_")?n[t.trim().substring(7)]:t.trim();if(e.includes("{{")&&e.includes("}}"))return s&&console.log(`âš ï¸ Template variable detected in comparison: ${e}`),!1;const i=e.trim().startsWith("global_")?n[e.trim().substring(7)]:e.trim(),a=r===i;return s&&console.log(`ðŸ” Comparison: ${t} (${JSON.stringify(r)}) IS ${e} (${JSON.stringify(i)}) = ${a}`),a}function l(t){const e=new Set;return Array.from(t).forEach((t=>{const n=t.value,s=n.startsWith("DEBUG ");s&&console.log("ðŸ› DEBUG extractStateReferences found DEBUG attribute:",{attributeName:t.name,attributeValue:n,element:t.ownerElement?.tagName});const r=n.match(/global_(\w+)/g);r&&r.forEach((t=>{const n=t.substring(7);e.add(n),s&&console.log("ðŸ› DEBUG will subscribe to state key:",n)}))})),Array.from(e)}function c(t){if(!t||"string"!=typeof t)return"";const e="___CODE_BLOCK_PLACEHOLDER___",n=[];let s=t;s=s.replace(/```[\s\S]*?```/g,(t=>{const s=n.length;return n.push(t),`${e}${s}`}));let r=s;const i=/<x-markdown([^>]*)>/gi;let a;for(;null!==(a=i.exec(r));){const t=a[0],e=a[1],n=a.index;if(e.includes("content="))continue;const i=r.indexOf("</x-markdown>",n+t.length);if(-1===i)continue;let o=r.substring(n+t.length,i),l=o,c=0;for(;;){const t=l.slice(c).match(/<x-map([^>]*)>/);if(!t)break;const e=t[0],n=t[1],s=c+t.index,r=s+e.length;if(n.includes("content=")){c=r;continue}const i=l.slice(r).match(/<\/x-map>/);if(!i){c=r;continue}const a=r+i.index,o=a+i[0].length,u=l.slice(r,a);if(u.includes("<template>")){c=o;continue}const h=`<x-map${n}><template>${u}</template></x-map>`;l=l.slice(0,s)+h+l.slice(o),c=s+h.length}o=l;const u=o.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\n/g,"&#10;").replace(/\r/g,"&#13;").replace(/\t/g,"&#9;"),h=t+s.substring(n+t.length,i)+"</x-markdown>",p=`<x-markdown${e} content="${u}"></x-markdown>`;r=r.replace(h,p)}r=r.replace(new RegExp(`${e}(\\d+)`,"g"),((t,e)=>n[parseInt(e)].replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\n/g,"&#10;").replace(/\r/g,"&#13;").replace(/\t/g,"&#9;")));const o="___MARKDOWN_PLACEHOLDER___",l=[];let c=r;c=c.replace(/<x-markdown[^>]*content="[^"]*"[^>]*><\/x-markdown>/gi,(t=>{const e=l.length;return l.push(t),`${o}${e}`})),c=c.replace(/<x-table([^>]*)>([\s\S]*?)<\/x-table>/gi,((t,e,n)=>`<x-table${e} content="${n.replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\n/g,"&#10;").replace(/\r/g,"&#13;").replace(/\t/g,"&#9;")}"></x-table>`)),r=c.replace(new RegExp(`${o}(\\d+)`,"g"),((t,e)=>l[parseInt(e)]));const u="___SCHEMA_MARKDOWN_PLACEHOLDER___",h=[];let p=r;p=p.replace(/<x-markdown[^>]*content="[^"]*"[^>]*><\/x-markdown>/gi,(t=>{const e=h.length;return h.push(t),`${u}${e}`})),p=p.replace(/<x-schema([^>]*)>([\s\S]*?)<\/x-schema>/gi,((t,e,n)=>`<x-schema${e} content="${n.replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\n/g,"&#10;").replace(/\r/g,"&#13;").replace(/\t/g,"&#9;")}"></x-schema>`)),r=p.replace(new RegExp(`${u}(\\d+)`,"g"),((t,e)=>h[parseInt(e)]));const d="___FORM_MARKDOWN_PLACEHOLDER___",f=[];let g=r;g=g.replace(/<x-markdown[^>]*content="[^"]*"[^>]*><\/x-markdown>/gi,(t=>{const e=f.length;return f.push(t),`${d}${e}`})),g=g.replace(/<x-form([^>]*)>([\s\S]*?)<\/x-form>/gi,((t,e,n)=>`<x-form${e} content="${n.replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\n/g,"&#10;").replace(/\r/g,"&#13;").replace(/\t/g,"&#9;")}"></x-form>`)),r=g.replace(new RegExp(`${d}(\\d+)`,"g"),((t,e)=>f[parseInt(e)]));const m="___FLOW_MARKDOWN_PLACEHOLDER___",b=[];let x=r;x=x.replace(/<x-markdown[^>]*content="[^"]*"[^>]*><\/x-markdown>/gi,(t=>{const e=b.length;return b.push(t),`${m}${e}`})),x=x.replace(/<x-flow([^>]*)>([\s\S]*?)<\/x-flow>/gi,((t,e,n)=>`<x-flow${e} content="${n.replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\n/g,"&#10;").replace(/\r/g,"&#13;").replace(/\t/g,"&#9;")}"></x-flow>`)),r=x.replace(new RegExp(`${m}(\\d+)`,"g"),((t,e)=>b[parseInt(e)]));const y="___MAP_MARKDOWN_PLACEHOLDER___",k=[];let v=r;return v=v.replace(/<x-markdown[^>]*content="[^"]*"[^>]*><\/x-markdown>/gi,(t=>{const e=k.length;return k.push(t),`${y}${e}`})),v=v.replace(/<x-map([^>]*)>([\s\S]*?)<\/x-map>/gi,((t,e,n)=>e.includes("content=")||n.includes("<template>")?t:`<x-map${e}><template>${n}</template></x-map>`)),r=v.replace(new RegExp(`${y}(\\d+)`,"g"),((t,e)=>k[parseInt(e)])),r}function u(t){if(!t||"string"!=typeof t)return"";let e=t.replace(/<script[^>]*type="module"[^>]*>[\s\S]*?<\/script>/gi,"");if(e=e.replace(/<script[^>]*src="[^"]*vite[^"]*"[^>]*>[\s\S]*?<\/script>/gi,""),e=e.replace(/<script[^>]*src="[^"]*\/src\/[^"]*"[^>]*>[\s\S]*?<\/script>/gi,""),e=e.replace(/<link[^>]*rel="modulepreload"[^>]*>/gi,""),e=e.replace(/\n\s*\n\s*\n/g,"\n\n"),e.trim())try{e=c(e)}catch(t){console.error("Error transforming content elements:",t)}return e}class h extends HTMLElement{constructor(){super(),this.stateSubscriptions=new Map,this.initialState=null,this.originalAttributes=new Map,this.setupStateSubscriptions()}connectedCallback(){this.initialState=this.getCurrentState(),this.storeOriginalAttributes(),this.applySxStyles(),this.applyConditionalAttributes()}disconnectedCallback(){this.stateSubscriptions.forEach((t=>t())),this.stateSubscriptions.clear()}getCurrentState(){return"undefined"!=typeof window&&window.state?{...window.state}:{}}storeOriginalAttributes(){Array.from(this.attributes).forEach((t=>{this.originalAttributes.set(t.name,t.value)}))}setupStateSubscriptions(){l(this.attributes).forEach((t=>{if("undefined"!=typeof window&&window.subscribeToState){const e=window.subscribeToState(t,(t=>{this.handleStateChange(t.state)}));this.stateSubscriptions.set(t,e)}}))}handleStateChange(t){this.initialState=t||this.getCurrentState(),this.applySxStyles(),this.applyConditionalAttributes(),this.onStateChange(t)}onStateChange(t){}applyConditionalAttributes(){this.originalAttributes.forEach(((t,e)=>{if(!e.startsWith("sx:")&&(t.includes("global_")||t.includes("WHEN ")||t.includes("DEBUG "))){t.startsWith("DEBUG ");const n=r(t,this.initialState);"className"!==e&&"class"!==e||(this.className=n),this.setAttribute(e,n)}}))}applySxStyles(){const t={};this.originalAttributes.forEach(((e,n)=>{if(n.startsWith("sx:")){const s=n.substring(3),i=r(e,this.initialState),a=this.expandShorthandProperty(s,i);Object.assign(t,a)}})),Object.entries(t).forEach((([t,e])=>{["opacity","zIndex","fontWeight","lineHeight"].includes(t)&&"string"==typeof e&&!isNaN(e)?this.style[t]=parseFloat(e):this.style.setProperty(t,e)})),Array.from(this.attributes).forEach((t=>{t.name.startsWith("sx:")&&this.removeAttribute(t.name)}))}expandShorthandProperty(t,e){const n={},s={m:"margin",mt:"margin-top",mr:"margin-right",mb:"margin-bottom",ml:"margin-left",mx:"margin-inline",my:"margin-block",p:"padding",pt:"padding-top",pr:"padding-right",pb:"padding-bottom",pl:"padding-left",px:"padding-inline",py:"padding-block",bgcolor:"background-color",bg:"background-color"}[t]||t,r=["gap","flex-gap","row-gap","column-gap","grid-row-gap","grid-column-gap","grid-gap","margin","padding","top","right","bottom","left","width","height","min-width","min-height","max-width","max-height"].some((t=>s.includes(t)));return n[s]=r?/^\d+(\.\d+)?$/.test(i=e)?8*parseFloat(i)+"px":i:e,n;var i}}class d extends h{constructor(){super(),this.isOpen=!1,this.resolvePromise=null,this.overlay=null,this.modal=null}connectedCallback(){super.connectedCallback(),this.render()}disconnectedCallback(){this.overlay&&this.overlay.removeEventListener("click",this.handleOverlayClick),this.modal&&this.modal.removeEventListener("keydown",this.handleKeydown),super.disconnectedCallback()}render(){const e=this.getAttribute("title")||"",n=this.getAttribute("message")||"",s=this.getAttribute("type")||"alert",r=this.getAttribute("confirmText")||"OK",i=this.getAttribute("cancelText")||"Cancel";this.innerHTML=t`
			<div class="modal-overlay" style="display: none;">
				<div class="modal-container">
					<div class="modal-content">
						${e?t`<div class="modal-header">
									<h3 class="modal-title">${e}</h3>
							  </div>`:""}
						<div class="modal-body">
							<p class="modal-message">${n}</p>
						</div>
						<div class="modal-footer">
							${"confirm"===s?t`
										<button
											class="modal-button modal-button-cancel"
											type="button"
										>
											${i}
										</button>
								  `:""}
							<button class="modal-button modal-button-confirm" type="button">
								${r}
							</button>
						</div>
					</div>
				</div>
			</div>
		`,this.overlay=this.querySelector(".modal-overlay"),this.modal=this.querySelector(".modal-container"),this.setupEventListeners()}setupEventListeners(){if(!this.overlay||!this.modal)return;this.handleOverlayClick&&this.overlay.removeEventListener("click",this.handleOverlayClick),this.handleKeydown&&document.body.removeEventListener("keydown",this.handleKeydown),this.handleOverlayClick=t=>{t.target===this.overlay&&"alert"===this.getAttribute("type")&&this.close(!1)},this.overlay.addEventListener("click",this.handleOverlayClick),this.handleKeydown=t=>{"Escape"===t.key&&"alert"===this.getAttribute("type")&&this.close(!1)},document.body.addEventListener("keydown",this.handleKeydown);const t=this.querySelector(".modal-button-confirm"),e=this.querySelector(".modal-button-cancel");if(t){const e=t.cloneNode(!0);t.parentNode.replaceChild(e,t),e.addEventListener("click",(()=>this.close(!0)))}if(e){const t=e.cloneNode(!0);e.parentNode.replaceChild(t,e),t.addEventListener("click",(()=>this.close(!1)))}}show(){this.isOpen=!0,this.overlay.style.display="flex",this.modal&&(this.modal.style.display="flex"),document.body.style.overflow="hidden",this.modal.focus(),this.modal.setAttribute("tabindex","-1")}hide(){this.isOpen=!1,this.overlay.style.display="none",document.body.style.overflow=""}close(t){this.handleKeydown&&document.body.removeEventListener("keydown",this.handleKeydown),this.handleOverlayClick&&this.overlay.removeEventListener("click",this.handleOverlayClick),this.resolvePromise&&(this.resolvePromise(t),this.resolvePromise=null)}hideContent(){this.isOpen=!1,this.modal&&(this.modal.style.display="none")}dispose(){this.hide(),setTimeout((()=>{this.parentNode&&this.parentNode.removeChild(this)}),100)}updateAndShow(t,e,n="alert",s){this.setAttribute("message",t),this.setAttribute("title",e),this.setAttribute("type",n),this.resolvePromise=s,this.updateContent(t,e,n),requestAnimationFrame((()=>{this.show()}))}updateContent(t,e,n){const s=this.querySelector("#modal-title");s&&(s.textContent=e);const r=this.querySelector(".modal-body p");r&&(r.textContent=t);const i=this.querySelector(".modal-button-cancel"),a="confirm"===n;i&&(i.style.display=a?"block":"none"),this.setupEventListeners()}static findExistingModal(){return document.querySelector("x-modal")}static async alert(t,e="Alert"){return new Promise((n=>{const s=document.createElement("x-modal");s.setAttribute("type","alert"),s.setAttribute("message",t),s.setAttribute("title",e),s.resolvePromise=n,document.body.appendChild(s);const r=()=>{s.overlay?s.show():requestAnimationFrame(r)};requestAnimationFrame(r)}))}static async confirm(t,e="Confirm"){return new Promise((n=>{const s=document.createElement("x-modal");s.setAttribute("type","confirm"),s.setAttribute("message",t),s.setAttribute("title",e),s.resolvePromise=n,document.body.appendChild(s);const r=()=>{s.overlay?s.show():requestAnimationFrame(r)};requestAnimationFrame(r)}))}}function f(t){const e=document.querySelector(`script[type="application/flow"][data-key="${t}"]`);return e?e.textContent.trim():null}class p{constructor(){this.state={},this.listeners=new Map,this.dataSources=new Map,this.subscriptions=new Map,this.flows=new Map,this.componentHooks=new Map,this.urlCache=new Map,this.initialized=!1}initialize(t=null){this.initialized||(this.initialized=!0,t&&(this.routerContext=t),console.log("StateManager initialized"))}set(t,e){const n=this.state[t];JSON.stringify(n)!==JSON.stringify(e)&&(this.state[t]=e,"undefined"!=typeof window&&(window.state={...this.state}),this.notifyListeners(t,{property:t,oldValue:n,newValue:e,state:{...this.state}}))}get(t){return this.state[t]}async GetData(t){const e=this.dataSources.get(t);return e&&e.url?await this.fetchUrlData(t,e):this.get(t)}async fetchUrlData(t,e){const{url:n,lazy:s,defaultValue:r}=e;if(this.urlCache.has(n)){const t=this.urlCache.get(n);if(void 0!==t.data)return t.data;if(t.promise)return await t.promise}if(s&&!this.urlCache.has(n))return this.urlCache.set(n,{data:void 0,promise:null,loading:!1}),r;const i=this.performUrlFetch(n,t);this.urlCache.set(n,{data:void 0,promise:i,loading:!0});try{const e=await i;return this.urlCache.set(n,{data:e,promise:null,loading:!1}),this.set(t,e),e}catch(e){return console.error(`Error fetching data from ${n}:`,e),this.urlCache.set(n,{data:r,promise:null,loading:!1}),this.set(t,r),r}}async performUrlFetch(t,e){try{const n=await fetch(t);if(!n.ok)throw new Error(`HTTP ${n.status}: ${n.statusText}`);const s=await n.text();if(t.endsWith(".json")||this.looksLikeJson(s))try{return JSON.parse(s)}catch(e){return console.warn(`Failed to parse JSON from ${t}, using as text:`,e),s}return s}catch(e){throw new Error(`Failed to fetch ${t}: ${e.message}`)}}looksLikeJson(t){const e=t.trim();return e.startsWith("{")&&e.endsWith("}")||e.startsWith("[")&&e.endsWith("]")}getState(){return{...this.state}}subscribe(t,e){return this.listeners.has(t)||this.listeners.set(t,new Set),this.listeners.get(t).add(e),()=>{const n=this.listeners.get(t);n&&n.delete(e)}}notifyListeners(t,e){const n=this.listeners.get(t);n&&n.forEach((n=>{try{n(e)}catch(e){console.error(`Error in state listener for ${t}:`,e)}}))}initializeProperty(t,e){void 0===this.state[t]&&this.set(t,e)}has(t){return t in this.state}getProperties(){return Object.keys(this.state)}registerDataSource(t,e){const{name:n,defaultValue:s,defaultvalue:r,route:i,url:a,lazy:o}=t;if(!n)return;const l=void 0!==s?s:r,c="true"===o||!0===o;if(this.dataSources.set(n,{defaultValue:l,route:i,url:a,lazy:c}),"pathData"===n&&i)this.setupPathDataListener(i);else if(a){if(void 0!==l){let e=l;try{e=JSON.parse(l)}catch(t){}this.initializeProperty(n,e)}c||this.fetchUrlData(n,{url:a,lazy:c,defaultValue:l})}else if(void 0!==l){let e=l;try{e=JSON.parse(l)}catch(t){}this.initializeProperty(n,e)}}unregisterDataSource(t){this.dataSources.delete(t)}registerSubscription(t,e){const{path:n,handler:s}=t;if(!n||!s)return;this.subscriptions.set(n,{handler:s});const r=this.subscribe(n,(async t=>{await this.triggerFlow(s,t)})),i=this.get(n);return void 0!==i&&setTimeout((async()=>{await this.triggerFlow(s,{property:n,oldValue:void 0,newValue:i,state:{...this.state}})}),0),r}unregisterSubscription(t){this.subscriptions.delete(t)}registerFlow(t,e){const{key:n}=t;n&&e&&this.flows.set(n,e)}unregisterFlow(t){this.flows.delete(t)}async triggerFlow(t,e,n=null){let s=this.flows.get(t);s||(s=f(t)),s?await this.executeFlow(s,e,n):console.warn(`Flow not found: ${t}`)}async executeFlow(t,e,n=null){if(window.lastFlowEvent=e,t&&t.trim())if("string"==typeof t)if(t.includes("undefined")&&t.includes("null")&&t.length<10)console.warn("Flow execution skipped: potentially malformed code");else try{const s=this,r=s.getState(),i=JSON.parse(JSON.stringify(r)),a={global:i,state:i,get event(){return window.lastFlowEvent||{}},SetState:(t,e)=>s.set(t,e),setState:(t,e)=>s.set(t,e),SetData:(t,e)=>s.SetData(t,e),setData:(t,e)=>s.SetData(t,e),GetData:t=>s.GetData(t),getData:t=>s.GetData(t),Query:t=>s.Query(t),query:t=>s.Query(t),Navigate:t=>s.Navigate(t),navigate:t=>s.Navigate(t),Alert:(t,e)=>s.Alert(t,e),alert:(t,e)=>s.Alert(t,e),Confirm:(t,e)=>s.Confirm(t,e),confirm:(t,e)=>s.Confirm(t,e),Trigger:(t,r)=>{const i=[...e.flowStack||[],n].filter(Boolean);return s.triggerFlow(t,{triggeredBy:"flow",flowStack:i,data:r||{}},t)},get routerBeforeEach(){return s.routerContext?.beforeEach},get routerAfterEach(){return s.routerContext?.afterEach},get router(){return s.routerContext}};let o;try{o=new Function(...Object.keys(a),`"use strict"; return (async () => { ${t} })();`)}catch(e){return console.error("Flow syntax error:",e),void console.error("Problematic code:",t)}await o.apply(a,Object.values(a))}catch(e){console.error("Flow execution error:",e),console.error("Problematic code:",t)}else console.warn("Flow execution skipped: code is not a string");else console.warn("Flow execution skipped: empty code")}setupPathDataListener(t){let e;try{const[n,s]=t.split("#/");if(!s)return;const r=`${window.location.protocol}//${window.location.host}${n}`;e=new URLPattern({baseURL:r,hash:`#/${s}`})}catch(t){return}const n=()=>{const t=window.location.href,n=e.exec(t);let s;if(n&&n.hash&&n.hash.groups)s=n.hash.groups;else{if(!window.location.hash)return void(window.location.hash="#/");s={}}this.set("pathData",s)};n(),window.addEventListener("hashchange",n),window.addEventListener("navigate",(()=>{setTimeout(n,0)}))}register({type:t,attributes:e,body:n}){switch(t){case"x-data":return this.registerDataSource(e,n);case"x-subscribe":return this.registerSubscription(e,n);case"x-flow":return this.registerFlow(e,n);default:return console.warn(`Unknown component type: ${t}`),()=>{}}}async Query(t){const{url:e}=t;if(!e)return"";const n=e.startsWith("/")?e:`/${e}`;try{const t=await fetch(n);return await t.text()}catch(t){return console.error("Error loading page content:",t),`<div style="padding: 20px; color: red;">Error loading content: ${t.message}</div>`}}Navigate(t,e={}){this.routerContext?this.triggerFlow("routerNavigate",{triggeredBy:e.triggeredBy||"Navigate",href:t,element:e.element}):window.location.hash=t}async Alert(t={}){const{message:e="",title:n="Alert",dispose:s=!0}=t,r=d.findExistingModal();if(r){const t=await new Promise((t=>{r.updateAndShow(e,n,"alert",t)}));return s?r.dispose():r.hideContent(),t}const i=await d.alert(e,n),a=d.findExistingModal();return a&&(s?a.dispose():a.hideContent()),i}async Confirm(t={}){const{message:e="",title:n="Confirm",dispose:s=!0}=t,r=d.findExistingModal();if(r){const t=await new Promise((t=>{r.updateAndShow(e,n,"confirm",t)}));return s?r.dispose():r.hideContent(),t}const i=await d.confirm(e,n),a=d.findExistingModal();return a&&(s?a.dispose():a.hideContent()),i}async SetData(t,e){const n=e instanceof Promise?await e:e;t.includes(".")?this.setNested(t,n):this.set(t,n)}setNested(t,e){const n=t.split("."),s=n[0];let r=this.state[s]?JSON.parse(JSON.stringify(this.state[s])):{},i=r;for(let t=1;t<n.length-1;t++)i[n[t]]&&"object"==typeof i[n[t]]||(i[n[t]]={}),i=i[n[t]];i[n[n.length-1]]=e,this.set(s,r)}registerComponentHook(t,e){return this.componentHooks.has(t)||this.componentHooks.set(t,new Set),this.componentHooks.get(t).add(e),()=>{const n=this.componentHooks.get(t);n&&n.delete(e)}}unregisterComponentHook(t,e){const n=this.componentHooks.get(t);n&&n.delete(e)}executeComponentHooks(t,e,...n){const s=this.componentHooks.get(t);s&&s.forEach((s=>{try{s(e,...n)}catch(e){console.error(`Error in ${t} hook:`,e)}}))}clear(){this.state={},this.listeners.clear(),this.dataSources.clear(),this.subscriptions.clear(),this.flows.clear(),this.componentHooks.clear()}getActiveSubscriptions(){const t={};for(const[e,n]of this.listeners.entries())t[e]={count:n.size,listeners:Array.from(n).map((t=>({name:t.name||"anonymous",toString:t.toString()})))};return t}logActiveSubscriptions(){const t=this.getActiveSubscriptions();return console.log("ðŸ” Active State Subscriptions:",t),t}}const m=new p;function g(t=null){m.initialize(t)}function b(t,e){m.set(t,e)}const x=b;function v(t,e){return m.SetData(t,e)}function $(t){return m.GetData(t)}function w(t){return m.get(t)}function y(t,e){return m.subscribe(t,e)}function k({type:t,attributes:e,body:n}){return m.register({type:t,attributes:e,body:n})}function S(t,e){return m.registerComponentHook(t,e)}function A(t,e,...n){return m.executeComponentHooks(t,e,...n)}function F(t){t&&m.Navigate(t)}async function E(t){return await m.Query(t)}async function _(t={}){return await m.Alert(t)}async function C(t={}){return await m.Confirm(t)}async function O(t,e={},n={}){return await m.triggerFlow(t,{triggeredBy:n.triggeredBy||"manual",data:e,flowStack:n.flowStack||[],element:n.element})}"undefined"!=typeof window&&(window.state={...m.getState()},window.subscribeToState=(t,e)=>m.subscribe(t,e),window.getActiveSubscriptions=()=>m.getActiveSubscriptions(),window.logActiveSubscriptions=()=>m.logActiveSubscriptions());class P extends HTMLElement{constructor(){super();let t=this.getAttribute("content");t=t?t.replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&#10;/g,"\n").replace(/&#13;/g,"\r").replace(/&#9;/g,"\t"):this.textContent?this.textContent.trim():"",t&&"string"==typeof t||(t=""),t.includes("undefined")&&t.includes("null")&&t.length<10&&(console.warn("SystemElement: potentially malformed content detected, using empty string"),t=""),this.unregister=k({type:this.tagName.toLowerCase(),attributes:this.getAllAttributes(),body:t})}getAllAttributes(){const t={};for(let e=0;e<this.attributes.length;e++){const n=this.attributes[e];t[n.name]=n.value}return t}disconnectedCallback(){this.unregister&&this.unregister()}}class z extends P{constructor(){super(),this.removeAttribute("defaultValue")}}class D extends P{}class T extends P{}class M extends h{constructor(){super()}connectedCallback(){this.applySxStyles()}}class j extends h{constructor(){super(),this.unsubscribe=null,this.originalContent=this.innerHTML+""}connectedCallback(){super.connectedCallback();const t=this.getAttribute("titleSource")||"activePath";this.unsubscribe=y(t,(()=>{this.updateTitle()})),this.updateTitle()}disconnectedCallback(){this.unsubscribe&&this.unsubscribe()}updateTitle(){const e=this.getAttribute("titleSource")||"activePath",n=this.getAttribute("titleText"),s=w(e)||"";let r=n||"Navigation";if(!n&&s.startsWith("/")){let e=s.substring(1).replace(/\//g,t`<span class="breadcrumb-separator"> > </span>`);e=e.replace(/x-/g,""),r=e.trim().charAt(0).toUpperCase()+e.slice(1)}const i=this.getAttribute("menuButtonShow"),a=this.getAttribute("menuButtonTarget")||"sidebar",o="false"!==i?t`
					<button
						class="navbar-hamburger"
						onclick="document.getElementById('${a}')?.classList?.toggle('open')"
						aria-label="Toggle menu"
					>
						<span class="hamburger-line"></span>
						<span class="hamburger-line"></span>
						<span class="hamburger-line"></span>
					</button>
			  `:"",l=n?t`<div class="navbar-title">${r}</div>`:t`<x-breadcrumb pathSource="${e}"></x-breadcrumb>`;this.innerHTML=t`
			<div class="navbar-header">
				<div class="navbar-left">${o} ${l}</div>
				<div class="navbar-right">
					${this.originalContent?`<div class="navbar-actions">${this.originalContent}</div>`:""}
				</div>
			</div>
		`}}class N extends h{constructor(){super()}connectedCallback(){super.connectedCallback()}}class q extends h{constructor(){super()}}class R extends h{constructor(){super(),this.unsubscribe=null}connectedCallback(){super.connectedCallback();const t=this.getAttribute("pathSource")||"activePath";this.unsubscribe=y(t,(()=>{this.render()})),this.render()}disconnectedCallback(){this.unsubscribe&&this.unsubscribe()}render(){const e=w(this.getAttribute("pathSource")||"activePath")||"";if(!e||!e.startsWith("/"))return void(this.innerHTML="");const n=e.split("/").filter((t=>t.length>0)),s=[];let r="";n.forEach(((t,e)=>{r+="/"+t;const i=e===n.length-1;let a=t.replace(/x-/g,"");a=a.charAt(0).toUpperCase()+a.slice(1),s.push({label:a,path:r,isActive:i})}));const i=[];s.forEach(((e,n)=>{e.isActive?i.push(t`
					<span class="breadcrumb-item breadcrumb-current">${e.label}</span>
				`):i.push(t`
					<x-link href="${e.path}" class="breadcrumb-item breadcrumb-link"
						>${e.label}</x-link
					>
				`),n<s.length-1&&i.push(t`
					<span class="breadcrumb-separator">></span>
				`)})),this.innerHTML=t`
			<nav
				class="breadcrumb-container"
				role="navigation"
				aria-label="Breadcrumb"
			>
				${i.join("")}
			</nav>
		`}}class L extends h{constructor(){super()}static get observedAttributes(){return["disabled"]}attributeChangedCallback(t,e,n){if("disabled"===t){const t=this.querySelector("button");t&&(t.disabled=null!==n)}}connectedCallback(){super.connectedCallback();const t=this.getAttribute("label"),e=this.getAttribute("href"),n=this.getAttribute("handler"),s=this.getAttribute("icon"),r=this.getAttribute("iconPosition")||"left",i=this.getAttribute("variant")||"primary",a=this.getAttribute("size")||"medium",o=this.hasAttribute("disabled"),l=this.hasAttribute("loading"),c=this.hasAttribute("fullWidth"),u=this.getTextContentExcludingIcons(),h=t||u;let p=null;if(s&&!l){p=document.createElement("span");const t=s.startsWith("fa-")?`fa ${s}`:`fa fa-${this.convertToFontAwesome(s)}`;p.className=`${t} button-icon`}let d,f=null;l&&(f=document.createElement("span"),f.className="fa fa-refresh fa-spin button-icon"),d=document.createElement("button"),d.className=`x-button x-button-${i} x-button-${a}`,c&&d.classList.add("x-button-fullwidth"),s&&!h&&d.classList.add("x-button-icon-only"),(o||l)&&(d.disabled=!0),!e||o||l||d.addEventListener("click",(async t=>{t.preventDefault(),F(e)})),!n||o||l||d.addEventListener("click",(async t=>{t.preventDefault(),await m.triggerFlow(n,{triggeredBy:"button",element:this},n)})),l?(d.appendChild(f),d.appendChild(document.createTextNode("Loading..."))):s&&"left"===r?(d.appendChild(p),h&&d.appendChild(document.createTextNode(h))):s&&"right"===r?(h&&d.appendChild(document.createTextNode(h)),d.appendChild(p)):s&&!h?d.appendChild(p):d.textContent=h,this.innerHTML="",this.appendChild(d),this.copyAttributesToInnerButton()}copyAttributesToInnerButton(){const t=this.querySelector("button, x-link");if(!t)return;const e=this.getAttribute("href");e&&t.setAttribute("href",e);for(let e=0;e<this.style.length;e++){const n=this.style[e],s=this.style.getPropertyValue(n);t.style.setProperty(n,s)}}getTextContentExcludingIcons(){const t=this.cloneNode(!0);return t.querySelectorAll("x-icon").forEach((t=>t.remove())),t.textContent.trim()}convertToFontAwesome(t){return t?{Home:"home",ListAlt:"list-alt",MenuBook:"book",DriveFolderUpload:"upload",AccountTree:"cog",Save:"save",Add:"plus",ArrowForward:"arrow-right",ArrowBack:"arrow-left",Edit:"edit",Delete:"trash-o",Close:"times",Search:"search",Filter:"filter",MoreVert:"ellipsis-v",MoreHoriz:"ellipsis-h",Info:"info-circle",Warning:"exclamation-triangle",Error:"exclamation-circle",Success:"check-circle",Loading:"refresh",People:"users",Person:"user",LineChart:"line-chart",History:"history"}[t]||t.replace(/([A-Z])/g,"_$1").toLowerCase().replace(/^_/,""):"help"}}class B extends h{constructor(){super()}connectedCallback(){super.connectedCallback();const t=this.getAttribute("sx:contents");t&&(this.textContent=t);const e=this.getAttribute("display");if(e)this.style.display=e;else{const t=this.getAttribute("variant");this.style.display="strong"===t?"inline":"block"}}}class Z extends HTMLElement{constructor(){super()}connectedCallback(){const t=this.getAttribute("href"),e=this.getAttribute("underline"),n=document.createElement("a");if(t){const e=t.startsWith("#")?t:`#${t}`;n.href=window.location.pathname+window.location.search+e}else n.href="#";n.innerHTML=this.innerHTML,"none"===e&&(n.style.textDecoration="none"),n.addEventListener("click",(async e=>{e.preventDefault(),F(t)})),this.innerHTML="",this.appendChild(n)}}class V extends h{constructor(){super(),V.instanceCount||(V.instanceCount=0),V.instanceCount++,this.instanceId=V.instanceCount}connectedCallback(){const t=this.getAttribute("items");this.hasAttribute("data-processed")||(this.setAttribute("data-processed","true"),this.template=this.getTemplate(),this.innerHTML="",super.connectedCallback(),this.processData(t))}disconnectedCallback(){this.selectionMode&&this.removeEventListener("click",this.handleSelectionClick),super.disconnectedCallback()}getTemplate(){const t=this.getAttribute("content");if(t)return t;const e=this.querySelector("template");return e?e.innerHTML:""}handleStateChange(t){if(super.handleStateChange(t),!this.template){const t=this.getTemplate();t&&(this.template=t)}if(this.selectedPath&&this.selectionMode){const e=t[this.selectedPath.startsWith("global_")?this.selectedPath.substring(7):this.selectedPath];this.querySelectorAll("div[data-index]").forEach((t=>{const n=parseInt(t.dataset.index,10);e===n?t.classList.add("is-selected"):t.classList.remove("is-selected")}))}const e=this.getAttribute("items");e&&this.processData(e)}processData(t){if(!t)return void console.warn(`x-map #${this.instanceId}: no items attribute provided`);let e=t;t.startsWith("global_")&&(e=t.substring(7));const n=w(e);if(!n)return void console.warn(`x-map #${this.instanceId}: data not found for path: ${t} (tried: ${e})`);if(!Array.isArray(n))return void console.warn(`x-map #${this.instanceId}: data is not an array: ${t}`);this.innerHTML="";const s=this.getAttribute("selectMode"),r=this.getAttribute("selected"),i=this.getAttribute("onSelect");this.selectionMode=s,this.selectedPath=r,this.onSelectHandler=i,s&&this.addEventListener("click",this.handleSelectionClick),n.forEach(((t,e)=>{const n=this.processTemplate(this.template,t,e),i=document.createElement("div");if(i.innerHTML=n,s){const n=document.createElement("div");for(n.dataset.index=e,r?w(r.startsWith("global_")?r.substring(7):r)===e&&n.classList.add("is-selected"):t.isSelected&&n.classList.add("is-selected");i.firstChild;)n.appendChild(i.firstChild);this.appendChild(n)}else for(;i.firstChild;)this.appendChild(i.firstChild)})),this.style.removeProperty("display")}processTemplate(t,e,s){let r=t.includes("&lt;")||t.includes("&gt;")||t.includes("&quot;")?n(t):t;return r=r.replace(/\{\{\s*item_([^}]+)\s*\}\}/g,((t,n)=>{const s=n.trim();return e[s]||""})),r=r.replace(/\{\{\s*item\s*\}\}/g,(()=>null==e?"":"object"==typeof e?JSON.stringify(e).replace(/"/g,"&quot;"):String(e))),r=r.replace(/\{\{index\}\}/g,s+1),r=r.replace(/\{\{#if\s+([^}]+)\}\}([\s\S]*?)\{\{\/if\}\}/g,((t,n,s)=>this.evaluateCondition(n.trim(),e)?s:"")),r=r.replace(/\{\{#each\s+([^}]+)\}\}([\s\S]*?)\{\{\/each\}\}/g,((t,n,s)=>{const r=n.trim();let i;if(r.startsWith("item_")){const t=r.substring(5);i=e[t]}else i=e[r];return Array.isArray(i)?i.map(((t,e)=>{let n=s.replace(/\{\{\s*this\s*\}\}/g,t);return this.processTemplate(n,t,e)})).join(""):""})),r=r.replace(/class="WHEN\s+(.+?)\s+IS\s+(.+?)\s+THEN\s+(.+?)\s+ELSE\s+(.+?)"/g,((t,e,n,s,r)=>{const i=this.initialState||{},a=(e.trim().startsWith("global_")?i[e.trim().substring(7)]:e.trim())===n.trim(),o=s.replace(/^['"]|['"]$/g,""),l=r.replace(/^['"]|['"]$/g,"");return`class="${a?o:l}"`})),r}evaluateCondition(t,e){if(t.startsWith("item_")){const n=e[t.substring(5)];return Array.isArray(n)?n.length>0:!!n}const n=e[t];return Array.isArray(n)?n.length>0:!!n}handleSelectionClick=t=>{const e=t.target.closest("div[data-index]");if(!e)return;const n=parseInt(e.dataset.index,10);"single"===this.selectionMode?(this.querySelectorAll("div[data-index]").forEach((t=>{t.classList.remove("is-selected")})),e.classList.add("is-selected")):e.classList.toggle("is-selected"),this.onSelectHandler&&O(this.onSelectHandler,{index:n},{triggeredBy:"x-map",element:e})}}class I extends h{constructor(){super()}connectedCallback(){super.connectedCallback();const t=this.getAttribute("icon")||this.getAttribute("name"),e=this.getAttribute("color")||this.getAttribute("sx:color"),n=this.getAttribute("size")||"medium";if(this.closest("x-button"))this.style.display="none";else{const s=document.createElement("span"),r=t.startsWith("fa-")?`fa ${t}`:`fa fa-${this.convertToFontAwesome(t)}`,i=this.getFontAwesomeSizeClass(n);s.className=`${r} ${i}`,s.style.display="inline-block",s.style.verticalAlign="middle",e&&(s.style.color=e),this.innerHTML="",this.appendChild(s)}}getFontAwesomeSizeClass(t){return{"2x":"fa-2x","3x":"fa-3x","4x":"fa-4x","5x":"fa-5x"}[t]||""}convertToFontAwesome(t){return t?{Home:"home",ListAlt:"list-alt",MenuBook:"book",DriveFolderUpload:"upload",AccountTree:"cog",Save:"save",Add:"plus",ArrowForward:"arrow-right",ArrowBack:"arrow-left",Edit:"edit",Delete:"trash-o",Close:"times",Search:"search",Filter:"filter",MoreVert:"ellipsis-v",MoreHoriz:"ellipsis-h",Info:"info-circle",Warning:"exclamation-triangle",Error:"exclamation-circle",Success:"check-circle",CheckCircle:"check-circle",Loading:"refresh",People:"users",Person:"user",LineChart:"line-chart",History:"history",Construction:"wrench",Settings:"cog",Menu:"bars",Cancel:"times"}[t]||t.replace(/([A-Z])/g,"_$1").toLowerCase().replace(/^_/,""):"help"}}class U extends h{constructor(){super(),this.unsubscribe=null}connectedCallback(){super.connectedCallback();const t=this.getAttribute("contents"),e="false"!==this.getAttribute("showLoading");if(!t)return void console.warn("x-fragment: no contents attribute provided");const n=t.startsWith("global_")?t.substring(7):t;this.unsubscribe=y(n,(t=>{this.updateContent(t.newValue,e)}));const s=w(n);this.updateContent(s,e)}updateContent(e,n){const s=this.className;if(null!=e&&""!==e)if("string"==typeof e)try{const t=u(e);this.innerHTML=`<div class="${s}">${t}</div>`}catch(t){console.error("Error processing fragment content:",t),this.innerHTML=`<div class="${s}" style="padding: 20px; color: red;">Error processing content</div>`}else try{this.innerHTML=t`<pre class="${s}">
${JSON.stringify(e,null,2)}</pre
				>`}catch(t){console.error("Error stringifying fragment content:",t),this.innerHTML=`<div class="${s}" style="padding: 20px; color: red;">Error displaying content</div>`}else this.innerHTML=n?t`
					<div
						class="fragment-loading-spinner ${s}"
						style="display: flex; align-items: center; justify-content: center; height: 100%;"
					>
						<div
							style="width: 40px; height: 40px; border: 3px solid #f3f3f3; border-top: 3px solid #3498db; border-radius: 50%; animation: spin 1s linear infinite;"
						></div>
					</div>
				`:`<div class="fragment-no-loading-spinner ${s}"></div>`}disconnectedCallback(){this.unsubscribe&&this.unsubscribe()}}class H extends h{constructor(){super(),H.instanceCount||(H.instanceCount=0),H.instanceCount++,this.instanceId=H.instanceCount}resolvePath(t,e){return t.startsWith("http://")||t.startsWith("https://")||t.startsWith("/")?t:e.substring(0,e.lastIndexOf("/")+1)+t}getCurrentPagePath(){const t=w("currentPath");if(t)return t;const e=new URL(window.location.href).pathname;return e.endsWith(".html"),e.includes("fragments/")?e.substring(e.indexOf("fragments/")):"fragments/"}async connectedCallback(){const e=this.getAttribute("href");if(e)try{const t=this.getCurrentPagePath(),n=this.resolvePath(e,t),s=await fetch(n);if(!s.ok)throw new Error(`Failed to load include: ${s.status} ${s.statusText}`);const r=await s.text();console.log({content:r});const i=u(r);this.innerHTML=i,this.applySxStyles()}catch(e){console.error("Error loading include:",e),this.innerHTML=t`<div style="padding: 20px; color: red;">
				Error loading include: ${e.message}
			</div>`}else console.warn("x-include: no href attribute provided")}}class J extends h{constructor(){super()}connectedCallback(){super.connectedCallback();const t=this.getAttribute("data");if(!t)return void console.warn("x-viz-bar: no data attribute provided");const e=w(t.startsWith("global_")?t.substring(7):t);this.updateChart(e)}onStateChange(t){const e=this.getAttribute("data");if(e){const t=w(e.startsWith("global_")?e.substring(7):e);this.updateChart(t)}}updateChart(t){if(!t||!Array.isArray(t))return void(this.innerHTML='<div class="viz-error">No data available</div>');const e=this.style.color||"var(--palettePrimaryMain)";this.style.setProperty("--bar-base-color",e);const n=Math.max(...t.map((t=>t.value||0)));let s="";t.forEach(((t,e)=>{const r=t.value/n*100;s+=`\n\t\t\t\t<div class="viz-bar-container">\n\t\t\t\t\t<div \n\t\t\t\t\t\tclass="viz-bar ${e%2==0?"viz-bar-even":"viz-bar-odd"}" \n\t\t\t\t\t\tstyle="height: ${r}%;"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class="viz-value">\n\t\t\t\t\t\t\t<x-typography variant="caption">${t.value}</x-typography>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="viz-label">\n\t\t\t\t\t\t<x-typography variant="caption">${t.label||""}</x-typography>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`})),this.innerHTML=`\n\t\t\t<div class="viz-wrapper">\n\t\t\t\t<div class="viz-chart">\n\t\t\t\t\t${s}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`}}class G extends h{constructor(){super()}connectedCallback(){super.connectedCallback();const t=this.getAttribute("data");if(!t)return void console.warn("x-viz-pie: no data attribute provided");const e=w(t.startsWith("global_")?t.substring(7):t);this.updateChart(e)}onStateChange(t){const e=this.getAttribute("data");if(e){const t=w(e.startsWith("global_")?e.substring(7):e);this.updateChart(t)}}updateChart(t){if(!t||!Array.isArray(t))return void(this.innerHTML='<div class="viz-error">No data available</div>');const e=t.reduce(((t,e)=>t+(e.value||0)),0);if(0===e)return void(this.innerHTML='<div class="viz-error">No data to display</div>');const n=this.style.color||"var(--palettePrimaryMain)";this.style.setProperty("--pie-base-color",n);const s="donut"===this.getAttribute("variant"),r=s?60:0,i=100,a=100;let o=0,l="",c="";t.forEach(((t,n)=>{const u=t.value/e*100,h=t.value/e*360,p=o+h,d=i+98*Math.cos((o-90)*Math.PI/180),f=a+98*Math.sin((o-90)*Math.PI/180),g=i+98*Math.cos((p-90)*Math.PI/180),m=a+98*Math.sin((p-90)*Math.PI/180),b=h>180?1:0;let x;if(s){const t=i+r*Math.cos((o-90)*Math.PI/180),e=a+r*Math.sin((o-90)*Math.PI/180);x=[`M ${d} ${f}`,`A 98 98 0 ${b} 1 ${g} ${m}`,`L ${i+r*Math.cos((p-90)*Math.PI/180)} ${a+r*Math.sin((p-90)*Math.PI/180)}`,`A ${r} ${r} 0 ${b} 0 ${t} ${e}`,"Z"].join(" ")}else x=["M 100 100",`L ${d} ${f}`,`A 98 98 0 ${b} 1 ${g} ${m}`,"Z"].join(" ");l+=`\n\t\t\t\t<path \n\t\t\t\t\td="${x}" \n\t\t\t\t\tclass="viz-slice"\n\t\t\t\t\tdata-index="${n}"\n\t\t\t\t/>\n\t\t\t`,c+=`\n\t\t\t\t<div class="viz-legend-item">\n\t\t\t\t\t<span class="viz-legend-color" data-index="${n}"></span>\n\t\t\t\t\t<span class="viz-legend-label">${t.label||""}</span>\n\t\t\t\t\t<span class="viz-legend-value">${u.toFixed(1)}%</span>\n\t\t\t\t</div>\n\t\t\t`,o=p})),this.innerHTML=`\n\t\t\t<div class="viz-pie-container">\n\t\t\t\t<svg viewBox="0 0 200 200" class="viz-svg">\n\t\t\t\t\t${l}\n\t\t\t\t</svg>\n\t\t\t\t<div class="viz-legend">\n\t\t\t\t\t${c}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`}}class W extends h{constructor(){super(),this.original=Array.from(this.attributes).reduce(((t,e)=>(t[e.name]=e.value,t)),{})}connectedCallback(){super.connectedCallback();const t=this.getAttribute("data");if(!t)return void console.warn("x-viz-line: no data attribute provided");const e=w(t.startsWith("global_")?t.substring(7):t);this.updateChart(e)}onStateChange(t){const e=this.getAttribute("data");if(e){const t=w(e.startsWith("global_")?e.substring(7):e);this.updateChart(t)}}updateChart(e){if(!e||!Array.isArray(e))return void(this.innerHTML='<div class="viz-error">No data available</div>');const n=this.style.color||"var(--palettePrimaryMain)";this.style.setProperty("--line-base-color",n);const s=Math.max(...e.map((t=>t.value||0))),r=Math.min(...e.map((t=>t.value||0))),i=s-r,a=s+.02*i,o=r-.02*i,l=(a-o)/4,c=Math.pow(10,Math.floor(Math.log10(l))),u=l/c;let h;h=u<=1?1:u<=2?2:u<=5?5:10;const p=h*c,d=o,f=a,g=f-d;let m="";const b=Math.ceil(d/p)*p,x=Math.floor(f/p)*p;for(let t=b;t<=x;t+=p){const e=170-(t-d)/g*150;m+=`\n\t\t\t\t<text \n\t\t\t\t\tx="45" \n\t\t\t\t\ty="${e+4}" \n\t\t\t\t\tclass="viz-y-axis-text"\n\t\t\t\t\ttext-anchor="end"\n\t\t\t\t>\n\t\t\t\t\t${Math.round(t)}\n\t\t\t\t</text>\n\t\t\t\t<line \n\t\t\t\t\tx1="50" \n\t\t\t\t\ty1="${e}" \n\t\t\t\t\tx2="55" \n\t\t\t\t\ty2="${e}" \n\t\t\t\t\tclass="viz-y-axis-tick"\n\t\t\t\t/>\n\t\t\t`}const y=e.map(((t,n)=>({x:65+n/(e.length-1)*315,y:170-(t.value-d)/g*150,value:t.value,label:t.label}))),k="smooth"===this.getAttribute("variant"),v=this.hasAttribute("fill");let w;w=k?this.createSmoothPath(y):y.map(((t,e)=>`${0===e?"M":"L"} ${t.x} ${t.y}`)).join(" ");let $="";v&&($=`<path d="${w+` L ${y[y.length-1].x} 170 L ${y[0].x} 170 Z`}" class="viz-area" />`);let S="",A="";y.forEach(((t,e)=>{S+=`\n\t\t\t\t<g class="viz-point-group" data-index="${e}">\n\t\t\t\t\t<circle \n\t\t\t\t\t\tcx="${t.x}" \n\t\t\t\t\t\tcy="${t.y}" \n\t\t\t\t\t\tr="4" \n\t\t\t\t\t\tclass="viz-point"\n\t\t\t\t\t/>\n\t\t\t\t\t<text \n\t\t\t\t\t\tx="${t.x}" \n\t\t\t\t\t\ty="${t.y-10}" \n\t\t\t\t\t\tclass="viz-value-text"\n\t\t\t\t\t\ttext-anchor="middle"\n\t\t\t\t\t>\n\t\t\t\t\t\t${t.value}\n\t\t\t\t\t</text>\n\t\t\t\t</g>\n\t\t\t`,A+=`\n\t\t\t\t<text \n\t\t\t\t\tx="${t.x}" \n\t\t\t\t\ty="190" \n\t\t\t\t\tclass="viz-label-text"\n\t\t\t\t\ttext-anchor="middle"\n\t\t\t\t>\n\t\t\t\t\t${t.label}\n\t\t\t\t</text>\n\t\t\t`})),this.innerHTML=t`
			<div class="viz-line-container">
				<svg viewBox="0 0 ${400} ${200}" class="viz-svg">
					<!-- Grid lines (optional) -->
					<defs>
						<pattern
							id="grid"
							width="40"
							height="20"
							patternUnits="userSpaceOnUse"
						>
							<path
								d="M 40 0 L 0 0 0 20"
								fill="none"
								stroke="var(--paletteDivider, #e0e0e0)"
								stroke-width="0.5"
								opacity="0.3"
							/>
						</pattern>
					</defs>
					<rect width="100%" height="100%" fill="url(#grid)" />

					<!-- Y-axis -->
					${m}

					<!-- Area fill (if enabled) -->
					${$}

					<!-- Line path -->
					<path
						d="${w}"
						class="viz-line"
						fill="none"
						stroke="var(--line-base-color)"
						stroke-width="2"
						stroke-linecap="round"
						stroke-linejoin="round"
					/>

					<!-- Bottom labels -->
					${A}

					<!-- Data points with hover values -->
					${S}
				</svg>
			</div>
		`}createSmoothPath(t){if(0===t.length)return"";if(1===t.length)return`M ${t[0].x} ${t[0].y}`;if(2===t.length)return`M ${t[0].x} ${t[0].y} L ${t[1].x} ${t[1].y}`;let e=`M ${t[0].x} ${t[0].y}`;const n=[{x:t[0].x-(t[1].x-t[0].x),y:t[0].y-(t[1].y-t[0].y)},...t,{x:t[t.length-1].x+(t[t.length-1].x-t[t.length-2].x),y:t[t.length-1].y+(t[t.length-1].y-t[t.length-2].y)}];for(let s=1;s<t.length;s++){const t=n[s-1],r=n[s],i=n[s+1],a=n[s+2];e+=` C ${r.x+(i.x-t.x)/6} ${r.y+(i.y-t.y)/6}, ${i.x-(a.x-r.x)/6} ${i.y-(a.y-r.y)/6}, ${i.x} ${i.y}`}return e}}function K(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var X=K();function Y(t){X=t}var Q={exec:()=>null};function tt(t,e=""){let n="string"==typeof t?t:t.source,s={replace:(t,e)=>{let r="string"==typeof e?e:e.source;return r=r.replace(et.caret,"$1"),n=n.replace(t,r),s},getRegex:()=>new RegExp(n,e)};return s}var et={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[\t ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},nt=/^(?:[ \t]*(?:\n|$))+/,st=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,it=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,rt=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,at=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,ot=/(?:[*+-]|\d{1,9}[.)])/,lt=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,ct=tt(lt).replace(/bull/g,ot).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),ut=tt(lt).replace(/bull/g,ot).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),ht=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,dt=/^[^\n]+/,ft=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,pt=tt(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",ft).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),mt=tt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,ot).getRegex(),gt="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",bt=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,xt=tt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$))","i").replace("comment",bt).replace("tag",gt).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),vt=tt(ht).replace("hr",rt).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",gt).getRegex(),$t=tt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",vt).getRegex(),wt={blockquote:$t,code:st,def:pt,fences:it,heading:at,hr:rt,html:xt,lheading:ct,list:mt,newline:nt,paragraph:vt,table:Q,text:dt},yt=tt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",rt).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}\t)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",gt).getRegex(),kt={...wt,lheading:ut,table:yt,paragraph:tt(ht).replace("hr",rt).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",yt).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",gt).getRegex()},St={...wt,html:tt("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",bt).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Q,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:tt(ht).replace("hr",rt).replace("heading"," *#{1,6} *[^\n]").replace("lheading",ct).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},At=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Ft=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Et=/^( {2,}|\\)\n(?!\s*$)/,_t=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Ct=/[\p{P}\p{S}]/u,Ot=/[\s\p{P}\p{S}]/u,Pt=/[^\s\p{P}\p{S}]/u,zt=tt(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Ot).getRegex(),Dt=/(?!~)[\p{P}\p{S}]/u,Tt=/(?!~)[\s\p{P}\p{S}]/u,Mt=/(?:[^\s\p{P}\p{S}]|~)/u,jt=/\[[^\[\]]*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)|`[^`]*?`|<(?! )[^<>]*?>/g,Nt=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,qt=tt(Nt,"u").replace(/punct/g,Ct).getRegex(),Rt=tt(Nt,"u").replace(/punct/g,Dt).getRegex(),Lt="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Bt=tt(Lt,"gu").replace(/notPunctSpace/g,Pt).replace(/punctSpace/g,Ot).replace(/punct/g,Ct).getRegex(),Zt=tt(Lt,"gu").replace(/notPunctSpace/g,Mt).replace(/punctSpace/g,Tt).replace(/punct/g,Dt).getRegex(),Vt=tt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Pt).replace(/punctSpace/g,Ot).replace(/punct/g,Ct).getRegex(),It=tt(/\\(punct)/,"gu").replace(/punct/g,Ct).getRegex(),Ut=tt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Ht=tt(bt).replace("(?:--\x3e|$)","--\x3e").getRegex(),Jt=tt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Ht).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Gt=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`[^`]*`|[^\[\]\\`])*?/,Wt=tt(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Gt).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Kt=tt(/^!?\[(label)\]\[(ref)\]/).replace("label",Gt).replace("ref",ft).getRegex(),Xt=tt(/^!?\[(ref)\](?:\[\])?/).replace("ref",ft).getRegex(),Yt=tt("reflink|nolink(?!\\()","g").replace("reflink",Kt).replace("nolink",Xt).getRegex(),Qt={t:Q,anyPunctuation:It,autolink:Ut,blockSkip:jt,br:Et,code:Ft,del:Q,emStrongLDelim:qt,emStrongRDelimAst:Bt,emStrongRDelimUnd:Vt,escape:At,link:Wt,nolink:Xt,punctuation:zt,reflink:Kt,reflinkSearch:Yt,tag:Jt,text:_t,url:Q},te={...Qt,link:tt(/^!?\[(label)\]\((.*?)\)/).replace("label",Gt).getRegex(),reflink:tt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Gt).getRegex()},ee={...Qt,emStrongRDelimAst:Zt,emStrongLDelim:Rt,url:tt(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),t:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},ne={...ee,br:tt(Et).replace("{2,}","*").getRegex(),text:tt(ee.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},se={normal:wt,gfm:kt,pedantic:St},ie={normal:Qt,gfm:ee,breaks:ne,pedantic:te},re={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ae=t=>re[t];function oe(t,e){if(e){if(et.escapeTest.test(t))return t.replace(et.escapeReplace,ae)}else if(et.escapeTestNoEncode.test(t))return t.replace(et.escapeReplaceNoEncode,ae);return t}function le(t){try{t=encodeURI(t).replace(et.percentDecode,"%")}catch{return null}return t}function ce(t,e){let n=t.replace(et.findPipe,((t,e,n)=>{let s=!1,r=e;for(;--r>=0&&"\\"===n[r];)s=!s;return s?"|":" |"})).split(et.splitPipe),s=0;if(n[0].trim()||n.shift(),n.length>0&&!n.at(-1)?.trim()&&n.pop(),e)if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;s<n.length;s++)n[s]=n[s].trim().replace(et.slashPipe,"|");return n}function ue(t,e,n){let s=t.length;if(0===s)return"";let r=0;for(;r<s&&t.charAt(s-r-1)===e;)r++;return t.slice(0,s-r)}function he(t,e){if(-1===t.indexOf(e[1]))return-1;let n=0;for(let s=0;s<t.length;s++)if("\\"===t[s])s++;else if(t[s]===e[0])n++;else if(t[s]===e[1]&&(n--,n<0))return s;return n>0?-2:-1}function de(t,e,n,s,r){let i=e.href,a=e.title||null,o=t[1].replace(r.other.outputLinkReplace,"$1");s.state.inLink=!0;let l={type:"!"===t[0].charAt(0)?"image":"link",raw:n,href:i,title:a,text:o,tokens:s.inlineTokens(o)};return s.state.inLink=!1,l}function fe(t,e,n){let s=t.match(n.other.indentCodeCompensation);if(null===s)return e;let r=s[1];return e.split("\n").map((t=>{let e=t.match(n.other.beginningSpace);if(null===e)return t;let[s]=e;return s.length>=r.length?t.slice(r.length):t})).join("\n")}var pe=class{options;rules;lexer;constructor(t){this.options=t||X}space(t){let e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){let e=this.rules.block.code.exec(t);if(e){let t=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:ue(t,"\n")}}}fences(t){let e=this.rules.block.fences.exec(t);if(e){let t=e[0],n=fe(t,e[3]||"",this.rules);return{type:"code",raw:t,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:n}}}heading(t){let e=this.rules.block.heading.exec(t);if(e){let t=e[2].trim();if(this.rules.other.endingHash.test(t)){let e=ue(t,"#");(this.options.pedantic||!e||this.rules.other.endingSpaceChar.test(e))&&(t=e.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(t){let e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:ue(e[0],"\n")}}blockquote(t){let e=this.rules.block.blockquote.exec(t);if(e){let t=ue(e[0],"\n").split("\n"),n="",s="",r=[];for(;t.length>0;){let e,i=!1,a=[];for(e=0;e<t.length;e++)if(this.rules.other.blockquoteStart.test(t[e]))a.push(t[e]),i=!0;else{if(i)break;a.push(t[e])}t=t.slice(e);let o=a.join("\n"),l=o.replace(this.rules.other.blockquoteSetextReplace,"\n    $1").replace(this.rules.other.blockquoteSetextReplace2,"");n=n?`${n}\n${o}`:o,s=s?`${s}\n${l}`:l;let c=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(l,r,!0),this.lexer.state.top=c,0===t.length)break;let u=r.at(-1);if("code"===u?.type)break;if("blockquote"===u?.type){let e=u,i=e.raw+"\n"+t.join("\n"),a=this.blockquote(i);r[r.length-1]=a,n=n.substring(0,n.length-e.raw.length)+a.raw,s=s.substring(0,s.length-e.text.length)+a.text;break}if("list"!==u?.type);else{let e=u,i=e.raw+"\n"+t.join("\n"),a=this.list(i);r[r.length-1]=a,n=n.substring(0,n.length-u.raw.length)+a.raw,s=s.substring(0,s.length-e.raw.length)+a.raw,t=i.substring(r.at(-1).raw.length).split("\n")}}return{type:"blockquote",raw:n,tokens:r,text:s}}}list(t){let e=this.rules.block.list.exec(t);if(e){let n=e[1].trim(),s=n.length>1,r={type:"list",raw:"",ordered:s,start:s?+n.slice(0,-1):"",loose:!1,items:[]};n=s?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=s?n:"[*+-]");let i=this.rules.other.listItemRegex(n),a=!1;for(;t;){let n=!1,s="",o="";if(!(e=i.exec(t))||this.rules.block.hr.test(t))break;s=e[0],t=t.substring(s.length);let l=e[2].split("\n",1)[0].replace(this.rules.other.listReplaceTabs,(t=>" ".repeat(3*t.length))),c=t.split("\n",1)[0],u=!l.trim(),h=0;if(this.options.pedantic?(h=2,o=l.trimStart()):u?h=e[1].length+1:(h=e[2].search(this.rules.other.nonSpaceChar),h=h>4?1:h,o=l.slice(h),h+=e[1].length),u&&this.rules.other.blankLine.test(c)&&(s+=c+"\n",t=t.substring(c.length+1),n=!0),!n){let e=this.rules.other.nextBulletRegex(h),n=this.rules.other.hrRegex(h),r=this.rules.other.fencesBeginRegex(h),i=this.rules.other.headingBeginRegex(h),a=this.rules.other.htmlBeginRegex(h);for(;t;){let p,d=t.split("\n",1)[0];if(c=d,this.options.pedantic?(c=c.replace(this.rules.other.listReplaceNesting,"  "),p=c):p=c.replace(this.rules.other.tabCharGlobal,"    "),r.test(c)||i.test(c)||a.test(c)||e.test(c)||n.test(c))break;if(p.search(this.rules.other.nonSpaceChar)>=h||!c.trim())o+="\n"+p.slice(h);else{if(u||l.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||r.test(l)||i.test(l)||n.test(l))break;o+="\n"+c}!u&&!c.trim()&&(u=!0),s+=d+"\n",t=t.substring(d.length+1),l=p.slice(h)}}r.loose||(a?r.loose=!0:this.rules.other.doubleBlankLine.test(s)&&(a=!0));let p,d=null;this.options.gfm&&(d=this.rules.other.listIsTask.exec(o),d&&(p="[ ] "!==d[0],o=o.replace(this.rules.other.listReplaceTask,""))),r.items.push({type:"list_item",raw:s,task:!!d,checked:p,loose:!1,text:o,tokens:[]}),r.raw+=s}let o=r.items.at(-1);if(!o)return;o.raw=o.raw.trimEnd(),o.text=o.text.trimEnd(),r.raw=r.raw.trimEnd();for(let t=0;t<r.items.length;t++)if(this.lexer.state.top=!1,r.items[t].tokens=this.lexer.blockTokens(r.items[t].text,[]),!r.loose){let e=r.items[t].tokens.filter((t=>"space"===t.type)),n=e.length>0&&e.some((t=>this.rules.other.anyLine.test(t.raw)));r.loose=n}if(r.loose)for(let t=0;t<r.items.length;t++)r.items[t].loose=!0;return r}}html(t){let e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:"pre"===e[1]||"script"===e[1]||"style"===e[1],text:e[0]}}def(t){let e=this.rules.block.def.exec(t);if(e){let t=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),n=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:t,raw:e[0],href:n,title:s}}}table(t){let e=this.rules.block.table.exec(t);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let n=ce(e[1]),s=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),r=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split("\n"):[],i={type:"table",raw:e[0],header:[],align:[],rows:[]};if(n.length===s.length){for(let t of s)this.rules.other.tableAlignRight.test(t)?i.align.push("right"):this.rules.other.tableAlignCenter.test(t)?i.align.push("center"):this.rules.other.tableAlignLeft.test(t)?i.align.push("left"):i.align.push(null);for(let t=0;t<n.length;t++)i.header.push({text:n[t],tokens:this.lexer.inline(n[t]),header:!0,align:i.align[t]});for(let t of r)i.rows.push(ce(t,i.header.length).map(((t,e)=>({text:t,tokens:this.lexer.inline(t),header:!1,align:i.align[e]}))));return i}}lheading(t){let e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:"="===e[2].charAt(0)?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){let e=this.rules.block.paragraph.exec(t);if(e){let t="\n"===e[1].charAt(e[1].length-1)?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:t,tokens:this.lexer.inline(t)}}}text(t){let e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){let e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(t){let e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){let e=this.rules.inline.link.exec(t);if(e){let t=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(t)){if(!this.rules.other.endAngleBracket.test(t))return;let e=ue(t.slice(0,-1),"\\");if((t.length-e.length)%2==0)return}else{let t=he(e[2],"()");if(-2===t)return;if(t>-1){let n=(0===e[0].indexOf("!")?5:4)+e[1].length+t;e[2]=e[2].substring(0,t),e[0]=e[0].substring(0,n).trim(),e[3]=""}}let n=e[2],s="";if(this.options.pedantic){let t=this.rules.other.pedanticHrefTitle.exec(n);t&&(n=t[1],s=t[3])}else s=e[3]?e[3].slice(1,-1):"";return n=n.trim(),this.rules.other.startAngleBracket.test(n)&&(n=this.options.pedantic&&!this.rules.other.endAngleBracket.test(t)?n.slice(1):n.slice(1,-1)),de(e,{href:n&&n.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(t,e){let n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){let t=e[(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," ").toLowerCase()];if(!t){let t=n[0].charAt(0);return{type:"text",raw:t,text:t}}return de(n,t,n[0],this.lexer,this.rules)}}emStrong(t,e,n=""){let s=this.rules.inline.emStrongLDelim.exec(t);if(!(!s||s[3]&&n.match(this.rules.other.unicodeAlphaNumeric))&&(!s[1]&&!s[2]||!n||this.rules.inline.punctuation.exec(n))){let n,r,i=[...s[0]].length-1,a=i,o=0,l="*"===s[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(l.lastIndex=0,e=e.slice(-1*t.length+i);null!=(s=l.exec(e));){if(n=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!n)continue;if(r=[...n].length,s[3]||s[4]){a+=r;continue}if((s[5]||s[6])&&i%3&&!((i+r)%3)){o+=r;continue}if(a-=r,a>0)continue;r=Math.min(r,r+a+o);let e=[...s[0]][0].length,l=t.slice(0,i+s.index+e+r);if(Math.min(i,r)%2){let t=l.slice(1,-1);return{type:"em",raw:l,text:t,tokens:this.lexer.inlineTokens(t)}}let c=l.slice(2,-2);return{type:"strong",raw:l,text:c,tokens:this.lexer.inlineTokens(c)}}}}codespan(t){let e=this.rules.inline.code.exec(t);if(e){let t=e[2].replace(this.rules.other.newLineCharGlobal," "),n=this.rules.other.nonSpaceChar.test(t),s=this.rules.other.startingSpaceChar.test(t)&&this.rules.other.endingSpaceChar.test(t);return n&&s&&(t=t.substring(1,t.length-1)),{type:"codespan",raw:e[0],text:t}}}br(t){let e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){let e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){let e=this.rules.inline.autolink.exec(t);if(e){let t,n;return"@"===e[2]?(t=e[1],n="mailto:"+t):(t=e[1],n=t),{type:"link",raw:e[0],text:t,href:n,tokens:[{type:"text",raw:t,text:t}]}}}url(t){let e;if(e=this.rules.inline.url.exec(t)){let t,n;if("@"===e[2])t=e[0],n="mailto:"+t;else{let s;do{s=e[0],e[0]=this.rules.inline.t.exec(e[0])?.[0]??""}while(s!==e[0]);t=e[0],n="www."===e[1]?"http://"+e[0]:e[0]}return{type:"link",raw:e[0],text:t,href:n,tokens:[{type:"text",raw:t,text:t}]}}}inlineText(t){let e=this.rules.inline.text.exec(t);if(e){let t=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:t}}}},me=class t{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||X,this.options.tokenizer=this.options.tokenizer||new pe,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let e={other:et,block:se.normal,inline:ie.normal};this.options.pedantic?(e.block=se.pedantic,e.inline=ie.pedantic):this.options.gfm&&(e.block=se.gfm,this.options.breaks?e.inline=ie.breaks:e.inline=ie.gfm),this.tokenizer.rules=e}static get rules(){return{block:se,inline:ie}}static lex(e,n){return new t(n).lex(e)}static lexInline(e,n){return new t(n).inlineTokens(e)}lex(t){t=t.replace(et.carriageReturn,"\n"),this.blockTokens(t,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let e=this.inlineQueue[t];this.inlineTokens(e.src,e.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,e=[],n=!1){for(this.options.pedantic&&(t=t.replace(et.tabCharGlobal,"    ").replace(et.spaceLine,""));t;){let s;if(this.options.extensions?.block?.some((n=>!!(s=n.call({lexer:this},t,e))&&(t=t.substring(s.raw.length),e.push(s),!0))))continue;if(s=this.tokenizer.space(t)){t=t.substring(s.raw.length);let n=e.at(-1);1===s.raw.length&&void 0!==n?n.raw+="\n":e.push(s);continue}if(s=this.tokenizer.code(t)){t=t.substring(s.raw.length);let n=e.at(-1);"paragraph"===n?.type||"text"===n?.type?(n.raw+=(n.raw.endsWith("\n")?"":"\n")+s.raw,n.text+="\n"+s.text,this.inlineQueue.at(-1).src=n.text):e.push(s);continue}if(s=this.tokenizer.fences(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.heading(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.hr(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.blockquote(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.list(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.html(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.def(t)){t=t.substring(s.raw.length);let n=e.at(-1);"paragraph"===n?.type||"text"===n?.type?(n.raw+=(n.raw.endsWith("\n")?"":"\n")+s.raw,n.text+="\n"+s.raw,this.inlineQueue.at(-1).src=n.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title},e.push(s));continue}if(s=this.tokenizer.table(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.lheading(t)){t=t.substring(s.raw.length),e.push(s);continue}let r=t;if(this.options.extensions?.startBlock){let e,n=1/0,s=t.slice(1);this.options.extensions.startBlock.forEach((t=>{e=t.call({lexer:this},s),"number"==typeof e&&e>=0&&(n=Math.min(n,e))})),n<1/0&&n>=0&&(r=t.substring(0,n+1))}if(this.state.top&&(s=this.tokenizer.paragraph(r))){let i=e.at(-1);n&&"paragraph"===i?.type?(i.raw+=(i.raw.endsWith("\n")?"":"\n")+s.raw,i.text+="\n"+s.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=i.text):e.push(s),n=r.length!==t.length,t=t.substring(s.raw.length)}else if(s=this.tokenizer.text(t)){t=t.substring(s.raw.length);let n=e.at(-1);"text"===n?.type?(n.raw+=(n.raw.endsWith("\n")?"":"\n")+s.raw,n.text+="\n"+s.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=n.text):e.push(s)}else if(t){let e="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(e);break}throw new Error(e)}}return this.state.top=!0,e}inline(t,e=[]){return this.inlineQueue.push({src:t,tokens:e}),e}inlineTokens(t,e=[]){let n=t,s=null;if(this.tokens.links){let t=Object.keys(this.tokens.links);if(t.length>0)for(;null!=(s=this.tokenizer.rules.inline.reflinkSearch.exec(n));)t.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(n=n.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(s=this.tokenizer.rules.inline.anyPunctuation.exec(n));)n=n.slice(0,s.index)+"++"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;null!=(s=this.tokenizer.rules.inline.blockSkip.exec(n));)n=n.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);n=this.options.hooks?.emStrongMask?.call({lexer:this},n)??n;let r=!1,i="";for(;t;){let s;if(r||(i=""),r=!1,this.options.extensions?.inline?.some((n=>!!(s=n.call({lexer:this},t,e))&&(t=t.substring(s.raw.length),e.push(s),!0))))continue;if(s=this.tokenizer.escape(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.tag(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.link(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(s.raw.length);let n=e.at(-1);"text"===s.type&&"text"===n?.type?(n.raw+=s.raw,n.text+=s.text):e.push(s);continue}if(s=this.tokenizer.emStrong(t,n,i)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.codespan(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.br(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.del(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.autolink(t)){t=t.substring(s.raw.length),e.push(s);continue}if(!this.state.inLink&&(s=this.tokenizer.url(t))){t=t.substring(s.raw.length),e.push(s);continue}let a=t;if(this.options.extensions?.startInline){let e,n=1/0,s=t.slice(1);this.options.extensions.startInline.forEach((t=>{e=t.call({lexer:this},s),"number"==typeof e&&e>=0&&(n=Math.min(n,e))})),n<1/0&&n>=0&&(a=t.substring(0,n+1))}if(s=this.tokenizer.inlineText(a)){t=t.substring(s.raw.length),"_"!==s.raw.slice(-1)&&(i=s.raw.slice(-1)),r=!0;let n=e.at(-1);"text"===n?.type?(n.raw+=s.raw,n.text+=s.text):e.push(s)}else if(t){let e="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(e);break}throw new Error(e)}}return e}},ge=class{options;parser;constructor(t){this.options=t||X}space(t){return""}code({text:t,lang:e,escaped:n}){let s=(e||"").match(et.notSpaceStart)?.[0],r=t.replace(et.endingNewline,"")+"\n";return s?'<pre><code class="language-'+oe(s)+'">'+(n?r:oe(r,!0))+"</code></pre>\n":"<pre><code>"+(n?r:oe(r,!0))+"</code></pre>\n"}blockquote({tokens:t}){return`<blockquote>\n${this.parser.parse(t)}</blockquote>\n`}html({text:t}){return t}def(t){return""}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>\n`}hr(t){return"<hr>\n"}list(t){let e=t.ordered,n=t.start,s="";for(let e=0;e<t.items.length;e++){let n=t.items[e];s+=this.listitem(n)}let r=e?"ol":"ul";return"<"+r+(e&&1!==n?' start="'+n+'"':"")+">\n"+s+"</"+r+">\n"}listitem(t){let e="";if(t.task){let n=this.checkbox({checked:!!t.checked});t.loose?"paragraph"===t.tokens[0]?.type?(t.tokens[0].text=n+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&"text"===t.tokens[0].tokens[0].type&&(t.tokens[0].tokens[0].text=n+" "+oe(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:n+" ",text:n+" ",escaped:!0}):e+=n+" "}return e+=this.parser.parse(t.tokens,!!t.loose),`<li>${e}</li>\n`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>\n`}table(t){let e="",n="";for(let e=0;e<t.header.length;e++)n+=this.tablecell(t.header[e]);e+=this.tablerow({text:n});let s="";for(let e=0;e<t.rows.length;e++){let r=t.rows[e];n="";for(let t=0;t<r.length;t++)n+=this.tablecell(r[t]);s+=this.tablerow({text:n})}return s&&(s=`<tbody>${s}</tbody>`),"<table>\n<thead>\n"+e+"</thead>\n"+s+"</table>\n"}tablerow({text:t}){return`<tr>\n${t}</tr>\n`}tablecell(t){let e=this.parser.parseInline(t.tokens),n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>\n`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${oe(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:n}){let s=this.parser.parseInline(n),r=le(t);if(null===r)return s;let i='<a href="'+(t=r)+'"';return e&&(i+=' title="'+oe(e)+'"'),i+=">"+s+"</a>",i}image({href:t,title:e,text:n,tokens:s}){s&&(n=this.parser.parseInline(s,this.parser.textRenderer));let r=le(t);if(null===r)return oe(n);let i=`<img src="${t=r}" alt="${n}"`;return e&&(i+=` title="${oe(e)}"`),i+=">",i}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:oe(t.text)}},be=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}},xe=class t{options;renderer;textRenderer;constructor(t){this.options=t||X,this.options.renderer=this.options.renderer||new ge,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new be}static parse(e,n){return new t(n).parse(e)}static parseInline(e,n){return new t(n).parseInline(e)}parse(t,e=!0){let n="";for(let s=0;s<t.length;s++){let r=t[s];if(this.options.extensions?.renderers?.[r.type]){let t=r,e=this.options.extensions.renderers[t.type].call({parser:this},t);if(!1!==e||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(t.type)){n+=e||"";continue}}let i=r;switch(i.type){case"space":n+=this.renderer.space(i);continue;case"hr":n+=this.renderer.hr(i);continue;case"heading":n+=this.renderer.heading(i);continue;case"code":n+=this.renderer.code(i);continue;case"table":n+=this.renderer.table(i);continue;case"blockquote":n+=this.renderer.blockquote(i);continue;case"list":n+=this.renderer.list(i);continue;case"html":n+=this.renderer.html(i);continue;case"def":n+=this.renderer.def(i);continue;case"paragraph":n+=this.renderer.paragraph(i);continue;case"text":{let r=i,a=this.renderer.text(r);for(;s+1<t.length&&"text"===t[s+1].type;)r=t[++s],a+="\n"+this.renderer.text(r);n+=e?this.renderer.paragraph({type:"paragraph",raw:a,text:a,tokens:[{type:"text",raw:a,text:a,escaped:!0}]}):a;continue}default:{let t='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(t),"";throw new Error(t)}}}return n}parseInline(t,e=this.renderer){let n="";for(let s=0;s<t.length;s++){let r=t[s];if(this.options.extensions?.renderers?.[r.type]){let t=this.options.extensions.renderers[r.type].call({parser:this},r);if(!1!==t||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type)){n+=t||"";continue}}let i=r;switch(i.type){case"escape":case"text":n+=e.text(i);break;case"html":n+=e.html(i);break;case"link":n+=e.link(i);break;case"image":n+=e.image(i);break;case"strong":n+=e.strong(i);break;case"em":n+=e.em(i);break;case"codespan":n+=e.codespan(i);break;case"br":n+=e.br(i);break;case"del":n+=e.del(i);break;default:{let t='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(t),"";throw new Error(t)}}}return n}},ve=class{options;block;constructor(t){this.options=t||X}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}emStrongMask(t){return t}provideLexer(){return this.block?me.lex:me.lexInline}provideParser(){return this.block?xe.parse:xe.parseInline}},$e=class{defaults=K();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=xe;Renderer=ge;TextRenderer=be;Lexer=me;Tokenizer=pe;Hooks=ve;constructor(...t){this.use(...t)}walkTokens(t,e){let n=[];for(let s of t)switch(n=n.concat(e.call(this,s)),s.type){case"table":{let t=s;for(let s of t.header)n=n.concat(this.walkTokens(s.tokens,e));for(let s of t.rows)for(let t of s)n=n.concat(this.walkTokens(t.tokens,e));break}case"list":{let t=s;n=n.concat(this.walkTokens(t.items,e));break}default:{let t=s;this.defaults.extensions?.childTokens?.[t.type]?this.defaults.extensions.childTokens[t.type].forEach((s=>{let r=t[s].flat(1/0);n=n.concat(this.walkTokens(r,e))})):t.tokens&&(n=n.concat(this.walkTokens(t.tokens,e)))}}return n}use(...t){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach((t=>{let n={...t};if(n.async=this.defaults.async||n.async||!1,t.extensions&&(t.extensions.forEach((t=>{if(!t.name)throw new Error("extension name required");if("renderer"in t){let n=e.renderers[t.name];e.renderers[t.name]=n?function(...e){let s=t.renderer.apply(this,e);return!1===s&&(s=n.apply(this,e)),s}:t.renderer}if("tokenizer"in t){if(!t.level||"block"!==t.level&&"inline"!==t.level)throw new Error("extension level must be 'block' or 'inline'");let n=e[t.level];n?n.unshift(t.tokenizer):e[t.level]=[t.tokenizer],t.start&&("block"===t.level?e.startBlock?e.startBlock.push(t.start):e.startBlock=[t.start]:"inline"===t.level&&(e.startInline?e.startInline.push(t.start):e.startInline=[t.start]))}"childTokens"in t&&t.childTokens&&(e.childTokens[t.name]=t.childTokens)})),n.extensions=e),t.renderer){let e=this.defaults.renderer||new ge(this.defaults);for(let n in t.renderer){if(!(n in e))throw new Error(`renderer '${n}' does not exist`);if(["options","parser"].includes(n))continue;let s=n,r=t.renderer[s],i=e[s];e[s]=(...t)=>{let n=r.apply(e,t);return!1===n&&(n=i.apply(e,t)),n||""}}n.renderer=e}if(t.tokenizer){let e=this.defaults.tokenizer||new pe(this.defaults);for(let n in t.tokenizer){if(!(n in e))throw new Error(`tokenizer '${n}' does not exist`);if(["options","rules","lexer"].includes(n))continue;let s=n,r=t.tokenizer[s],i=e[s];e[s]=(...t)=>{let n=r.apply(e,t);return!1===n&&(n=i.apply(e,t)),n}}n.tokenizer=e}if(t.hooks){let e=this.defaults.hooks||new ve;for(let n in t.hooks){if(!(n in e))throw new Error(`hook '${n}' does not exist`);if(["options","block"].includes(n))continue;let s=n,r=t.hooks[s],i=e[s];ve.passThroughHooks.has(n)?e[s]=t=>{if(this.defaults.async&&ve.passThroughHooksRespectAsync.has(n))return Promise.resolve(r.call(e,t)).then((t=>i.call(e,t)));let s=r.call(e,t);return i.call(e,s)}:e[s]=(...t)=>{let n=r.apply(e,t);return!1===n&&(n=i.apply(e,t)),n}}n.hooks=e}if(t.walkTokens){let e=this.defaults.walkTokens,s=t.walkTokens;n.walkTokens=function(t){let n=[];return n.push(s.call(this,t)),e&&(n=n.concat(e.call(this,t))),n}}this.defaults={...this.defaults,...n}})),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return me.lex(t,e??this.defaults)}parser(t,e){return xe.parse(t,e??this.defaults)}parseMarkdown(t){return(e,n)=>{let s={...n},r={...this.defaults,...s},i=this.onError(!!r.silent,!!r.async);if(!0===this.defaults.async&&!1===s.async)return i(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||null===e)return i(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof e)return i(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));r.hooks&&(r.hooks.options=r,r.hooks.block=t);let a=r.hooks?r.hooks.provideLexer():t?me.lex:me.lexInline,o=r.hooks?r.hooks.provideParser():t?xe.parse:xe.parseInline;if(r.async)return Promise.resolve(r.hooks?r.hooks.preprocess(e):e).then((t=>a(t,r))).then((t=>r.hooks?r.hooks.processAllTokens(t):t)).then((t=>r.walkTokens?Promise.all(this.walkTokens(t,r.walkTokens)).then((()=>t)):t)).then((t=>o(t,r))).then((t=>r.hooks?r.hooks.postprocess(t):t)).catch(i);try{r.hooks&&(e=r.hooks.preprocess(e));let t=a(e,r);r.hooks&&(t=r.hooks.processAllTokens(t)),r.walkTokens&&this.walkTokens(t,r.walkTokens);let n=o(t,r);return r.hooks&&(n=r.hooks.postprocess(n)),n}catch(t){return i(t)}}}onError(t,e){return n=>{if(n.message+="\nPlease report this to https://github.com/markedjs/marked.",t){let t="<p>An error occurred:</p><pre>"+oe(n.message+"",!0)+"</pre>";return e?Promise.resolve(t):t}if(e)return Promise.reject(n);throw n}}},we=new $e;function ye(t,e){return we.parse(t,e)}ye.options=ye.setOptions=function(t){return we.setOptions(t),ye.defaults=we.defaults,Y(ye.defaults),ye},ye.getDefaults=K,ye.defaults=X,ye.use=function(...t){return we.use(...t),ye.defaults=we.defaults,Y(ye.defaults),ye},ye.walkTokens=function(t,e){return we.walkTokens(t,e)},ye.parseInline=we.parseInline,ye.Parser=xe,ye.parser=xe.parse,ye.Renderer=ge,ye.TextRenderer=be,ye.Lexer=me,ye.lexer=me.lex,ye.Tokenizer=pe,ye.Hooks=ve,ye.parse=ye,ye.options,ye.setOptions,ye.use,ye.walkTokens,ye.parseInline,xe.parse,me.lex;class ke extends h{constructor(){super()}connectedCallback(){super.connectedCallback(),this.renderMarkdown()}renderMarkdown(){let t=this.getAttribute("content")||this.innerHTML;this.getAttribute("content")&&(t=n(t));const e=t;if(t.trim())try{const t=Se(e),n=Ae(t),s=Fe(n);this.innerHTML=s,A("x-markdown",this,"rendered"),this.getAttribute("content")&&this.removeAttribute("content")}catch(e){console.error("Failed to parse markdown:",e),this.innerHTML=t}else this.innerHTML=""}sanitizeHTML(t){const e=document.createElement("div");return e.innerHTML=t,e.querySelectorAll("script").forEach((t=>{"application/flow"!==t.getAttribute("type")&&t.remove()})),e.querySelectorAll("*").forEach((t=>{["onclick","onload","onerror","onmouseover","onmouseout"].forEach((e=>{t.removeAttribute(e)}))})),e.innerHTML}}const Se=t=>{const e=t.split("\n");if(0===e.length)return t;let n="";for(const t of e){if(""===t.trim())continue;const e=t.match(/^(\s*)/);n=e[1];break}return""===n?t:e.map((t=>""===t.trim()?t:t.startsWith(n)?t.substring(n.length):t)).join("\n")},Ae=t=>{const e={"&gt;":">","&lt;":"<","&amp;":"&","&quot;":'"',"&#39;":"'","&nbsp;":" "};let n=t;for(const[t,s]of Object.entries(e))n=n.replace(new RegExp(t,"g"),s);return n=n.replace(/&#(\d+);/g,((t,e)=>String.fromCharCode(parseInt(e,10)))),n},Fe=t=>{const e={heading({tokens:t,depth:e}){return`<x-typography variant="h${e}" sx:mt="5" sx:mb="1" sx:display="inline-block">${this.parser.parseInline(t)}</x-typography>`},blockquote({tokens:t}){return`<x-typography variant="blockquote" sx:my="2" sx:mx="0">${this.parser.parse(t).replace(/<p>/g,"").replace(/<\/p>/g,"")}</x-typography>`},strong({tokens:t}){return`<x-typography variant="strong">${this.parser.parseInline(t)}</x-typography>`},link({href:t,title:e,tokens:n}){return`<x-link href="${t}" ${e?` title="${e}"`:""}>${this.parser.parseInline(n)}</x-link>`},paragraph({tokens:t}){const e=this.parser.parseInline(t);return e.match(/^<x-[\w-]+[^>]*>[\s\S]*<\/x-[\w-]+>$/)||e.match(/^<x-[\w-]+[^>]*content="[^"]*">[\s\S]*<\/x-[\w-]+>$/)||e.match(/^<x-[\w-]+[^>]*>[\s\S]*?<\/x-[\w-]+>$/s)?e:`<p>${e}</p>`},tablecell({tokens:t,align:e}){let n=this.parser.parseInline(t);return n=n.replace(/`?icon:([^;]+);([^`\s]+)`?/g,((t,e,n)=>`<x-icon\n\t\t\t\t\t\ticon="${e}"\n\t\t\t\t\t\tsx:color="${i(n.trim())}"\n\t\t\t\t\t\tsize="large"\n\t\t\t\t\t></x-icon>`)),`<td${e?` style="text-align: ${e}"`:""}>${n}</td>`},list({items:t,ordered:e,start:n}){const s=e?"ol":"ul",r=e&&1!==n?` start="${n}"`:"",i=t.some((t=>!0===t.task));return`<${s}${r} style="padding-left: 0;">\n\t\t\t\t${t.map(((t,s)=>{let r,a,o;return e?`<li style="display: flex; align-items: flex-start; margin: 0.25rem 0; padding-left: 0;">\n\t\t\t\t\t\t\t\t<span style="color: var(--palettePrimaryMain); font-weight: 600; margin-right: 0.75rem; flex-shrink: 0; min-width: 1.5rem; text-align: right; font-family: 'Courier New', 'Monaco', 'Menlo', monospace; position: relative;">\n\t\t\t\t\t\t\t\t\t${n?n+s:s+1}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span>${this.parser.parseInline(t.tokens)}</span>\n\t\t\t\t\t\t\t</li>`:(!0===t.task||i&&!1===t.task?(r=t.checked?"fa-check-square-o":"fa-square-o",a="1em",o=`opacity: ${t.checked?"0.7":"1"}; color: ${t.checked?"var(--paletteTextSecondary)":"var(--paletteTextPrimary)"};`):(r="fa-circle",a="8px",o="color: var(--paletteTextPrimary);"),`<li style="display: flex; align-items: center; margin: 0.25rem 0; padding-left: 0;">\n\t\t\t\t\t\t\t<div style="min-width: 1.5rem; margin-right: 0.75rem; flex-shrink: 0; text-align: right; display: flex; align-items: center; justify-content: flex-end;">\n\t\t\t\t\t\t\t\t<i class="fa ${r}" style="color: var(--palettePrimaryMain); font-size: ${a}; ${"fa-check-square-o"===r?"margin-right: -0.1em;":""}"></i>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<span style="${o}">\n\t\t\t\t\t\t\t\t${this.parser.parseInline(t.tokens)}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</li>`)})).join("")}\n\t\t\t</${s}>`}};return ye.setOptions({gfm:!0,breaks:!1,pedantic:!1}),ye.use({renderer:{...e,html:t=>t.raw}}),ye.parse(t)};class Ee extends h{constructor(){super(),this.unsubscribe=null}connectedCallback(){const t=this.getAttribute("data");t?this.renderHybridTable(t):this.renderInlineTable(),this.applySxStyles()}disconnectedCallback(){this.unsubscribe&&this.unsubscribe()}renderInlineTable(){let t=this.getAttribute("content")||this.innerHTML;if(this.getAttribute("content")&&(t=t.replace(/&quot;/g,'"').replace(/'/g,"&#39;").replace(/&#10;/g,"\n").replace(/&#13;/g,"\r").replace(/&#9;/g,"\t")),!t.trim())return void(this.innerHTML="");const e=document.createElement("table");e.innerHTML=t,this.appendChild(e),this.getAttribute("content")&&this.removeAttribute("content")}renderHybridTable(t){let e=this.getAttribute("content")||this.innerHTML;if(this.getAttribute("content")&&(e=e.replace(/&quot;/g,'"').replace(/'/g,"&#39;").replace(/&#10;/g,"\n").replace(/&#13;/g,"\r").replace(/&#9;/g,"\t")),!e.trim())return void(this.innerHTML="");this.template=e;const n=document.createElement("table");n.innerHTML=e,this.appendChild(n),this.getAttribute("content")&&this.removeAttribute("content"),setTimeout((()=>{this.updateTableBody(t)}),10),this.unsubscribe=y(t,(()=>{this.updateTableBody(t)}))}updateTableBody(t){if(!t)return void console.warn("x-table: no data attribute provided");let e=null,n=t;if(t.startsWith("global_")&&(n=t.substring(7)),e=w(n),!e&&window.state&&window.state[n]?e=window.state[n]:!e&&window[n]&&(e=window[n]),!e)return void console.warn(`x-table: data not found for path: ${t}`);if(!Array.isArray(e))return void console.warn(`x-table: data is not an array: ${t}`);const s=this.querySelector("table");if(!s)return void console.warn("x-table: no table element found");let r=s.querySelector("tbody");r||(r=document.createElement("tbody"),s.appendChild(r));const i=this.generateTableRows(e);r.innerHTML=i}generateTableRows(t){const e=this.querySelector("table").querySelector("thead");if(!e)return console.warn("x-table: no thead found for property mapping"),"";const n=e.querySelectorAll("th[property]"),s=Array.from(n).map((t=>t.getAttribute("property")));return 0===s.length?(console.warn("x-table: no property attributes found in thead"),""):t.map(((t,e)=>`<tr>${s.map((e=>`<td>${t[e]||""}</td>`)).join("")}</tr>`)).join("")}processTemplate(t,e){let n=t;const s=n.match(/<thead>([\s\S]*?)<\/thead>/),r=n.match(/<tbody>([\s\S]*?)<\/tbody>/);if(!s||!r)return console.warn("x-table: template must contain both <thead> and <tbody> sections"),n;const i=s[1],a=r[1],o=i.matchAll(/<th[^>]*property="([^"]*)"[^>]*>([^<]*)<\/th>/g),l=[];for(const t of o)l.push(t[1]);const c=e.map(((t,e)=>{let n=a;return n=n.replace(/\{\{\s*item_([^}]+)\s*\}\}/g,((e,n)=>t[n]||"")),n=n.replace(/\{\{index\}\}/g,e+1),n.includes("{{")||n.includes("<td>")||(n=`<tr>${l.map((e=>`<td>${t[e]||""}</td>`)).join("")}</tr>`),n})).join("");return n=n.replace(/<tbody>[\s\S]*?<\/tbody>/,`<tbody>${c}</tbody>`),n}}function _e(t){return t&&t.i&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ce,Oe;function Pe(){if(Oe)return Ce;function t(t){this.o=t,this.clear()}Oe=1,t.prototype.clear=function(){this.l=0,this.u=Object.create(null)},t.prototype.get=function(t){return this.u[t]},t.prototype.set=function(t,e){return this.l>=this.o&&this.clear(),t in this.u||this.l++,this.u[t]=e};var e=/[^.^\]^[]+|(?=\[\]|\.\.)/g,n=/^\d+$/,s=/^\d/,r=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,i=/^\s*(['"]?)(.*?)(\1)\s*$/,a=new t(512),o=new t(512),l=new t(512);function c(t){return a.get(t)||a.set(t,u(t).map((function(t){return t.replace(i,"$2")})))}function u(t){return t.match(e)||[""]}function h(t){return"string"==typeof t&&t&&-1!==["'",'"'].indexOf(t.charAt(0))}function p(t){return!h(t)&&(function(t){return t.match(s)&&!t.match(n)}(t)||function(t){return r.test(t)}(t))}return Ce={Cache:t,split:u,normalizePath:c,setter:function(t){var e=c(t);return o.get(t)||o.set(t,(function(t,n){for(var s=0,r=e.length,i=t;s<r-1;){var a=e[s];if("__proto__"===a||"constructor"===a||"prototype"===a)return t;i=i[e[s++]]}i[e[s]]=n}))},getter:function(t,e){var n=c(t);return l.get(t)||l.set(t,(function(t){for(var s=0,r=n.length;s<r;){if(null==t&&e)return;t=t[n[s++]]}return t}))},join:function(t){return t.reduce((function(t,e){return t+(h(e)||n.test(e)?"["+e+"]":(t?".":"")+e)}),"")},forEach:function(t,e,n){!function(t,e,n){var s,r,i,a,o=t.length;for(r=0;r<o;r++)(s=t[r])&&(p(s)&&(s='"'+s+'"'),i=!(a=h(s))&&/^\d+$/.test(s),e.call(n,s,a,i,r,t))}(Array.isArray(t)?t:u(t),e,n)}}}var ze,De,Te=Pe();function Me(){if(De)return ze;De=1;const t=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['â€™](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['â€™](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['â€™](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['â€™](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,e=e=>e.match(t)||[],n=t=>t[0].toUpperCase()+t.slice(1),s=(t,n)=>e(t).join(n).toLowerCase(),r=t=>e(t).reduce(((t,e)=>`${t}${t?e[0].toUpperCase()+e.slice(1).toLowerCase():e.toLowerCase()}`),"");return ze={words:e,upperFirst:n,camelCase:r,pascalCase:t=>n(r(t)),snakeCase:t=>s(t,"_"),kebabCase:t=>s(t,"-"),sentenceCase:t=>n(s(t," ")),titleCase:t=>e(t).map(n).join(" ")}}var je,Ne=Me(),qe={exports:{}};function Re(){if(je)return qe.exports;function t(t,e){var n=t.length,s=new Array(n),r={},i=n,a=function(t){for(var e=new Map,n=0,s=t.length;n<s;n++){var r=t[n];e.has(r[0])||e.set(r[0],new Set),e.has(r[1])||e.set(r[1],new Set),e.get(r[0]).add(r[1])}return e}(e),o=function(t){for(var e=new Map,n=0,s=t.length;n<s;n++)e.set(t[n],n);return e}(t);for(e.forEach((function(t){if(!o.has(t[0])||!o.has(t[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")}));i--;)r[i]||l(t[i],i,new Set);return s;function l(t,e,i){if(i.has(t)){var c;try{c=", node was:"+JSON.stringify(t)}catch(t){c=""}throw new Error("Cyclic dependency"+c)}if(!o.has(t))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(t));if(!r[e]){r[e]=!0;var u=a.get(t)||new Set;if(e=(u=Array.from(u)).length){i.add(t);do{var h=u[--e];l(h,o.get(h),i)}while(e);i.delete(t)}s[--n]=t}}}return je=1,qe.exports=function(e){return t(function(t){for(var e=new Set,n=0,s=t.length;n<s;n++){var r=t[n];e.add(r[0]),e.add(r[1])}return Array.from(e)}(e),e)},qe.exports.array=t,qe.exports}var Le=Re();const Be=_e(Le),Ze=Object.prototype.toString,Ve=Error.prototype.toString,Ie=RegExp.prototype.toString,Ue="undefined"!=typeof Symbol?Symbol.prototype.toString:()=>"",He=/^Symbol\((.*)\)(.*)$/;function Je(t){return t!=+t?"NaN":0===t&&1/t<0?"-0":""+t}function Ge(t,e=!1){if(null==t||!0===t||!1===t)return""+t;const n=typeof t;if("number"===n)return Je(t);if("string"===n)return e?`"${t}"`:t;if("function"===n)return"[Function "+(t.name||"anonymous")+"]";if("symbol"===n)return Ue.call(t).replace(He,"Symbol($1)");const s=Ze.call(t).slice(8,-1);return"Date"===s?isNaN(t.getTime())?""+t:t.toISOString(t):"Error"===s||t instanceof Error?"["+Ve.call(t)+"]":"RegExp"===s?Ie.call(t):null}function We(t,e){let n=Ge(t,e);return null!==n?n:JSON.stringify(t,(function(t,n){let s=Ge(this[t],e);return null!==s?s:n}),2)}function Ke(t){return null==t?[]:[].concat(t)}let Xe,Ye,Qe,tn=/\$\{\s*(\w+)\s*\}/g;Xe=Symbol.toStringTag;class en{constructor(t,e,n,s){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[Xe]="Error",this.name="ValidationError",this.value=e,this.path=n,this.type=s,this.errors=[],this.inner=[],Ke(t).forEach((t=>{if(nn.isError(t)){this.errors.push(...t.errors);const e=t.inner.length?t.inner:[t];this.inner.push(...e)}else this.errors.push(t)})),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0]}}Ye=Symbol.hasInstance,Qe=Symbol.toStringTag;class nn extends Error{static formatError(t,e){const n=e.label||e.path||"this";return e=Object.assign({},e,{path:n,originalPath:e.path}),"string"==typeof t?t.replace(tn,((t,n)=>We(e[n]))):"function"==typeof t?t(e):t}static isError(t){return t&&"ValidationError"===t.name}constructor(t,e,n,s,r){const i=new en(t,e,n,s);if(r)return i;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[Qe]="Error",this.name=i.name,this.message=i.message,this.type=i.type,this.value=i.value,this.path=i.path,this.errors=i.errors,this.inner=i.inner,Error.captureStackTrace&&Error.captureStackTrace(this,nn)}static[Ye](t){return en[Symbol.hasInstance](t)||super[Symbol.hasInstance](t)}}let sn={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:t,type:e,value:n,originalValue:s})=>{const r=null!=s&&s!==n?` (cast from the value \`${We(s,!0)}\`).`:".";return"mixed"!==e?`${t} must be a \`${e}\` type, but the final value was: \`${We(n,!0)}\``+r:`${t} must match the configured type. The validated value was: \`${We(n,!0)}\``+r}},rn={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},an={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},on={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},ln={isValue:"${path} field must be ${value}"},cn={noUnknown:"${path} field has unspecified keys: ${unknown}",exact:"${path} object contains unknown properties: ${properties}"},un={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},hn={notType:t=>{const{path:e,value:n,spec:s}=t,r=s.types.length;if(Array.isArray(n)){if(n.length<r)return`${e} tuple value has too few items, expected a length of ${r} but got ${n.length} for value: \`${We(n,!0)}\``;if(n.length>r)return`${e} tuple value has too many items, expected a length of ${r} but got ${n.length} for value: \`${We(n,!0)}\``}return nn.formatError(sn.notType,t)}};Object.assign(Object.create(null),{mixed:sn,string:rn,number:an,date:on,object:cn,array:un,boolean:ln,tuple:hn});const dn=t=>t&&t.h;class fn{static fromOptions(t,e){if(!e.then&&!e.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:n,then:s,otherwise:r}=e,i="function"==typeof n?n:(...t)=>t.every((t=>t===n));return new fn(t,((t,e)=>{var n;let a=i(...t)?s:r;return null!=(n=null==a?void 0:a(e))?n:e}))}constructor(t,e){this.fn=void 0,this.refs=t,this.refs=t,this.fn=e}resolve(t,e){let n=this.refs.map((t=>t.getValue(null==e?void 0:e.value,null==e?void 0:e.parent,null==e?void 0:e.context))),s=this.fn(n,t,e);if(void 0===s||s===t)return t;if(!dn(s))throw new TypeError("conditions must return a schema object");return s.resolve(e)}}const pn={context:"$",value:"."};class mn{constructor(t,e={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,"string"!=typeof t)throw new TypeError("ref must be a string, got: "+t);if(this.key=t.trim(),""===t)throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===pn.context,this.isValue=this.key[0]===pn.value,this.isSibling=!this.isContext&&!this.isValue;let n=this.isContext?pn.context:this.isValue?pn.value:"";this.path=this.key.slice(n.length),this.getter=this.path&&Te.getter(this.path,!0),this.map=e.map}getValue(t,e,n){let s=this.isContext?n:this.isValue?t:e;return this.getter&&(s=this.getter(s||{})),this.map&&(s=this.map(s)),s}cast(t,e){return this.getValue(t,null==e?void 0:e.parent,null==e?void 0:e.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(t){return t&&t.v}}mn.prototype.v=!0;const gn=t=>null==t;function bn(t){function e({value:e,path:n="",options:s,originalValue:r,schema:i},a,o){const{name:l,test:c,params:u,message:h,skipAbsent:p}=t;let{parent:d,context:f,abortEarly:g=i.spec.abortEarly,disableStackTrace:m=i.spec.disableStackTrace}=s;const b={value:e,parent:d,context:f};function x(t={}){const s=xn(Object.assign({value:e,originalValue:r,label:i.spec.label,path:t.path||n,spec:i.spec,disableStackTrace:t.disableStackTrace||m},u,t.params),b),a=new nn(nn.formatError(t.message||h,s),e,s.path,t.type||l,s.disableStackTrace);return a.params=s,a}const y=g?a:o;let k={path:n,parent:d,type:l,from:s.from,createError:x,resolve:t=>vn(t,b),options:s,originalValue:r,schema:i};const v=t=>{nn.isError(t)?y(t):t?o(null):y(x())},w=t=>{nn.isError(t)?y(t):a(t)};if(p&&gn(e))return v(!0);let $;try{var S;if($=c.call(k,e,k),"function"==typeof(null==(S=$)?void 0:S.then)){if(s.sync)throw new Error(`Validation test of type: "${k.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve($).then(v,w)}}catch(t){return void w(t)}v($)}return e.OPTIONS=t,e}function xn(t,e){if(!t)return t;for(const n of Object.keys(t))t[n]=vn(t[n],e);return t}function vn(t,e){return mn.isRef(t)?t.getValue(e.value,e.parent,e.context):t}function $n(t,e,n,s=n){let r,i,a;return e?(Te.forEach(e,((o,l,c)=>{let u=l?o.slice(1,o.length-1):o,h="tuple"===(t=t.resolve({context:s,parent:r,value:n})).type,p=c?parseInt(u,10):0;if(t.innerType||h){if(h&&!c)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${a}" must contain an index to the tuple element, e.g. "${a}[0]"`);if(n&&p>=n.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${o}, in the path: ${e}. because there is no value at that index. `);r=n,n=n&&n[p],t=h?t.spec.types[p]:t.innerType}if(!c){if(!t.fields||!t.fields[u])throw new Error(`The schema does not contain the path: ${e}. (failed at: ${a} which is a type: "${t.type}")`);r=n,n=n&&n[u],t=t.fields[u]}i=u,a=l?"["+o+"]":"."+o})),{schema:t,parent:r,parentPath:i}):{parent:r,parentPath:e,schema:t}}class wn extends Set{describe(){const t=[];for(const e of this.values())t.push(mn.isRef(e)?e.describe():e);return t}resolveAll(t){let e=[];for(const n of this.values())e.push(t(n));return e}clone(){return new wn(this.values())}merge(t,e){const n=this.clone();return t.forEach((t=>n.add(t))),e.forEach((t=>n.delete(t))),n}}function yn(t,e=new Map){if(dn(t)||!t||"object"!=typeof t)return t;if(e.has(t))return e.get(t);let n;if(t instanceof Date)n=new Date(t.getTime()),e.set(t,n);else if(t instanceof RegExp)n=new RegExp(t),e.set(t,n);else if(Array.isArray(t)){n=new Array(t.length),e.set(t,n);for(let s=0;s<t.length;s++)n[s]=yn(t[s],e)}else if(t instanceof Map){n=new Map,e.set(t,n);for(const[s,r]of t.entries())n.set(s,yn(r,e))}else if(t instanceof Set){n=new Set,e.set(t,n);for(const s of t)n.add(yn(s,e))}else{if(!(t instanceof Object))throw Error(`Unable to clone ${t}`);n={},e.set(t,n);for(const[s,r]of Object.entries(t))n[s]=yn(r,e)}return n}function kn(t){if(null==t||!t.length)return;const e=[];let n="",s=!1,r=!1;for(let i=0;i<t.length;i++){const a=t[i];"["!==a||r?"]"!==a||r?'"'!==a?"."!==a||s||r?n+=a:n&&(e.push(n),n=""):r=!r:(n&&(/^\d+$/.test(n)?e.push(n):e.push(n.replace(/^"|"$/g,"")),n=""),s=!1):(n&&(e.push(...n.split(".").filter(Boolean)),n=""),s=!0)}return n&&e.push(...n.split(".").filter(Boolean)),e}function Sn(t,e){const n=e?`${e}.${t.path}`:t.path;return t.errors.map((t=>({message:t,path:kn(n)})))}function An(t,e){var n;if((null==(n=t.inner)||!n.length)&&t.errors.length)return Sn(t,e);const s=e?`${e}.${t.path}`:t.path;return t.inner.flatMap((t=>An(t,s)))}class Fn{constructor(t){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this.$=void 0,this.internalTests={},this.k=new wn,this.S=new wn,this.exclusiveTests=Object.create(null),this.A=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation((()=>{this.typeError(sn.notType)})),this.type=t.type,this.A=t.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},null==t?void 0:t.spec),this.withMutation((t=>{t.nonNullable()}))}get F(){return this.type}clone(t){if(this.$)return t&&Object.assign(this.spec,t),this;const e=Object.create(Object.getPrototypeOf(this));return e.type=this.type,e.A=this.A,e.k=this.k.clone(),e.S=this.S.clone(),e.internalTests=Object.assign({},this.internalTests),e.exclusiveTests=Object.assign({},this.exclusiveTests),e.deps=[...this.deps],e.conditions=[...this.conditions],e.tests=[...this.tests],e.transforms=[...this.transforms],e.spec=yn(Object.assign({},this.spec,t)),e}label(t){let e=this.clone();return e.spec.label=t,e}meta(...t){if(0===t.length)return this.spec.meta;let e=this.clone();return e.spec.meta=Object.assign(e.spec.meta||{},t[0]),e}withMutation(t){let e=this.$;this.$=!0;let n=t(this);return this.$=e,n}concat(t){if(!t||t===this)return this;if(t.type!==this.type&&"mixed"!==this.type)throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${t.type}`);let e=this,n=t.clone();const s=Object.assign({},e.spec,n.spec);return n.spec=s,n.internalTests=Object.assign({},e.internalTests,n.internalTests),n.k=e.k.merge(t.k,t.S),n.S=e.S.merge(t.S,t.k),n.tests=e.tests,n.exclusiveTests=e.exclusiveTests,n.withMutation((e=>{t.tests.forEach((t=>{e.test(t.OPTIONS)}))})),n.transforms=[...e.transforms,...n.transforms],n}isType(t){return null==t?!(!this.spec.nullable||null!==t)||!(!this.spec.optional||void 0!==t):this.A(t)}resolve(t){let e=this;if(e.conditions.length){let n=e.conditions;e=e.clone(),e.conditions=[],e=n.reduce(((e,n)=>n.resolve(e,t)),e),e=e.resolve(t)}return e}resolveOptions(t){var e,n,s,r;return Object.assign({},t,{from:t.from||[],strict:null!=(e=t.strict)?e:this.spec.strict,abortEarly:null!=(n=t.abortEarly)?n:this.spec.abortEarly,recursive:null!=(s=t.recursive)?s:this.spec.recursive,disableStackTrace:null!=(r=t.disableStackTrace)?r:this.spec.disableStackTrace})}cast(t,e={}){let n=this.resolve(Object.assign({},e,{value:t})),s="ignore-optionality"===e.assert,r=n._(t,e);if(!1!==e.assert&&!n.isType(r)){if(s&&gn(r))return r;let i=We(t),a=We(r);throw new TypeError(`The value of ${e.path||"field"} could not be cast to a value that satisfies the schema type: "${n.type}". \n\nattempted value: ${i} \n`+(a!==i?`result of cast: ${a}`:""))}return r}_(t,e){let n=void 0===t?t:this.transforms.reduce(((n,s)=>s.call(this,n,t,this,e)),t);return void 0===n&&(n=this.getDefault(e)),n}C(t,e={},n,s){let{path:r,originalValue:i=t,strict:a=this.spec.strict}=e,o=t;a||(o=this._(o,Object.assign({assert:!1},e)));let l=[];for(let t of Object.values(this.internalTests))t&&l.push(t);this.runTests({path:r,value:o,originalValue:i,options:e,tests:l},n,(t=>{if(t.length)return s(t,o);this.runTests({path:r,value:o,originalValue:i,options:e,tests:this.tests},n,s)}))}runTests(t,e,n){let s=!1,{tests:r,value:i,originalValue:a,path:o,options:l}=t,c=t=>{s||(s=!0,e(t,i))},u=t=>{s||(s=!0,n(t,i))},h=r.length,p=[];if(!h)return u([]);let d={value:i,originalValue:a,path:o,options:l,schema:this};for(let t=0;t<r.length;t++)(0,r[t])(d,c,(function(t){t&&(Array.isArray(t)?p.push(...t):p.push(t)),--h<=0&&u(p)}))}asNestedTest({key:t,index:e,parent:n,parentPath:s,originalParent:r,options:i}){const a=null!=t?t:e;if(null==a)throw TypeError("Must include `key` or `index` for nested validations");const o="number"==typeof a;let l=n[a];const c=Object.assign({},i,{strict:!0,parent:n,value:l,originalValue:r[a],key:void 0,[o?"index":"key"]:a,path:o||a.includes(".")?`${s||""}[${o?a:`"${a}"`}]`:(s?`${s}.`:"")+t});return(t,e,n)=>this.resolve(c).C(l,c,e,n)}validate(t,e){var n;let s=this.resolve(Object.assign({},e,{value:t})),r=null!=(n=null==e?void 0:e.disableStackTrace)?n:s.spec.disableStackTrace;return new Promise(((n,i)=>s.C(t,e,((t,e)=>{nn.isError(t)&&(t.value=e),i(t)}),((t,e)=>{t.length?i(new nn(t,e,void 0,void 0,r)):n(e)}))))}validateSync(t,e){var n;let s,r=this.resolve(Object.assign({},e,{value:t})),i=null!=(n=null==e?void 0:e.disableStackTrace)?n:r.spec.disableStackTrace;return r.C(t,Object.assign({},e,{sync:!0}),((t,e)=>{throw nn.isError(t)&&(t.value=e),t}),((e,n)=>{if(e.length)throw new nn(e,t,void 0,void 0,i);s=n})),s}isValid(t,e){return this.validate(t,e).then((()=>!0),(t=>{if(nn.isError(t))return!1;throw t}))}isValidSync(t,e){try{return this.validateSync(t,e),!0}catch(t){if(nn.isError(t))return!1;throw t}}O(t){let e=this.spec.default;return null==e?e:"function"==typeof e?e.call(this,t):yn(e)}getDefault(t){return this.resolve(t||{}).O(t)}default(t){return 0===arguments.length?this.O():this.clone({default:t})}strict(t=!0){return this.clone({strict:t})}nullability(t,e){const n=this.clone({nullable:t});return n.internalTests.nullable=bn({message:e,name:"nullable",test(t){return null!==t||this.schema.spec.nullable}}),n}optionality(t,e){const n=this.clone({optional:t});return n.internalTests.optionality=bn({message:e,name:"optionality",test(t){return void 0!==t||this.schema.spec.optional}}),n}optional(){return this.optionality(!0)}defined(t=sn.defined){return this.optionality(!1,t)}nullable(){return this.nullability(!0)}nonNullable(t=sn.notNull){return this.nullability(!1,t)}required(t=sn.required){return this.clone().withMutation((e=>e.nonNullable(t).defined(t)))}notRequired(){return this.clone().withMutation((t=>t.nullable().optional()))}transform(t){let e=this.clone();return e.transforms.push(t),e}test(...t){let e;if(e=1===t.length?"function"==typeof t[0]?{test:t[0]}:t[0]:2===t.length?{name:t[0],test:t[1]}:{name:t[0],message:t[1],test:t[2]},void 0===e.message&&(e.message=sn.default),"function"!=typeof e.test)throw new TypeError("`test` is a required parameters");let n=this.clone(),s=bn(e),r=e.exclusive||e.name&&!0===n.exclusiveTests[e.name];if(e.exclusive&&!e.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return e.name&&(n.exclusiveTests[e.name]=!!e.exclusive),n.tests=n.tests.filter((t=>{if(t.OPTIONS.name===e.name){if(r)return!1;if(t.OPTIONS.test===s.OPTIONS.test)return!1}return!0})),n.tests.push(s),n}when(t,e){Array.isArray(t)||"string"==typeof t||(e=t,t=".");let n=this.clone(),s=Ke(t).map((t=>new mn(t)));return s.forEach((t=>{t.isSibling&&n.deps.push(t.key)})),n.conditions.push("function"==typeof e?new fn(s,e):fn.fromOptions(s,e)),n}typeError(t){let e=this.clone();return e.internalTests.typeError=bn({message:t,name:"typeError",skipAbsent:!0,test(t){return!!this.schema.A(t)||this.createError({params:{type:this.schema.type}})}}),e}oneOf(t,e=sn.oneOf){let n=this.clone();return t.forEach((t=>{n.k.add(t),n.S.delete(t)})),n.internalTests.whiteList=bn({message:e,name:"oneOf",skipAbsent:!0,test(t){let e=this.schema.k,n=e.resolveAll(this.resolve);return!!n.includes(t)||this.createError({params:{values:Array.from(e).join(", "),resolved:n}})}}),n}notOneOf(t,e=sn.notOneOf){let n=this.clone();return t.forEach((t=>{n.S.add(t),n.k.delete(t)})),n.internalTests.blacklist=bn({message:e,name:"notOneOf",test(t){let e=this.schema.S,n=e.resolveAll(this.resolve);return!n.includes(t)||this.createError({params:{values:Array.from(e).join(", "),resolved:n}})}}),n}strip(t=!0){let e=this.clone();return e.spec.strip=t,e}describe(t){const e=(t?this.resolve(t):this).clone(),{label:n,meta:s,optional:r,nullable:i}=e.spec;return{meta:s,label:n,optional:r,nullable:i,default:e.getDefault(t),type:e.type,oneOf:e.k.describe(),notOneOf:e.S.describe(),tests:e.tests.filter(((t,e,n)=>n.findIndex((e=>e.OPTIONS.name===t.OPTIONS.name))===e)).map((e=>{const n=e.OPTIONS.params&&t?xn(Object.assign({},e.OPTIONS.params),t):e.OPTIONS.params;return{name:e.OPTIONS.name,params:n}}))}}get"~standard"(){const t=this;return{version:1,vendor:"yup",async validate(e){try{return{value:await t.validate(e,{abortEarly:!1})}}catch(t){if(t instanceof nn)return{issues:An(t)};throw t}}}}}Fn.prototype.h=!0;for(const t of["validate","validateSync"])Fn.prototype[`${t}At`]=function(e,n,s={}){const{parent:r,parentPath:i,schema:a}=$n(this,e,n,s.context);return a[t](r&&r[i],Object.assign({},s,{parent:r,path:e}))};for(const t of["equals","is"])Fn.prototype[t]=Fn.prototype.oneOf;for(const t of["not","nope"])Fn.prototype[t]=Fn.prototype.notOneOf;function En(){return new _n}class _n extends Fn{constructor(){super({type:"boolean",check:t=>(t instanceof Boolean&&(t=t.valueOf()),"boolean"==typeof t)}),this.withMutation((()=>{this.transform(((t,e)=>{if(this.spec.coerce&&!this.isType(t)){if(/^(true|1)$/i.test(String(t)))return!0;if(/^(false|0)$/i.test(String(t)))return!1}return t}))}))}isTrue(t=ln.isValue){return this.test({message:t,name:"is-value",exclusive:!0,params:{value:"true"},test:t=>gn(t)||!0===t})}isFalse(t=ln.isValue){return this.test({message:t,name:"is-value",exclusive:!0,params:{value:"false"},test:t=>gn(t)||!1===t})}default(t){return super.default(t)}defined(t){return super.defined(t)}optional(){return super.optional()}required(t){return super.required(t)}notRequired(){return super.notRequired()}nullable(){return super.nullable()}nonNullable(t){return super.nonNullable(t)}strip(t){return super.strip(t)}}En.prototype=_n.prototype;const Cn=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function On(t){const e=Pn(t);if(!e)return Date.parse?Date.parse(t):Number.NaN;if(void 0===e.z&&void 0===e.plusMinus)return new Date(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond).valueOf();let n=0;return"Z"!==e.z&&void 0!==e.plusMinus&&(n=60*e.hourOffset+e.minuteOffset,"+"===e.plusMinus&&(n=0-n)),Date.UTC(e.year,e.month,e.day,e.hour,e.minute+n,e.second,e.millisecond)}function Pn(t){var e,n;const s=Cn.exec(t);return s?{year:zn(s[1]),month:zn(s[2],1)-1,day:zn(s[3],1),hour:zn(s[4]),minute:zn(s[5]),second:zn(s[6]),millisecond:s[7]?zn(s[7].substring(0,3)):0,precision:null!=(e=null==(n=s[7])?void 0:n.length)?e:void 0,z:s[8]||void 0,plusMinus:s[9]||void 0,hourOffset:zn(s[10]),minuteOffset:zn(s[11])}:null}function zn(t,e=0){return Number(t)||e}let Dn=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Tn=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,Mn=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,jn="^\\d{4}-\\d{2}-\\d{2}",Nn="\\d{2}:\\d{2}:\\d{2}",qn="(([+-]\\d{2}(:?\\d{2})?)|Z)",Rn=new RegExp(`${jn}T${Nn}(\\.\\d+)?${qn}$`),Ln=t=>gn(t)||t===t.trim(),Bn={}.toString();function Zn(){return new Vn}class Vn extends Fn{constructor(){super({type:"string",check:t=>(t instanceof String&&(t=t.valueOf()),"string"==typeof t)}),this.withMutation((()=>{this.transform(((t,e)=>{if(!this.spec.coerce||this.isType(t))return t;if(Array.isArray(t))return t;const n=null!=t&&t.toString?t.toString():t;return n===Bn?t:n}))}))}required(t){return super.required(t).withMutation((e=>e.test({message:t||sn.required,name:"required",skipAbsent:!0,test:t=>!!t.length})))}notRequired(){return super.notRequired().withMutation((t=>(t.tests=t.tests.filter((t=>"required"!==t.OPTIONS.name)),t)))}length(t,e=rn.length){return this.test({message:e,name:"length",exclusive:!0,params:{length:t},skipAbsent:!0,test(e){return e.length===this.resolve(t)}})}min(t,e=rn.min){return this.test({message:e,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(e){return e.length>=this.resolve(t)}})}max(t,e=rn.max){return this.test({name:"max",exclusive:!0,message:e,params:{max:t},skipAbsent:!0,test(e){return e.length<=this.resolve(t)}})}matches(t,e){let n,s,r=!1;return e&&("object"==typeof e?({excludeEmptyString:r=!1,message:n,name:s}=e):n=e),this.test({name:s||"matches",message:n||rn.matches,params:{regex:t},skipAbsent:!0,test:e=>""===e&&r||-1!==e.search(t)})}email(t=rn.email){return this.matches(Dn,{name:"email",message:t,excludeEmptyString:!0})}url(t=rn.url){return this.matches(Tn,{name:"url",message:t,excludeEmptyString:!0})}uuid(t=rn.uuid){return this.matches(Mn,{name:"uuid",message:t,excludeEmptyString:!1})}datetime(t){let e,n,s="";return t&&("object"==typeof t?({message:s="",allowOffset:e=!1,precision:n}=t):s=t),this.matches(Rn,{name:"datetime",message:s||rn.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:s||rn.datetime_offset,params:{allowOffset:e},skipAbsent:!0,test:t=>{if(!t||e)return!0;const n=Pn(t);return!!n&&!!n.z}}).test({name:"datetime_precision",message:s||rn.datetime_precision,params:{precision:n},skipAbsent:!0,test:t=>{if(!t||null==n)return!0;const e=Pn(t);return!!e&&e.precision===n}})}ensure(){return this.default("").transform((t=>null===t?"":t))}trim(t=rn.trim){return this.transform((t=>null!=t?t.trim():t)).test({message:t,name:"trim",test:Ln})}lowercase(t=rn.lowercase){return this.transform((t=>gn(t)?t:t.toLowerCase())).test({message:t,name:"string_case",exclusive:!0,skipAbsent:!0,test:t=>gn(t)||t===t.toLowerCase()})}uppercase(t=rn.uppercase){return this.transform((t=>gn(t)?t:t.toUpperCase())).test({message:t,name:"string_case",exclusive:!0,skipAbsent:!0,test:t=>gn(t)||t===t.toUpperCase()})}}Zn.prototype=Vn.prototype;let In=t=>t!=+t;function Un(){return new Hn}class Hn extends Fn{constructor(){super({type:"number",check:t=>(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&!In(t))}),this.withMutation((()=>{this.transform(((t,e)=>{if(!this.spec.coerce)return t;let n=t;if("string"==typeof n){if(n=n.replace(/\s/g,""),""===n)return NaN;n=+n}return this.isType(n)||null===n?n:parseFloat(n)}))}))}min(t,e=an.min){return this.test({message:e,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(e){return e>=this.resolve(t)}})}max(t,e=an.max){return this.test({message:e,name:"max",exclusive:!0,params:{max:t},skipAbsent:!0,test(e){return e<=this.resolve(t)}})}lessThan(t,e=an.lessThan){return this.test({message:e,name:"max",exclusive:!0,params:{less:t},skipAbsent:!0,test(e){return e<this.resolve(t)}})}moreThan(t,e=an.moreThan){return this.test({message:e,name:"min",exclusive:!0,params:{more:t},skipAbsent:!0,test(e){return e>this.resolve(t)}})}positive(t=an.positive){return this.moreThan(0,t)}negative(t=an.negative){return this.lessThan(0,t)}integer(t=an.integer){return this.test({name:"integer",message:t,skipAbsent:!0,test:t=>Number.isInteger(t)})}truncate(){return this.transform((t=>gn(t)?t:0|t))}round(t){var e;let n=["ceil","floor","round","trunc"];if("trunc"===(t=(null==(e=t)?void 0:e.toLowerCase())||"round"))return this.truncate();if(-1===n.indexOf(t.toLowerCase()))throw new TypeError("Only valid options for round() are: "+n.join(", "));return this.transform((e=>gn(e)?e:Math[t](e)))}}Un.prototype=Hn.prototype;let Jn=new Date(""),Gn=t=>"[object Date]"===Object.prototype.toString.call(t);class Wn extends Fn{constructor(){super({type:"date",check:t=>Gn(t)&&!isNaN(t.getTime())}),this.withMutation((()=>{this.transform(((t,e)=>!this.spec.coerce||this.isType(t)||null===t?t:(t=On(t),isNaN(t)?Wn.INVALID_DATE:new Date(t))))}))}prepareParam(t,e){let n;if(mn.isRef(t))n=t;else{let s=this.cast(t);if(!this.A(s))throw new TypeError(`\`${e}\` must be a Date or a value that can be \`cast()\` to a Date`);n=s}return n}min(t,e=on.min){let n=this.prepareParam(t,"min");return this.test({message:e,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(t){return t>=this.resolve(n)}})}max(t,e=on.max){let n=this.prepareParam(t,"max");return this.test({message:e,name:"max",exclusive:!0,params:{max:t},skipAbsent:!0,test(t){return t<=this.resolve(n)}})}}function Kn(t,e=[]){let n=[],s=new Set,r=new Set(e.map((([t,e])=>`${t}-${e}`)));function i(t,e){let i=Te.split(t)[0];s.add(i),r.has(`${e}-${i}`)||n.push([e,i])}for(const e of Object.keys(t)){let n=t[e];s.add(e),mn.isRef(n)&&n.isSibling?i(n.path,e):dn(n)&&"deps"in n&&n.deps.forEach((t=>i(t,e)))}return Be.array(Array.from(s),n).reverse()}function Xn(t,e){let n=1/0;return t.some(((t,s)=>{var r;if(null!=(r=e.path)&&r.includes(t))return n=s,!0})),n}function Yn(t){return(e,n)=>Xn(t,e)-Xn(t,n)}Wn.INVALID_DATE=Jn;const Qn=(t,e,n)=>{if("string"!=typeof t)return t;let s=t;try{s=JSON.parse(t)}catch(t){}return n.isType(s)?s:t};function ts(t){if("fields"in t){const e={};for(const[n,s]of Object.entries(t.fields))e[n]=ts(s);return t.setFields(e)}if("array"===t.type){const e=t.optional();return e.innerType&&(e.innerType=ts(e.innerType)),e}return"tuple"===t.type?t.optional().clone({types:t.spec.types.map(ts)}):"optional"in t?t.optional():t}const es=(t,e)=>{const n=[...Te.normalizePath(e)];if(1===n.length)return n[0]in t;let s=n.pop(),r=Te.getter(Te.join(n),!0)(t);return!(!r||!(s in r))};let ns=t=>"[object Object]"===Object.prototype.toString.call(t);function ss(t,e){let n=Object.keys(t.fields);return Object.keys(e).filter((t=>-1===n.indexOf(t)))}const is=Yn([]);function rs(t){return new as(t)}class as extends Fn{constructor(t){super({type:"object",check:t=>ns(t)||"function"==typeof t}),this.fields=Object.create(null),this.P=is,this.D=[],this.T=[],this.withMutation((()=>{t&&this.shape(t)}))}_(t,e={}){var n;let s=super._(t,e);if(void 0===s)return this.getDefault(e);if(!this.A(s))return s;let r=this.fields,i=null!=(n=e.stripUnknown)?n:this.spec.noUnknown,a=[].concat(this.D,Object.keys(s).filter((t=>!this.D.includes(t)))),o={},l=Object.assign({},e,{parent:o,M:e.M||!1}),c=!1;for(const t of a){let n=r[t],a=t in s,u=s[t];if(n){let r;l.path=(e.path?`${e.path}.`:"")+t,n=n.resolve({value:u,context:e.context,parent:o});let i=n instanceof Fn?n.spec:void 0,a=null==i?void 0:i.strict;if(null!=i&&i.strip){c=c||t in s;continue}r=e.M&&a?u:n.cast(u,l),void 0!==r&&(o[t]=r)}else a&&!i&&(o[t]=u);a===t in o&&o[t]===u||(c=!0)}return c?o:s}C(t,e={},n,s){let{from:r=[],originalValue:i=t,recursive:a=this.spec.recursive}=e;e.from=[{schema:this,value:i},...r],e.M=!0,e.originalValue=i,super.C(t,e,n,((t,r)=>{if(!a||!ns(r))return void s(t,r);i=i||r;let o=[];for(let t of this.D){let n=this.fields[t];n&&!mn.isRef(n)&&o.push(n.asNestedTest({options:e,key:t,parent:r,parentPath:e.path,originalParent:i}))}this.runTests({tests:o,value:r,originalValue:i,options:e},n,(e=>{s(e.sort(this.P).concat(t),r)}))}))}clone(t){const e=super.clone(t);return e.fields=Object.assign({},this.fields),e.D=this.D,e.T=this.T,e.P=this.P,e}concat(t){let e=super.concat(t),n=e.fields;for(let[t,e]of Object.entries(this.fields)){const s=n[t];n[t]=void 0===s?e:s}return e.withMutation((e=>e.setFields(n,[...this.T,...t.T])))}O(t){if("default"in this.spec)return super.O(t);if(!this.D.length)return;let e={};return this.D.forEach((n=>{var s;const r=this.fields[n];let i=t;null!=(s=i)&&s.value&&(i=Object.assign({},i,{parent:i.value,value:i.value[n]})),e[n]=r&&"getDefault"in r?r.getDefault(i):void 0})),e}setFields(t,e){let n=this.clone();return n.fields=t,n.D=Kn(t,e),n.P=Yn(Object.keys(t)),e&&(n.T=e),n}shape(t,e=[]){return this.clone().withMutation((n=>{let s=n.T;return e.length&&(Array.isArray(e[0])||(e=[e]),s=[...n.T,...e]),n.setFields(Object.assign(n.fields,t),s)}))}partial(){const t={};for(const[e,n]of Object.entries(this.fields))t[e]="optional"in n&&n.optional instanceof Function?n.optional():n;return this.setFields(t)}deepPartial(){return ts(this)}pick(t){const e={};for(const n of t)this.fields[n]&&(e[n]=this.fields[n]);return this.setFields(e,this.T.filter((([e,n])=>t.includes(e)&&t.includes(n))))}omit(t){const e=[];for(const n of Object.keys(this.fields))t.includes(n)||e.push(n);return this.pick(e)}from(t,e,n){let s=Te.getter(t,!0);return this.transform((r=>{if(!r)return r;let i=r;return es(r,t)&&(i=Object.assign({},r),n||delete i[t],i[e]=s(r)),i}))}json(){return this.transform(Qn)}exact(t){return this.test({name:"exact",exclusive:!0,message:t||cn.exact,test(t){if(null==t)return!0;const e=ss(this.schema,t);return 0===e.length||this.createError({params:{properties:e.join(", ")}})}})}stripUnknown(){return this.clone({noUnknown:!0})}noUnknown(t=!0,e=cn.noUnknown){"boolean"!=typeof t&&(e=t,t=!0);let n=this.test({name:"noUnknown",exclusive:!0,message:e,test(e){if(null==e)return!0;const n=ss(this.schema,e);return!t||0===n.length||this.createError({params:{unknown:n.join(", ")}})}});return n.spec.noUnknown=t,n}unknown(t=!0,e=cn.noUnknown){return this.noUnknown(!t,e)}transformKeys(t){return this.transform((e=>{if(!e)return e;const n={};for(const s of Object.keys(e))n[t(s)]=e[s];return n}))}camelCase(){return this.transformKeys(Ne.camelCase)}snakeCase(){return this.transformKeys(Ne.snakeCase)}constantCase(){return this.transformKeys((t=>Ne.snakeCase(t).toUpperCase()))}describe(t){const e=(t?this.resolve(t):this).clone(),n=super.describe(t);n.fields={};for(const[r,i]of Object.entries(e.fields)){var s;let e=t;null!=(s=e)&&s.value&&(e=Object.assign({},e,{parent:e.value,value:e.value[r]})),n.fields[r]=i.describe(e)}return n}}function os(t,e){if(console.log("Validating form with data:",t),console.log("Using schema:",e),!e||!t)return{};try{return ls(e).validateSync(t,{abortEarly:!1}),{}}catch(t){const e={};return t.inner?t.inner.forEach((t=>{e[t.path]=t.message})):t.path&&(e[t.path]=t.message),e}}function ls(t){const e={};for(const[n,s]of Object.entries(t)){let t=Zn();"number"===s.type?t=Un():"email"===s.type?t=Zn().email():"boolean"===s.type&&(t=En()),s.required&&(t=t.required(`${n} is required`)),void 0!==s.min&&(t="number"===s.type?t.min(s.min,`${n} must be at least ${s.min}`):t.min(s.min,`${n} must be at least ${s.min} characters`)),void 0!==s.max&&(t="number"===s.type?t.max(s.max,`${n} must be at most ${s.max}`):t.max(s.max,`${n} must be at most ${s.max} characters`)),e[n]=t}return rs().shape(e)}function cs(t){const e=document.createElement("div");e.innerHTML=t;const n=e.querySelectorAll("input, select, textarea");for(const t of n){const e=t.getAttribute("label"),n=t.getAttribute("name"),s=t.getAttribute("type")||t.tagName.toLowerCase(),r=t.getAttribute("id")||n;if(!e||!n)continue;const i=document.createElement("div");if(i.className="form-group","toggle"===s)i.innerHTML=`\n\t\t\t\t<div class="toggle-group">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype="checkbox"\n\t\t\t\t\t\tname="${n}"\n\t\t\t\t\t\tid="${r}"\n\t\t\t\t\t\tclass="toggle-input"\n\t\t\t\t\t/>\n\t\t\t\t\t<label for="${r}" class="toggle-label">\n\t\t\t\t\t\t<span class="toggle-text">${e}</span>\n\t\t\t\t\t\t<span class="toggle-switch">\n\t\t\t\t\t\t\t<span class="toggle-thumb"></span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t`;else if("select"===s){const s=t.outerHTML;i.innerHTML=`\n\t\t\t\t<label for="${r}">${e}</label>\n\t\t\t\t<div class="select-wrap">\n\t\t\t\t\t${s}\n\t\t\t\t</div>\n\t\t\t\t<span class="error-message" data-field="${n}"></span>\n\t\t\t`}else if("textarea"===s){const s=t.outerHTML;i.innerHTML=`\n\t\t\t\t<label for="${r}">${e}</label>\n\t\t\t\t<div class="textarea-wrap">\n\t\t\t\t\t${s}\n\t\t\t\t</div>\n\t\t\t\t<span class="error-message" data-field="${n}"></span>\n\t\t\t`}else{const s=t.outerHTML;i.innerHTML=`\n\t\t\t\t<label for="${r}">${e}</label>\n\t\t\t\t${s}\n\t\t\t\t<span class="error-message" data-field="${n}"></span>\n\t\t\t`}t.parentNode.replaceChild(i,t)}const s=e.querySelectorAll("x-button");if(s.length>0){const t=document.createElement("div");t.className="form-actions";for(const e of s)t.appendChild(e);e.appendChild(t)}return e.innerHTML}rs.prototype=as.prototype;class us extends h{constructor(){super(),this.currentFormData={},this.dirty=!1,this.submitted=!1,this.schema=null,this.isValid=!0,this.errors={}}connectedCallback(){super.connectedCallback(),this.dataPath=this.getAttribute("data"),this.formName=this.getAttribute("name")||"defaultForm",this.onStateChange(this.getCurrentState())}onStateChange(t){const e=this.dataPath.replace("global_","");this.currentFormData=t[e]||{};const n=this.getAttribute("schema");n&&(this.schema=t.schemas?.[n]),this.schema&&this.dirty?(this.errors=os(this.currentFormData,this.schema),this.isValid=0===Object.keys(this.errors).length):this.dirty||(this.errors={},this.isValid=!0),v(`forms.${this.formName}`,this.currentFormData),this.getAttribute("content")&&!this.querySelector("input")&&this.renderForm(t),this.updateFormInputs(t),this.updateButtonStates()}renderForm(t){let e=this.getAttribute("content");if(e=e.replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&#10;/g,"\n").replace(/&#13;/g,"\r").replace(/&#9;/g,"\t"),!e.trim())return void(this.innerHTML="");const n=cs(e);this.innerHTML=n;const s=this.querySelectorAll("input, select, textarea");for(const t of s){const e=t.getAttribute("name");if(!e)continue;const n="checkbox"===t.type||"radio"===t.type?"change":"input";t.addEventListener(n,(n=>{const s="checkbox"===t.type?t.checked:t.value;this.dirty=!0,t.setAttribute("data-touched","true");const r={...this.currentFormData,[e]:s};this.currentFormData=r,this.schema&&(this.errors=os(r,this.schema),this.isValid=0===Object.keys(this.errors).length,this.updateFormInputs(this.getCurrentState()),this.updateButtonStates()),v(this.dataPath.replace("global_",""),r)}))}this.removeAttribute("content")}updateFormInputs(t){const e=this.querySelectorAll("input, select, textarea");for(const n of e){const e=n.getAttribute("name");if(!e)continue;const s=t[this.dataPath.replace("global_","")]?.[e];if(void 0!==s&&("checkbox"===n.type?n.checked=s:n.value=s),"checkbox"!==n.type&&"radio"!==n.type){const t=this.errors[e],s=n.hasAttribute("data-touched"),r=t&&(s||this.submitted),i=this.querySelector(`.error-message[data-field="${e}"]`);i&&(r?(i.textContent=t,i.style.display="block"):(i.textContent="",i.style.display="none")),r?(n.classList.add("error"),n.setAttribute("data-error",t)):(n.classList.remove("error"),n.removeAttribute("data-error"))}}}updateButtonStates(){const t=this.querySelectorAll("x-button");for(const e of t){const t=this.areAllTouchedFieldsValid();this.dirty&&t?e.removeAttribute("disabled"):e.setAttribute("disabled","")}}areAllTouchedFieldsValid(){if(!this.schema||!this.dirty)return!0;const t=this.querySelectorAll("input, select, textarea");for(const e of t){const t=e.getAttribute("name");if(t&&"checkbox"!==e.type&&"radio"!==e.type&&e.hasAttribute("data-touched")&&this.errors[t])return!1}return!0}markAsSubmitted(){this.submitted=!0;const t=this.querySelectorAll("input, select, textarea");for(const e of t)e.setAttribute("data-touched","true");this.schema&&(this.errors=os(this.currentFormData,this.schema),this.isValid=0===Object.keys(this.errors).length,this.updateFormInputs(this.getCurrentState()),this.updateButtonStates())}reset(){this.dirty=!1,this.submitted=!1,this.isValid=!0,this.errors={},this.currentFormData={};const t=this.querySelectorAll("input, select, textarea");for(const e of t)e.removeAttribute("data-touched");this.renderForm(this.getCurrentState()),this.updateButtonStates()}}const hs=t=>t.replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&#10;/g,"\n").replace(/&#13;/g,"\r").replace(/&#9;/g,"\t"),ds=(t,e)=>{if("required"===t)return void(e.required=!0);const n=t.indexOf(":");if(-1===n)return void(e.type=t);const s=t.substring(0,n).trim(),r=t.substring(n+1).trim();let i=r;("min"!==s&&"max"!==s||(i=parseInt(r),!isNaN(i)))&&(e[s]=i)},fs=t=>{const e={};for(const n of t.split("\n")){const t=n.trim();if(!t)continue;const s=t.indexOf(":");if(-1===s)continue;const r=t.substring(0,s).trim(),i=t.substring(s+1).trim();if(!r||!i)continue;const a=i.split(",").map((t=>t.trim())),o={type:"string"};a.forEach((t=>ds(t,o))),e[r]=o}return e};class ps extends h{connectedCallback(){super.connectedCallback(),this.processSchema()}processSchema(){const t=this.getAttribute("content"),e=this.getAttribute("name");if(!e)return void console.error("x-schema: name attribute is required");if(this.removeAttribute("content"),!t||!t.trim())return;const n=hs(t);v(`schemas.${e}`,fs(n.trim()))}}class ms extends h{constructor(){super()}connectedCallback(){super.connectedCallback(),this.initializeTemplate(),this.renderContent()}onStateChange(t){this.renderContent()}initializeTemplate(){const t=this.getAttribute("template");if(!t)return void console.warn("x-fill: no template attribute provided");const e=document.getElementById(t);e?this.template=e.innerHTML:console.warn(`x-fill: template element with id "${t}" not found`)}getItemPath(){const t=this.getAttribute("item");return t?t.trim().startsWith("{")||t.trim().startsWith("[")?null:t.startsWith("global_")?t.substring(7):t:(console.warn("x-fill: no item attribute provided"),null)}getItemFromState(){const t=this.getItemPath();return t?w(t):null}renderContent(){const t=this.getItemPath();let e;if(null===t){const n=this.getAttribute("item");try{const t=n.replace(/&quot;/g,'"');e=JSON.parse(t)}catch(t){return void console.error("x-fill: failed to parse item JSON:",t)}}else e=w(t);if(!e)return console.warn("x-fill: item is null or undefined"),void(this.innerHTML="");if(!this.template)return;const n=this.processTemplate(this.template,e),s=document.createElement("div");for(s.innerHTML=n,this.innerHTML="";s.firstChild;)this.appendChild(s.firstChild)}processTemplate(t,e){let n=t.replace(/\{\{\s*item_([^}]+)\s*\}\}/g,((t,n)=>{const s=n.trim();return e[s]||""}));return n=n.replace(/\{\{\s*item\s*\}\}/g,(()=>null!=e?String(e):"")),n}}function gs(){const t=[{name:"x-flow",class:T},{name:"x-page",class:M},{name:"x-navbar",class:j},{name:"x-content",class:N},{name:"x-box",class:q},{name:"x-breadcrumb",class:R},{name:"x-button",class:L},{name:"x-typography",class:B},{name:"x-include",class:H},{name:"x-link",class:Z},{name:"x-map",class:V},{name:"x-icon",class:I},{name:"x-data",class:z},{name:"x-subscribe",class:D},{name:"x-fragment",class:U},{name:"x-viz-bar",class:J},{name:"x-viz-pie",class:G},{name:"x-viz-line",class:W},{name:"x-markdown",class:ke},{name:"x-table",class:Ee},{name:"x-form",class:us},{name:"x-schema",class:ps},{name:"x-modal",class:d},{name:"x-fill",class:ms}];for(const{name:e,class:n}of t)customElements.get(e)||customElements.define(e,n)}async function bs(t={}){const e=t.router||t,n=t.state||{},s=t.hooks||{};g(e),e&&"function"==typeof e.registerWithFramework&&await e.registerWithFramework(m),Object.entries(s).forEach((([t,e])=>{S(t,e)})),Object.keys(n).length>0&&Object.entries(n).forEach((([t,e])=>{m.set(t,e)})),gs(),e&&"function"==typeof e.triggerInitialNavigation&&await e.triggerInitialNavigation()}function xs(t={}){const{beforeEach:e,afterEach:n,basePath:s="",initialPath:r,activePathKey:i="activePath"}=t;return{beforeEach:e,afterEach:n,basePath:s,initialPath:r,activePathKey:i,async registerWithFramework(t){t.unregisterFlow("routerNavigate"),t.registerFlow({key:"routerNavigate"},"\n\t\t\t\t// Extract href from event context\n\t\t\t\tlet href = null;\n\t\t\t\t\n\t\t\t\t// Try to get href from different sources\n\t\t\t\tif (event.element && event.element.getAttribute) {\n\t\t\t\t\thref = event.element.getAttribute('href');\n\t\t\t\t}\n\t\t\t\tif (!href && event.data && event.data.href) {\n\t\t\t\t\thref = event.data.href;\n\t\t\t\t}\n\t\t\t\tif (!href && event.href) {\n\t\t\t\t\thref = event.href;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (!href) {\n\t\t\t\t\tconsole.warn('routerNavigate: No href found in event context');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Build route context\n\t\t\t\tconst currentPath = state.router?.currentPath || window.location.hash || '#/';\n\t\t\t\tconst toPath = href.startsWith('#') ? href : '#' + href;\n\t\t\t\t\n\t\t\t\tconst routeContext = {\n\t\t\t\t\tto: { path: toPath, href: href },\n\t\t\t\t\tfrom: { path: currentPath },\n\t\t\t\t\tcancel: () => { throw new Error('Navigation cancelled'); }\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t// Call beforeEach hook if provided (wrapped in requestAnimationFrame)\n\t\t\t\tif (typeof routerBeforeEach === 'function') {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tawait new Promise((resolve) => {\n\t\t\t\t\t\t\trequestAnimationFrame(async () => {\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tawait routerBeforeEach(routeContext);\n\t\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\t\t\tif (error.message === 'Navigation cancelled') {\n\t\t\t\t\t\t\t\t\t\tconsole.log('Navigation cancelled by beforeEach hook');\n\t\t\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tthrow error;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tif (error.message === 'Navigation cancelled') {\n\t\t\t\t\t\t\tconsole.log('Navigation cancelled by beforeEach hook');\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthrow error;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Update router state\n\t\t\t\tSetData('router.previousPath', currentPath);\n\t\t\t\tSetData('router.currentPath', toPath);\n\t\t\t\t\n\t\t\t\t// Call afterEach hook if provided (wrapped in requestAnimationFrame)\n\t\t\t\tif (typeof routerAfterEach === 'function') {\n\t\t\t\t\tawait new Promise((resolve) => {\n\t\t\t\t\t\trequestAnimationFrame(async () => {\n\t\t\t\t\t\t\tawait routerAfterEach(routeContext);\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t// Update activePath\n\t\t\t\tconst cleanPath = toPath.startsWith('#') ? toPath.substring(1) : toPath;\n\t\t\t\tSetData('activePath', cleanPath);\n\t\t\t\t");const e=this.initialPath||window.location.hash||"#/dashboard",n=e.startsWith("#")?e.substring(1):e;t.SetData("router.currentPath",e),t.SetData("router.previousPath",""),t.SetData(this.activePathKey,n),this.j=e},async triggerInitialNavigation(){if(this.j){const t={to:{path:this.j,href:this.j},from:{path:""},cancel:()=>{throw new Error("Navigation cancelled")}};if("function"==typeof this.beforeEach)try{await new Promise((e=>{requestAnimationFrame((async()=>{try{await this.beforeEach(t),e()}catch(t){if("Navigation cancelled"!==t.message)throw t;console.log("Initial navigation cancelled by beforeEach hook"),e()}}))}))}catch(t){if("Navigation cancelled"===t.message)return void console.log("Initial navigation cancelled by beforeEach hook");throw t}"function"==typeof this.afterEach&&await new Promise((e=>{requestAnimationFrame((async()=>{await this.afterEach(t),e()}))}))}},updateActivePath(t){frameworkCore&&frameworkCore.SetData(this.activePathKey,t)},getCurrentPath:()=>frameworkCore?.get("router.currentPath"),getPreviousPath:()=>frameworkCore?.get("router.previousPath")}}export{_ as Alert,h as BaseUIComponent,C as Confirm,$ as GetData,F as Navigate,E as Query,xs as Router,v as SetData,x as SetState,O as Trigger,w as getState,t as html,bs as initializeFramework,S as registerComponentHook,b as setState,y as subscribeToState};
//# sourceMappingURL=./htmlNext.min.map